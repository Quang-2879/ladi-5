"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([[65575],{586033:function(e,t,n){n.d(t,{F:function(){return h},Z:function(){return S}});var r=n(258712),i=n(30694),a=n(18644),o=n(992114);function s(e,t,n,r,i,a,o){try{var s=e[a](o),p=s.value}catch(e){return void n(e)}s.done?t(p):Promise.resolve(p).then(r,i)}function p(){var e;return e=regeneratorRuntime.mark(function e(t,n,r,s,p,c,l,u,d){var m,y,v,g,f,T,w,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(y=(m=c||{}).appType,v=m.osType,f="",T="",!(["Pin","pinImpressions"].includes(t)&&n&&(s||u||d))){e.next=31;break}if((0,o.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:y,osType:v}}),e.prev=5,null!=(w=window.document.featurePolicy)&&w.allowsFeature("attribution-reporting")){e.next=9;break}return(0,o.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:y,osType:v}}),e.abrupt("return");case 9:b={eventSourceEligible:!0,triggerEligible:!1},f=(0,i.Z)(r,[s,u,d],!1,p,l);try{T=new URL(window.location.href).hostname}catch(e){(0,o.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"hostname_parse_failed",href:window&&window.location&&window.location.href}})}if(!(T&&"www.pinterest.com"!==T)){e.next=18;break}document.createElement("img").setAttribute("attributionsrc",f),(0,o.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"international",appType:y,osType:v,hostname:T}}),e.next=23;break;case 18:return e.next=20,window.fetch(f,{keepalive:!0,attributionReporting:b});case 20:if((g=e.sent).ok){e.next=23;break}throw Error("server request failed.");case 23:(0,o.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:y,osType:v}}),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(5),(0,o.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:(0,a.Z)(e.t0,"name"),message:(0,a.Z)(e.t0,"message"),appType:y,osType:v,hostname:T,responseStatus:g&&g.status}});case 29:e.next=32;break;case 31:(0,o.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:y,osType:v}});case 32:case"end":return e.stop()}},e,null,[[5,26]])}),(p=function(){var t=this,n=arguments;return new Promise(function(r,i){var a=e.apply(t,n);function o(e){s(a,r,i,o,p,"next",e)}function p(e){s(a,r,i,o,p,"throw",e)}o(void 0)})}).apply(this,arguments)}var c=n(576183),l=n(19963),u=n(824834),d=n(94970),m=n(174646),y=n(538645),v=n(422908),g=n(813509),f=n(438596),T=["children"];function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function P(e,t,n){var r;return(r=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==w(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Notification:{impressionType:"notificationDetailImpressions",idType:"newsIdStr",eventType:4111},NotificationFeed:{impressionType:"notificationFeedImpressions",idType:"newsIdStr",eventType:4110},EditorialBoard:{impressionType:"curatedBoardImpressions",idType:"boardIdStr",eventType:3700},VaseAnnotation:{impressionType:"vaseAnnotationImpressions",idType:"vaseAnnotationUrlStr",eventType:16444}};function S(e){var t=e.carouselData,n=e.closeupImpressionType,i=e.closeupNavigationType,a=e.componentType,s=e.contextLogData,T=e.clientTrackingParams,w=e.duploShouldTrackPinEvents,b=e.elementType,S=e.impressionAuxFields,h=e.inImpressionExp,D=e.impressionType,k=e.impressionsFramework,j=e.isPaused,O=e.loggingId,E=e.objectIdStr,A=e.slotIndex,_=e.trackCarousel,R=e.viewData,F=e.viewParameter,L=e.viewType,Z=e.isPromoted,N=e.storyPinProductEventData,C=(0,l.v)().logContextEvent,B=(0,v.r)().logMrcVideoAdEventOnPlay,M=(0,m.B)().userAgent.browserName,H=(0,g.Yg)().logStat,U=k||d.Z,V=(0,r.useRef)(null),W=(0,r.useRef)(function(e){});W.current=function(e){var r,o,l,u,d,m,y,v,g=x[D],f=g.idType,h=I(I((P(k={clientTrackingParams:T,endTime:e.endTime},f,O),P(k,"slotIndex",A),P(k,"time",e.startTime),P(k,"renderDuration",e.endTime-e.startTime),P(k,"type",n),k),S),{},{forcedExit:"removed"===e.forcedExit?0:void 0});if("Pin"===D){var k,j,Z,U=[],V=e.visibleEvents||new Map,W=e.hiddenEvents||new Map;if([1,50,80,2,102].forEach(function(e){V.has(e)&&U.push({type:e,time:1e6*(V.get(e)||0),visible:!0}),W.has(e)&&U.push({type:e,time:1e6*(W.get(e)||0),visible:!1})}),h=I(I({},h),{},{pinCellWidth:e.pinCellWidth||0,pinCellHeight:e.pinCellHeight||0,windowWidth:null==(j=window)?void 0:j.innerWidth,windowHeight:null==(Z=window)?void 0:Z.innerHeight,visibleEvents:U.sort(function(e,t){return e.time-t.time})}),(0,c.i7)(M)&&S&&S.isPromoted){var J=S.attributionSourceId,q=S.isPromoted,Y=S.link,G=S.campaignId,z=S.araAuxData,K=S.advertiserId,Q=S.domain,X=S.adDestinationUrl;!function(e,t,n,r,i,a,o,s,c){p.apply(this,arguments)}(D,null!=q?q:null,null!=J?J:null,null!=Y?Y:null,null!=G?G:null,null!=z?z:null,null!=K?K:null,null!=Q?Q:null,null!=X?X:null)}}var $={component:a,object_id_str:E,view_type:L,view_data:R||{},view_parameter:F};if(_)t&&_&&C(I(I({event_type:7352,event_data:{pinCarouselSlotImpressions:[I(I({},h),"canonical"===t.type?{carouselDataId:Number(null!=(r=t.carouselId)?r:0),slotIndex:t.index,carouselSlotId:(null==(o=t.carouselSlots)?void 0:o[null!=(l=t.index)?l:0])&&Number(t.carouselSlots[null!=(u=t.index)?u:0].slotId)}:{carouselDataId:Number(null!=(d=t.id)?d:0),carouselSlotId:(null==(m=t.carousel_slots)?void 0:m[null!=(y=t.index)?y:0])&&Number(t.carousel_slots[null!=(v=t.index)?v:0].id),slotIndex:t.index})]}},$),{},{aux_data:I({},s)}));else{var ee=I(I({clientTrackingParams:T,event_type:g.eventType},$),{},{element:b,event_data:I(P({},g.impressionType,"Story"===D?h:[h]),N?{storyPinProductEventData:N}:{}),aux_data:I({closeup_navigation_type:i},s)});C(ee),B(ee)}w&&H("log_pin_impression")};var J=(0,u.Z)({skipActivation:!0}),q=J.expName,Y=J.group,G=(0,y.ZP)(),z=(0,f.MM)(),K=(0,m.B)().isAuthenticated,Q=(0,r.useCallback)(function(){var e=!1;try{var t=V.current;if(t instanceof HTMLElement&&(!Z||t.getElementsByTagName("img").length>0)){var n=U.start(t);n.onExitViewport(W.current).setDebugId(O||"unknown"),w&&n.onEnterViewport(function(){H("log_pin_impression_track_enter_viewport")}),e=!0,Y&&(0,o.nP)("webapp.masonry.trackImpression",{tags:{callsite:"app_packages_useImpressionTracker",deviceType:G,experimentName:q,group:Y,handlerId:z,isAuthenticated:K,slotIndex:null!=A?A:"unknown"}})}}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}w&&H("log_pin_impression_track",{didStartTracking:e})},[V.current]);return(0,r.useEffect)(function(){return h&&!U.inExperiment&&U.setExperimentStatus(!0),j||Q(),function(){var e=V.current;e instanceof HTMLElement&&(!Z||e.getElementsByTagName("img").length>0)&&U.stop(e)}},[j,Q]),V}var h=function(e){return(0,e.children)({impressionTrackerRef:S(function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,T))})}},765575:function(e,t,n){n.d(t,{Cy:function(){return d},HE:function(){return m},JE:function(){return g},Mv:function(){return p},Y4:function(){return y},dL:function(){return s},fS:function(){return v},fv:function(){return l},qS:function(){return u},u:function(){return f},uc:function(){return c}});var r=n(586033);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){var r,a,o;r=e,a=t,o=n[t],(a=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(a))in r?Object.defineProperty(r,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[a]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var s=function(e){var t=(0,r.Z)({impressionAuxFields:o({},e.impressionData||{}),clientTrackingParams:e.trackingParams,duploShouldTrackPinEvents:e.duploShouldTrackPinEvents,loggingId:e.loggingId,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Pin",isPaused:e.isPaused,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},p=function(e){var t=(0,r.Z)({impressionAuxFields:{newsType:e.newsType,displayMode:e.displayMode,newsIndex:e.newsIndex||0,tapItemIdStr:e.tapItemIdStr},contextLogData:e.auxData||{},impressionType:"Notification",loggingId:e.notificationId,viewType:107,viewParameter:3082});return e.children({impressionTrackerRef:t})},c=function(e){var t=(0,r.Z)({impressionAuxFields:{newsType:e.newsType},contextLogData:e.auxData||{},impressionType:"NotificationFeed",loggingId:e.notificationId,viewType:107,viewParameter:3082});return e.children({impressionTrackerRef:t})},l=function(e){var t=(0,r.Z)({impressionAuxFields:o({},e.impressionData||{}),contextLogData:e.auxData||{},componentType:e.component,isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter,clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,impressionType:"Article"});return e.children({impressionTrackerRef:t})},u=function(e){var t=(0,r.Z)({impressionAuxFields:o({},e.impressionData||{}),clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Story",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},d=function(e){var t=(0,r.Z)({impressionAuxFields:o({},e.impressionData||{}),clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0,contextLogData:e.auxData||{},componentType:e.component,impressionType:"User",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},m=function(e){var t=(0,r.Z)({impressionAuxFields:o({},e.impressionData||{}),clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex||0,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Interest",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},y=function(e){var t=(0,r.Z)({impressionAuxFields:o({},e.impressionData||{}),clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"TodayArticle",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})},v=function(e){var t=(0,r.Z)({impressionAuxFields:o({},e.impressionData||{}),clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"Board",loggingId:e.loggingId,viewType:e.viewType||1,viewParameter:e.viewParameter,viewData:e.viewData});return e.children({impressionTrackerRef:t})},g=function(e){var t,n=(0,r.Z)({carouselData:e.carouselData,impressionType:"Pin",loggingId:e.loggingId,slotIndex:null!=(t=e.slotIndex)?t:0,trackCarousel:!0,viewParameter:e.viewParameter||72,viewType:e.viewType||1,isPaused:e.isPaused,contextLogData:e.contextLogData,componentType:e.component,impressionAuxFields:e.impressionAuxFields});return e.children({impressionTrackerRef:n})},f=function(e){var t=(0,r.Z)({impressionAuxFields:o({},e.impressionData||{}),clientTrackingParams:e.trackingParams,slotIndex:e.slotIndex,contextLogData:e.auxData||{},componentType:e.component,impressionType:"EditorialBoard",isPaused:e.isPaused,loggingId:e.loggingId,objectIdStr:e.objectIdStr,viewData:e.viewData,viewType:e.viewType||1,viewParameter:e.viewParameter});return e.children({impressionTrackerRef:t})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/65575-2801c7711603415f.js.map