"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([[14907],{32747:function(t,n,e){n.Z=(0,e(258712).createContext)(null)},849289:function(t,n,e){n.Z=(0,e(258712).createContext)(null)},282273:function(t,n,e){e.d(n,{Z:function(){return tt}});var r=e(258712),a=e(221097),i=e(582082),o=e(150739),c=e(535768),s=e(17433),u=e(298568),l=e(776090),p=e(638619),d=e(48756),m=e(904523),f=e(657742),y=e(482535);function g(t){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function v(t){return function(t){if(Array.isArray(t))return b(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return b(t,void 0);var e=({}).toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?b(t,n):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}function T(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function S(t,n,e){var r;return(r=function(t,n){if("object"!=g(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=g(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(n,"string"),(n="symbol"==g(r)?r:r+"")in t)?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var w=function(t){var n=performance.getEntriesByType("resource").filter(function(t){return t.name.includes("i.pinimg")}).reduce(function(t,n){var e=n.name.replace(".jpg","").split("/");return function(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?T(Object(e),!0).forEach(function(n){S(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):T(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}(S({},e[e.length-1],{downloadSize:n.name.split("/")[3].split("x")[0]}),t)},{}),e=Array.from(document.getElementsByTagName("img")).map(function(t){var e=t.src.replace(".jpg","").split("/"),r=e[e.length-1];if(n[r]){var a,i=(null==(a=(0,y.rZ)(t))?void 0:a.width)||1,o=n[r].downloadSize;return{fileName:r,renderedSize:i,downloadedSize:o,ratio:o/i}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}}),r=Array.from(document.querySelectorAll('div[role="img"]')).map(function(t){var e=t.style.backgroundImage.split('"')[1].replace(".jpg","").split("/"),r=e[e.length-1];if(n[r]&&t instanceof HTMLDivElement){var a,i=(null==(a=(0,y.rZ)(t))?void 0:a.width)||1,o=n[r].downloadSize;return{fileName:r,renderedSize:i,downloadedSize:o,ratio:o/i}}return{fileName:r,renderedSize:1,downloadedSize:1,ratio:1}});[].concat(v(e),v(r)).forEach(function(n){var e=n.ratio,r=n.fileName,a=n.downloadedSize;n.ratio>1.05&&(0,c.A9)("checkImageRatio.".concat(t),{count:Math.round(10*e)/10,tags:{fileName:"".concat(a,"_").concat(r)}})})},h=e(286272),A=e(642058),_=e(174646),I=function(t,n){var e=(0,r.useRef)(n);return{getState:function(){return e.current},dispatch:function(n){e.current=t(e.current,n)}}},O=e(873874),E=e(992114),C=e(19035);function N(t){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var M=["children"];function P(t,n){if(null==t)return{};var e,r,a=function(t,n){if(null==t)return{};var e={};for(var r in t)if(({}).hasOwnProperty.call(t,r)){if(-1!==n.indexOf(r))continue;e[r]=t[r]}return e}(t,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)e=i[r],-1===n.indexOf(e)&&({}).propertyIsEnumerable.call(t,e)&&(a[e]=t[e])}return a}function j(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,r)}return e}function R(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?j(Object(e),!0).forEach(function(n){x(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):j(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function x(t,n,e){return(n=Z(n))in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function Z(t){var n=function(t,n){if("object"!=N(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,n||"default");if("object"!=N(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==N(n)?n:n+""}function L(t){return function(t){if(Array.isArray(t))return D(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return D(t,void 0);var e=({}).toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?D(t,n):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=Array(n);e<n;e++)r[e]=t[e];return r}var z=["initial_app_load","client_route_push"],B=(0,o.XV)("PwtSurface"),G="NavigationComplete",H="VisuallyComplete",U=function(){(0,p._T)()},k=function(t,n){var e=t.metricConfig,r=e.metricId,a=e.pwtStaticContext,o=e.annotateExperiments,u=t.annotations,d=t.binaryAnnotations,m=t.constraintMap,f=t.startTime,y=t.imageTimings,g=t.spans,v=t.traceId;(0,s.L8)("Report_PWT_Complete_".concat((0,i.KJ)(r)),f,n);var b=(0,l.W)({annotateExperiments:L(null!=o?o:[]),annotations:u,binaryAnnotations:d,constraintMap:m,endTime:n,imageTimings:y,metricId:r,pwtStaticContext:a,startTime:f,traceId:v,spans:g});try{w(String(b.binaryAnnotationMap["metricId.surface"].value))}catch(t){(0,c.H)("image_ratio_check_error",{error:t})}return(0,p._T)(),R(R({},t),{},{result:b,status:"DONE"})},J=function(t){if(t.metricConfig.constraints.every(function(n){return t.constraintMap[n]})){var n=Math.max.apply(Math,L(t.metricConfig.constraints.map(function(n){return t.constraintMap[n]})));return k(t,n)}return B("Remaining constraints: ".concat(t.metricConfig.constraints.filter(function(n){return!t.constraintMap[n]}).join(", "))),t},K=function(t,n){var e=n.constraint,r=n.time,a=(0,i.KJ)(t.metricConfig.metricId);return A.Z?t.metricConfig.constraints.find(function(t){return t===e})?t.constraintMap[e]?(B('constraint "'.concat(e,'" is already complete.')),(0,c.H)("duplicated_constraint_complete",{constraint:e,action:a}),t):(B('marking constraint "'.concat(e,'" as complete ').concat(r||performance.now())),r?(0,s.ZP)("constraint_".concat(e,"_is_complete"),r):(0,s.ZP)("constraint_".concat(e,"_is_complete")),J(R(R({},t),{},{constraintMap:R(R({},t.constraintMap),{},x({},e,r||A.Z.now()))}))):(B('marked constraint "'.concat(e,'" is not a required constraint.')),t):((0,c.H)("missing_window_performance",{action:a}),t)},V=function(t,n){if(!A.Z){var e=(0,i.KJ)(t.metricConfig.metricId);(0,c.H)("missing_window_performance",{action:e})}B('removing constraint "'.concat(n,'"'));var r=t.metricConfig.constraints.filter(function(t){return t!==n}),a=t.constraintMap,o=(a[n],P(a,[n].map(Z)));return J(R(R({},t),{},{constraintMap:o,metricConfig:R(R({},t.metricConfig),{},{constraints:r})}))},W=function(t,n){if(!A.Z){var e=(0,i.KJ)(t.metricConfig.metricId);(0,c.H)("missing_window_performance",{action:e})}B('updating pwt segment to "'.concat(n,'"'));var r=R(R({},t.metricConfig.metricId),{},{segment:n});return R(R({},t),{},{metricConfig:R(R({},t.metricConfig),{},{metricId:r})})},Y=function(t,n){var e=n.metricConfig,r=n.startTime,a=n.isSampled,o=n.disablePWTLogging;if(o||"TIMING"!==t.status||r===t.startTime||U(),!e)return{status:"DISABLED",metricConfig:null};var s=(0,i.KJ)(e.metricId);if("TIMING"===t.status&&t.startTime===r&&t.constraintMap[G])return(0,c.H)("duplicated_init_route_action",{action:s}),t;if(!o){var u,l,m,f,y,g=(0,O.H)();(0,c.A9)("handler.".concat(s),{tags:{handler:g}});var v=void 0!==e.metricId.isAuthenticated&&{tags:{isAuth:e.metricId.isAuthenticated}}||void 0;"Other"===e.pwtStaticContext.browserName&&!1===e.metricId.isAuthenticated&&"initial_app_load"===e.metricId.navigationType?((0,c.A9)("TIMING.".concat(s),{tags:{userAgent:null==(l=window)||null==(m=l.navigator)?void 0:m.userAgent}}),(0,c.A9)("TIMING.sampled.".concat(s),{tags:{userAgent:null==(f=window)||null==(y=f.navigator)?void 0:y.userAgent},sampleRate:.03})):((0,c.A9)("TIMING.".concat(s)),(0,c.A9)("TIMING.sampled.".concat(s),{sampleRate:.03})),(0,d.C)({resultLog:"TIMING.".concat(s),annotateExperiments:e.annotateExperiments||[],getExperimentGroup:e.pwtStaticContext.getExperimentGroup,options:v})}return K({traceId:(0,p.vc)()||(0,p.ZP)("initial_app_load"===e.metricId.navigationType,null==(u=e.pwtStaticContext.serverData)?void 0:u.trace_id),status:"TIMING",metricConfig:e,startTime:r,constraintMap:{},annotations:{},binaryAnnotations:{},imageTimings:[],isSampled:a,spans:[]},{constraint:G,disablePWTLogging:o})},q=function(t,n){if(B("dispatch action",n),"INIT_ROUTE"===n.type)return Y(t,n.payload);if("TIMING"!==t.status)return B("ignoring action due to invalid state ".concat(t.status),n),t;switch(n.type){case"ABORT":U();var e={type:"ABORT",reason:n.reason};return R(R({},t),{},{status:"DONE",result:e});case"ANNOTATE":var r=n.payload.name;if(!A.Z)return t;var a=A.Z.now();return B("adding annotation {".concat(r,": ").concat(a,"}")),R(R({},t),{},{annotations:R(R({},t.annotations),x({},r,a))});case"BINARY_ANNOTATE":var o=n.payload,s=o.name,u=o.value,l=o.annotationType;return B("adding binary annotation {".concat(s,": ").concat(u,"}")),R(R({},t),{},{binaryAnnotations:R(R({},t.binaryAnnotations),x({},s,{value:u,type:l}))});case"MARK_CONSTRAINT_COMPLETE":return K(t,n.payload);case"REMOVE_CONSTRAINT":return V(t,n.payload);case"SET_SEGMENT":return W(t,n.payload);case"SET_VISUALLY_COMPLETE_RESULT":var p=n.payload.imageTimings;if(0===p.length)return U(),R(R({},t),{},{status:"DONE",result:{type:"ABORT",reason:"visuallyComplete_noImages"}});var d=Math.max.apply(Math,L(p.map(function(t){return t.responseEnd||0})));return K(R(R({},t),{},{imageTimings:p}),{constraint:H,time:d});case"ADD_SUBSPAN":var m=t.startTime,f=n.payload,y=f.name,g=f.startTime,v=f.endTime,b=f.annotations,T=f.binaryAnnotations,S=f.parentId;return R(R({},t),{},{spans:[].concat(L(t.spans),[{name:y,id:(0,h.Z)(),startTime:g||m,endTime:v,annotationMap:R({},b),binaryAnnotationMap:R({},T),parentId:S}])});case"START_SUBSPAN":return R(R({},t),{},{spans:[].concat(L(t.spans),[{name:n.payload.name,id:(0,h.Z)(),startTime:A.Z?A.Z.now():0,endTime:1/0,annotationMap:R({},n.payload.annotations),binaryAnnotationMap:R({},n.payload.binaryAnnotations),parentId:n.payload.parentId}])});case"STOP_SUBSPAN":var w=t.spans.findIndex(function(t){return t.name===n.payload.name});return w>-1?(t.spans[w].endTime=A.Z?A.Z.now():0,n.payload.annotations&&(t.spans[w].annotationMap=R(R({},t.spans[w].annotationMap),n.payload.annotations)),n.payload.binaryAnnotations&&(t.spans[w].binaryAnnotationMap=R(R({},t.spans[w].binaryAnnotationMap),n.payload.binaryAnnotations))):(0,c.H)("invalid_subspan_stop_name",{name:n.payload.name}),t;default:var _=(0,i.KJ)(t.metricConfig.metricId);return(0,c.H)("invalid_pwt_surface_action",{action:_}),t}},$=function(t){if(!t)return"initial_app_load";switch(t.action){case"PUSH":return"client_route_push";case"REPLACE":return"client_route_replace";default:return null}},X=new Set,F=function(t){var n=t.surface,e=t.constraints,i=t.segment,o=t.measureGridVisuallyComplete,c=t.annotateExperiments,s=t.customEnabledNavigationTypes,u=t.navigationInfo,l=u.clientNavigation,p=u.navigationType,d=t.sampleRate,m=(0,r.useRef)("NOT_SET"),y=(0,f.Z)(),g=I(q,{status:"DISABLED",metricConfig:null}),v=g.getState,b=g.dispatch,T=(0,_.B)();if(m.current!==l&&(m.current=l,y)){var S=y.isAuthenticated,w=n&&p&&(s||z).includes(p)?{metricId:{type:"surface",surface:n,navigationType:p,isAuthenticated:S,segment:i},annotateExperiments:c,constraints:[G].concat(L(e||[]),L(o?[H]:[])),pwtStaticContext:y}:null;(0,E.nP)("webapp.pwt_surface.init_route",{tags:{surface:n,navigationType:p,isAuthenticated:S}});var h=!X.has(l);b({type:"INIT_ROUTE",payload:{metricConfig:w,startTime:l?l.time:0,isSampled:!d||Math.random()<d,disablePWTLogging:!h}}),h&&X.add(l)}var C=v();if((0,r.useEffect)(function(){return function(){X.delete(l)}},[l]),(0,r.useEffect)(function(){var t=function(t){b({type:"ABORT",reason:t})};a.Z.onSessionPause(t);var n=window.innerHeight,e=window.innerWidth,r=function t(){var r,a,i,o=Math.abs(window.innerHeight-n),c=Math.abs(window.innerWidth-e),s=window.innerHeight!==n,u=window.innerWidth!==e,l={handler:(0,O.H)(),deviceType:null!=(r=null==y?void 0:y.deviceType)?r:"unknown",isAuthenticated:null!=(a=null==y?void 0:y.isAuthenticated)?a:"unknown",platform:null!=(i=T.userAgent.platform)?i:"unknown"};if((0,E.nP)("webapp.PwtLogger.handleResize",{sampleRate:1,tags:R(R({},l),{},{heightChanged:s,widthChanged:u})}),s&&(0,E.S0)("webapp.PwtLogger.resizeHeightDelta",o,{sampleRate:1,tags:l}),u&&(0,E.S0)("webapp.PwtLogger.resizeWidthDelta",c,{sampleRate:1,tags:l}),window.removeEventListener("resize",t),(null==y?void 0:y.deviceType)==="phone"&&(!u&&s&&o<=150||!s&&!u)||(null==y?void 0:y.deviceType)==="desktop"&&!s&&!u)return void(0,E.nP)("webapp.PwtLogger.skipResizeAbort",{sampleRate:1,tags:R(R({},l),{},{heightChanged:s,widthChanged:u})});b({type:"ABORT",reason:"windowResized"})};return window.addEventListener("resize",r),function(){var n=v();B("handling unmount",n),"TIMING"===n.status&&U(),a.Z.removePauseListener(t),window.removeEventListener("resize",r)}},[]),"TIMING"!==C.status||!C.constraintMap[G])return{state:C,context:null};var N=C.startTime,M=C.metricConfig;return{state:C,context:{abort:function(t){return b({type:"ABORT",reason:t})},addAnnotation:function(t){return b({type:"ANNOTATE",payload:{name:t}})},addBinaryAnnotation:function(t,n,e){return b({type:"BINARY_ANNOTATE",payload:{name:t,value:n,annotationType:e}})},addSubspan:function(t,n,e){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return b({type:"ADD_SUBSPAN",payload:{name:t,startTime:n,endTime:e,annotations:r,binaryAnnotations:a,parentId:i}})},getId:function(){return N},getMetricId:function(){return M.metricId},markConstraintComplete:function(t){return b({type:"MARK_CONSTRAINT_COMPLETE",payload:{constraint:t,time:A.Z?A.Z.now():0}})},removeConstraint:function(t){return b({type:"REMOVE_CONSTRAINT",payload:t})},setSegment:function(t){return b({type:"SET_SEGMENT",payload:t})},setVisuallyCompleteResult:M.constraints.includes(H)?function(t){return b({type:"SET_VISUALLY_COMPLETE_RESULT",payload:t})}:null,startSubspan:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return b({type:"START_SUBSPAN",payload:{name:t,annotations:n,binaryAnnotations:e,parentId:r}})},stopSubspan:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return b({type:"STOP_SUBSPAN",payload:{name:t,annotations:n,binaryAnnotations:e,parentId:r}})}}}},Q=function(){var t=(0,u.E)(),n=!!t;(0,r.useEffect)(function(){if(n){var e=null==t?void 0:t.getMetricId(),r=e?(0,i.KJ)(e):null;(0,c.H)("nested_pwt_surface",{action:r})}},[n])};function tt(t){var n,e=t.children,r=P(t,M),a=(0,m.Z)(),i=$(a),o=r.measureGridVisuallyComplete?["web_masonry_v2_auth","web_masonry_v2_unauth"]:[],c=[].concat(L(null!=(n=r.annotateExperiments)?n:[]),o),s=F(R(R({},r),{},{annotateExperiments:c,navigationInfo:{navigationType:i,clientNavigation:a}})).context;return Q(),(0,C.jsx)(u.S,{value:s,children:e})}},904523:function(t,n,e){e.d(n,{Z:function(){return i}});var r=e(258712),a=e(32747);function i(){return(0,r.useContext)(a.Z)}},657742:function(t,n,e){e.d(n,{Z:function(){return i}});var r=e(258712),a=e(849289);function i(){return(0,r.useContext)(a.Z)}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/14907-0a66d20c7d13d49b.js.map