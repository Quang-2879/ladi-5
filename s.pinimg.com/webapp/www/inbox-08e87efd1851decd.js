(self.legacyJsonp=self.legacyJsonp||[]).push([[38359],{829830:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(231333),o=n(233846),s=n(339908),i=n(19035);function a(){var e=(0,o.ZP)(),t=(0,s.F9)().showToast;return{showErrorToast:function(){t(function(t){var n=t.hideToast;return(0,i.jsx)(r.Z,{onHide:n,text:e._('Something went wrong.', 'fetchReportingReasons.Toast.Unsuccessful', 'Toast after fetching reporting reasons is unsuccessful')})})},showSuccessToast:function(){t(function(t){var n=t.hideToast;return(0,i.jsx)(r.Z,{onHide:n,text:e._('Thanks. For updates, see your reports and violations center.', 'userReporting.handleSubmitReport.toast', 'This string appears on a banner that is displayed for a few seconds after the user submits a report, such as for content that violates Pinterest\u2019s policies. This banner confirms receipt and lets the user know where they can find updates. \u201Creports and violations center\u201D is the name of a feature within settings. It is a common noun. The tone of this is neutral and calm.')})})}}}},707787:function(e,t,n){"use strict";var r=n(19035);t.Z=function(e){var t=e.color,n=void 0===t?"#767676":t;return(0,r.jsxs)("svg",{display:"block",fill:"none",height:14,viewBox:"0 0 14 14",width:14,xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"7",cy:"7",r:"6.5",stroke:n}),(0,r.jsx)("path",{clipRule:"evenodd",d:"m8.76786 4.25c.32528 0 .58928.26361.58928.58929 0 .32567-.264.58928-.58928.58928h-2.50604l3.31572 3.31532c.22982.23022.22982.60343 0 .83365-.11511.1151-.26597.17246-.41683.17246-.15085 0-.30171-.05736-.41682-.17246l-3.31532-3.31572v2.50604c0 .32568-.264.58928-.58928.58928-.32529 0-.58929-.2636-.58929-.58928v-4.51786z",fill:n,fillRule:"evenodd"})]})}},986790:function(e,t,n){"use strict";var r=n(19035);t.Z=function(e){var t=e.color,n=void 0===t?"#767676":t;return(0,r.jsxs)("svg",{display:"block",fill:"none",height:14,viewBox:"0 0 14 14",width:14,xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("circle",{cx:"7",cy:"7",r:"6.5",stroke:n}),(0,r.jsx)("path",{clipRule:"evenodd",d:"m5.23206 4.25c-.32525 0-.58925.2635-.58925.58925s.264.58925.58925.58925h2.506l-3.31575 3.3155c-.22975.23-.22975.60325 0 .8335.11525.11525.266.1725.417.1725.15075 0 .3015-.05725.41675-.1725l3.31525-3.31575v2.506c0 .32575.264.5895.5895.5895.32525 0 .58925-.26375.58925-.5895v-4.51775z",fill:n,fillRule:"evenodd"})]})}},394484:function(e,t,n){"use strict";var r=n(132227),o=n(472924),s=n(448528),i=n(954317),a=n(403065),l=n(244552),c=n(972444),u=n(756007),d=n(267789),h=n(252223),f=n(969809),p=n(334932),_=n(569590),m=n(860209),g=n(36806),v=n(955810),b=n(167173),x=n(995236),y=n(822153),j=n(335457),w=n(442967),P=n(255413),k=n(15996),S=n(178193),A=n(600740),C=n(19035),z={caterpillar:{darkMode:o,lightMode:s},collage:{darkMode:i,lightMode:a},drink:{darkMode:l,lightMode:c},favorite:{darkMode:u,lightMode:d},fish:{darkMode:h,lightMode:f},gumball:{darkMode:p,lightMode:_},messagebottle:{darkMode:m,lightMode:g},palette:{darkMode:v,lightMode:b},pinboard:{darkMode:x,lightMode:y},pinjar:{darkMode:j,lightMode:w},popsicle:{darkMode:P,lightMode:k},sunglasses:{darkMode:S,lightMode:A}};t.Z=function(e){var t=e.name,n=e.containerSize,o=e.illustrationSize,s=void 0===o?195:o,i=e.message,a=e.description,l=e.primaryAction,c=(0,r.tv)().colorSchemeName;return(0,C.jsx)(r.kC,{direction:"column",height:n,width:n,children:(0,C.jsxs)(r.kC,{alignItems:"center",direction:"column",gap:3,children:[(0,C.jsxs)(r.kC,{alignItems:"center",direction:"column",gap:1,width:"100%",children:[(0,C.jsx)(r.xu,{height:s,width:s,children:(0,C.jsx)(r.Ee,{alt:"",naturalHeight:1,naturalWidth:1,role:"presentation",src:"darkMode"===c?z[t].darkMode:z[t].lightMode})}),i||a?(0,C.jsxs)(r.kC,{direction:"column",children:[(0,C.jsx)(r.X6,{accessibilityLevel:"none",align:"center",size:"400",children:i}),(0,C.jsx)(r.xv,{align:"center",size:"200",children:a})]}):null]}),null!=l?l:null]})})}},854118:function(e,t,n){"use strict";var r=n(132227),o=n(967312);t.Z=function(){var e=(0,r.Z6)({webExperimentName:"web_gestalt_visualrefresh",mwebExperimentName:"web_gestalt_visualrefresh"}),t=(0,(0,o.F)().checkExperiment)("web_gestalt_calico").anyEnabled;return e&&t}},378626:function(e,t,n){"use strict";n.d(t,{O7:function(){return s},dF:function(){return u},dX:function(){return l},pm:function(){return a},tx:function(){return i}});var r=n(174646),o=n(538645),s=function(){return{isAuth:!!(0,r.B)().isAuthenticated,isDesktop:(0,o.HG)()}},i={" $fragmentSpreads":void 0," $fragmentType":void 0};function a(e){var t=e.isAuthParam,n=e.isDesktop,r=e.authDesktopQuery,o=e.authMobileQuery,s=e.unauthDesktopQuery,i=e.unauthMobileQuery;return t?n?r:o:n?s:i}function l(e){var t=e.isAuthParam,n=e.isDesktop,r=e.authDesktopFragment,o=e.authMobileFragment,s=e.unauthDesktopFragment,i=e.unauthMobileFragment;return t?n?r:o:n?s:i}var c=/(?:^|_)([a-z])/g;function u(e){return e.replace(c,function(e,t){return t.toUpperCase()})}},967312:function(e,t,n){"use strict";n.d(t,{F:function(){return s},a:function(){return o}});var r=(0,n(218291).Z)("ExperimentContext"),o=r.Provider,s=r.useHook},333524:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(381366);function o(){var e;return Array.from(Object.keys(e=(0,r.Z)().conversations.data).map(function(t){return e[t]}).filter(function(e){return e.users&&e.last_message})).sort(function(e,t){return new Date((t.last_message||t).created_at).getTime()-new Date((e.last_message||e).created_at).getTime()})}},515207:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(132227),o=n(19035);function s(e){var t=e.text;return(0,o.jsx)(r.xu,{display:"visuallyHidden",children:(0,o.jsx)(r.X6,{accessibilityLevel:1,children:t})})}},67495:function(e,t,n){"use strict";var r=n(258712),o=n(284987),s=n(132227),i=n(19035);t.Z=(0,r.memo)(function(e){var t=e.tabs,n=e.activeIndex,r=(0,o.k6)();return(0,i.jsx)(s.xu,{alignItems:"center",display:"flex",justifyContent:"center",paddingY:2,width:"100%",children:(0,i.jsx)(s.mQ,{activeTabIndex:n,onChange:function(e){var n=e.event,o=e.activeTabIndex,s=e.dangerouslyDisableOnNavigation;n.preventDefault(),s(),r.push((t[o]||t[0]).href)},tabs:t})})})},70620:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(132227),o=n(19963),s=n(852015),i=n(233846),a=n(829830),l=n(113474),c=n(297340),u=n(19035);function d(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,o)}function h(e){var t,n,h=e.conversationId,f=e.handleBlock,p=e.handleCancel,_=e.handleReport,m=e.handleSubmit,g=e.userToBlock,v=(0,o.v)().logContextEvent,b=(0,a.Z)().showErrorToast,x=(0,i.ZP)(),y=(0,l.Z)({name:"ConversationReportResource",options:{conversation_id:h}}),j=(t=regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.reasonKey,r=t.selectedReason,o=t.shouldBlockUser,v({event_type:183,view_type:42,view_parameter:202,object_id_str:h,element:null==r?void 0:r.element_type});try{o&&f(),r&&_(n),null==m||m()}catch(e){b()}case 3:case"end":return e.stop()}},e)}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var s=t.apply(e,n);function i(e){d(s,r,o,i,a,"next",e)}function a(e){d(s,r,o,i,a,"throw",e)}i(void 0)})},function(e){return n.apply(this,arguments)});return(0,u.jsx)(s.ZP,{accessibilityModalLabel:x._('Report message modal', 'ConversationPage.ReportConversationModal', 'Modal for users to report a conversation and block user'),mobileAllowScroll:!0,mobileHideCloseIcon:!0,onDismiss:p,children:(0,u.jsx)(r.xu,{marginBottom:5,marginTop:2,maxHeight:"70vh",children:(0,u.jsx)(c.Z,{dismissConversationReportModal:p,handleSubmitReport:j,objectToReport:{type:"conversation",id:h,userToBlock:g,viewType:42,viewParameter:202},reportingReasons:y.data})})})}},417946:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(132227),o=n(19035);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function i(e){var t,n=e.collaborators,i=e.isMobileConversationAvatar,a=e.isConvoRepOnSharesheet,l=e.isConvoRepOnInbox,c=function(e){if(Array.isArray(e))return e}(t=i||a||l?["calc(100% * 2 / 3)","calc(100% / 3)"]:["75%","25%"])||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,s,i,a=[],l=!0,c=!1;try{s=(n=n.call(e)).next,!1;for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),u=c[0],d=c[1];return(0,o.jsxs)(r.xu,{position:"relative",width:i?"100%":64,children:[(0,o.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:"100%"}}}),(n||[]).slice(0,2).map(function(e,t){var n=e.defaultDisplayName,s=e.src;return(0,o.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:a||l?{right:0===t?0:d,top:0===t?0:d}:{left:0===t?0:d,top:0===t?0:d}},height:u,position:"absolute",width:u,children:(0,o.jsx)(r.qE,{name:n,outline:!0,src:s})},"".concat(n,"-").concat(t))})]})}},761265:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(132227),o=n(640935),s=n(707787),i=n(986790),a=n(233846),l=n(51340),c=n(19035);function u(e){var t,n,u,d,h,f,p=e.conversation,_=e.viewerId,m=p.last_message,g=(p.unread||0)>0,v=(null==m?void 0:m.text)||"",b=(null==(d=p.users)?void 0:d.filter(function(e){return e.id!==_}))||[],x=p.emails||[],y=b.length+x.length>=2,j=null==m?void 0:m.pin,w=null==m?void 0:m.board,P=null==m?void 0:m.user,k=g?"default":"subtle",S=(0,a.ZP)(),A=(j||w||P)&&!v,C=m&&(null==(h=m.sender)?void 0:h.id)===_,z=m&&(null==(f=m.sender)?void 0:f.first_name)||"",I=(0,o.Yc)()?g?"#ffffff":"#a5a5a5":g?"#111111":"#767676",O=C?(0,c.jsx)(s.Z,{color:I}):(0,c.jsx)(i.Z,{color:I}),M=y?C?"".concat(S._('You: ', 'mWeb.ConversationsPage.lastMessageText', 'text that suggest the viewing user sent a text in the chat')," ").concat(v):"".concat(z,": ").concat(v):v;return(0,c.jsxs)(r.kC,{alignItems:"center",width:"100%",children:[A&&(0,c.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{color:k}},marginEnd:1,children:O}),(0,c.jsxs)(r.xv,{color:k,lineClamp:1,children:[A&&(j?C?S._('You sent a Pin', 'mWeb.ConversationsPage.userSentAPin', 'text that suggest the viewing user sent a pin in the conversation'):y?(0,l.nk)(S._('{{ lastMessageSenderFirstName }} sent a Pin', 'mWeb.ConversationsPage.recipientSentAPinInGroup', 'text that suggest a recipient in the group chat sent a pin, lastMessageSenderFirstName: the name of the user that sent the last message in the chat '),{lastMessageSenderFirstName:null==m||null==(t=m.sender)?void 0:t.first_name}):S._('Sent a Pin', 'mWeb.ConversationsPage.recipientSentAPinInOneOnOne', 'text that suggest the recipient sent a pin in the 1:1 conversation'):w?C?S._('You sent a board', 'mWeb.ConversationsPage.userSentABoard', 'text that suggest the viewing user sent a board in the conversation'):y?(0,l.nk)(S._('{{ lastMessageSenderFirstName }} sent a board', 'mWeb.ConversationsPage.recipientSentABoardInGroup', 'text that suggest a recipient in the group chat sent a board, lastMessageSenderFirstName: the name of the user that sent the last message in the chat '),{lastMessageSenderFirstName:null==m||null==(n=m.sender)?void 0:n.first_name}):S._('Sent a board', 'mWeb.ConversationsPage.recipientSentABoardInOneOnOne', 'text that suggest the recipient sent a board in the 1:1 conversation'):P?C?S._('You sent a profile', 'mWeb.ConversationsPage.userSentAProfile', 'text that suggest the viewing user sent a profile in the conversation'):y?(0,l.nk)(S._('{{ lastMessageSenderFirstName }} sent a profile', 'mWeb.ConversationsPage.recipientSentAProfileInGroup', 'text that suggest a recipient in the group chat sent a profile, lastMessageSenderFirstName: the name of the user that sent the last message in the chat '),{lastMessageSenderFirstName:null==m||null==(u=m.sender)?void 0:u.first_name}):S._('Sent a profile', 'mWeb.ConversationsPage.recipientSentAProfileInOneOnOne', 'text that suggest the recipient sent a profile in the 1:1 conversation'):null),v&&M]})]})}},932645:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(132227),o=n(971518),s=n(19035),i="100%";function a(e){var t=e.collaborators;if(t.length<3)return null;var n=t[0],a=t[1],l=t[2];return(0,s.jsxs)(r.xu,{height:i,position:"relative",width:i,children:[a&&(0,s.jsx)(r.xu,{bottom:!0,height:"55%",left:!0,position:"absolute",width:"55%",children:(0,s.jsx)(o.qE,{name:a.defaultDisplayName,outline:!0,src:a.src})}),n&&(0,s.jsx)(r.xu,{display:"flex",justifyContent:"center",position:"absolute",top:!0,width:"100%",children:(0,s.jsx)(r.xu,{height:"55%",width:"55%",children:(0,s.jsx)(o.qE,{name:n.defaultDisplayName,outline:!0,src:n.src})})}),l&&(0,s.jsx)(r.xu,{bottom:!0,height:"55%",position:"absolute",right:!0,width:"55%",children:(0,s.jsx)(o.qE,{name:l.defaultDisplayName,outline:!0,src:l.src})})]})}},284074:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(971518),o=n(417946),s=n(932645),i=n(19035);function a(e){var t=e.recipients,n=void 0===t?[]:t;switch(n.length){case 0:return null;case 1:return(0,i.jsx)(r.qE,{name:n[0].defaultDisplayName,size:"fit",src:n[0].src});case 2:return(0,i.jsx)(o.Z,{collaborators:n,isMobileConversationAvatar:!0});default:return(0,i.jsx)(s.Z,{collaborators:n})}}},913589:function(e,t,n){"use strict";n.d(t,{Z:function(){return eS}});var r=n(258712),o=n(545007),s=n(284987),i=n(132227),a=n(578373),l=n(219308),c=n(18644),u=n(971518),d=n(231333),h=n(378626),f=n(233846),p=n(51340),_=n(174646),m=n(113474),g=n(774609),v=n(339908),b=n(538645),x=n(882368),y=n(852015),j=n(19035);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach(function(t){Z(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function S(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}function C(e,t,n){return t&&A(e.prototype,t),n&&A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function z(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}function I(e,t){return(I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=R();return function(){var n,r=T(e);return n=t?Reflect.construct(r,arguments,T(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return M(e)}(this,n)}}function M(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(R=function(){return!!e})()}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t,n){return(t=B(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}var q=function(e){z(n,e);var t=O(n);function n(){var e;S(this,n);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return Z(M(e=t.call.apply(t,[this].concat(o))),"state",{modalIsOpen:!0}),Z(M(e),"onSubmit",function(){var t=e.props,n=t.handleBlock,r=t.contactRequest.entityId;n&&n(r),e.closeModal()}),Z(M(e),"onCancel",function(){var t=e.props.handleCancel;t&&t(),e.closeModal()}),Z(M(e),"closeModal",function(){e.setState({modalIsOpen:!1})}),e}return C(n,[{key:"render",value:function(){var e=this.state.modalIsOpen,t=this.props.contactRequest,n=t.username,r=t.fullName;return(0,j.jsxs)(y.ZP,{accessibilityModalLabel:"",isOpen:e,mobileHideCloseIcon:!0,onDismiss:this.closeModal,type:"block_modal",children:[(0,j.jsx)(i.xu,{paddingX:3,paddingY:5,children:(0,j.jsx)(i.X6,{accessibilityLevel:1,align:"center",size:"600",children:(0,p.nk)(this.props.i18n._('Block {{ full_name }}?', 'BlockPreviewModal.modal.header', 'Modal Header confirmation before user fully blocks another user (full_name) from a contact request'),{full_name:r})})}),(0,j.jsx)(i.xu,{marginBottom:6,paddingX:6,children:(0,j.jsx)(i.xv,{align:"center",children:(0,p.nk)(this.props.i18n._('If you block {{full_name}} ({{username}}), you can still view each other\u2019s profiles, but you can\u2019t message, follow or save each other\u2019s Pins.', 'BlockPreviewModal.modal.body', 'Modal body confirmation before user fully blocks another user (username and full_name) from a contact request'),{full_name:r,username:n})})}),(0,j.jsx)(i.xu,{alignItems:"start",display:"flex",justifyContent:"center",marginBottom:2,children:(0,j.jsx)(i.xu,{children:(0,j.jsxs)(i.kC,{gap:{row:2,column:0},justifyContent:"start",children:[(0,j.jsx)(i.zx,{color:"gray",fullWidth:!0,onClick:this.onCancel,size:"lg",text:this.props.i18n._('Cancel', 'BlockPreviewModal.modal.cancel', 'cancel button for blocking a user')}),(0,j.jsx)(i.zx,{color:"red",fullWidth:!0,onClick:this.onSubmit,size:"lg",text:this.props.i18n._('Block', 'BlockPreviewModal.modal.block', 'block button for blocking a user')})]})})})]})}}]),n}(r.PureComponent);function E(e){var t=(0,f.ZP)();return(0,j.jsx)(q,k(k({},e),{},{i18n:t}))}var U=function(e){z(n,e);var t=O(n);function n(){var e;S(this,n);for(var r=arguments.length,o=Array(r),s=0;s<r;s++)o[s]=arguments[s];return Z(M(e=t.call.apply(t,[this].concat(o))),"state",{modalIsOpen:!0}),Z(M(e),"onSubmit",function(){var t=e.props,n=t.handleUnblock,r=t.contactRequest.entityId;n&&n(r),e.closeModal()}),Z(M(e),"onCancel",function(){var t=e.props.handleCancel;t&&t(),e.closeModal()}),Z(M(e),"closeModal",function(){e.setState({modalIsOpen:!1})}),e}return C(n,[{key:"render",value:function(){var e=this.state.modalIsOpen,t=this.props.contactRequest.fullName;return(0,j.jsxs)(y.ZP,{accessibilityModalLabel:"",isOpen:e,mobileHideCloseIcon:!0,onDismiss:this.closeModal,type:"unblock_modal",children:[(0,j.jsx)(i.xu,{paddingX:3,paddingY:5,children:(0,j.jsx)(i.X6,{accessibilityLevel:1,align:"center",size:"600",children:(0,p.nk)(this.props.i18n._('Unblock {{ full_name }}?', 'UnblockPreviewModal.modal.header', 'Modal Header confirmation before user unblocks another user (full_name) from a contact request'),{full_name:t})})}),(0,j.jsx)(i.xu,{marginBottom:6,paddingX:6,children:(0,j.jsx)(i.xv,{align:"center",children:this.props.i18n._('You\u2019ll be able to follow, save, and comment on each other\u2019s Pins again', 'UnblockPreviewModal.modal.body', 'Modal body confirmation before user unblocks another user from a contact request')})}),(0,j.jsx)(i.xu,{alignItems:"start",display:"flex",justifyContent:"center",marginBottom:2,children:(0,j.jsx)(i.xu,{children:(0,j.jsxs)(i.kC,{gap:{row:2,column:0},justifyContent:"start",children:[(0,j.jsx)(i.zx,{color:"gray",fullWidth:!0,onClick:this.onCancel,size:"lg",text:this.props.i18n._('Cancel', 'UnblockPreviewModal.modal.cancel', 'cancel button for blocking a user')}),(0,j.jsx)(i.zx,{color:"red",fullWidth:!0,onClick:this.onSubmit,size:"lg",text:this.props.i18n._('Unblock', 'UnblockPreviewModal.modal.block', 'block button for blocking a user')})]})})})]})}}]),n}(r.PureComponent);function D(e){var t=(0,f.ZP)();return(0,j.jsx)(U,k(k({},e),{},{i18n:t}))}var N=n(748929),L=n(640935),F=n(810139),W=n(573033),H=n(554334);function X(e){return function(e){if(Array.isArray(e))return G(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){if(e){if("string"==typeof e)return G(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?G(e,t):void 0}}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=function(e){var t;return new Date(null!=(t=e.created_at)?t:0)};return X(e).sort(function(e,n){return t(e)>t(n)?-1:+(t(n)>t(e))})};function J(){var e=(0,f.ZP)();(0,F.Z)({name:"BoardInvitesResource",options:{current_user:!0,field_set_key:"news"}}),(0,F.Z)({name:"ContactRequestsResource",options:{current_user:!0}});var t,n=(0,H.Z)(),r=Object.values((0,o.v9)(function(e){return e.contactRequests})||{}),s=[].concat(X(n||[]),X(r||[])),a=(s=$(s)).length,l=[],c=[],u=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Y(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw s}}}}(s);try{for(u.s();!(t=u.n()).done;){var d=t.value;"contactrequest"===d.type&&d.conversation&&!d.board?l.push(d):c.push(d)}}catch(e){u.e(e)}finally{u.f()}var h=(0,j.jsxs)(i.xv,{color:"subtle",size:"200",children:[c.length>0&&(0,p.nk)(e._('{{ boardInvitesLength }} boards', 'inbox.InviteSubSection.BareInviteSubSection.boardInvitesCount', 'counter to show how many board invites a user has, boardInvitesLength: the number of board invites a user has '),{boardInvitesLength:c.length}),c.length>0&&l.length>0&&" \xb7 ",l.length>0&&(0,p.nk)(e._('{{ messageRequestsLength }} messages', 'inbox.InviteSubSection.BareInviteSubSection.messageRequestCount', 'counter to show how many message requests a user has, messageRequestsLength: the number of message requests a user has'),{messageRequestsLength:l.length})]});return a>0?(0,j.jsxs)(i.xu,{marginBottom:6,marginTop:6,maxWidth:488,children:[(0,j.jsx)(i.xu,{marginStart:4,children:(0,j.jsx)(i.xv,{inline:!0,size:"300",children:e._('Requests ', 'mWeb.Inbox.InviteSubSection.invitesSubheader', 'Sub-header for requests on messaging inbox view')})}),(0,j.jsx)(W.Z,{isInboxRequestsSectionView:!0,numberOfRequestToShow:1}),a>1&&(0,j.jsx)(i.xu,{marginEnd:4,marginStart:4,children:(0,j.jsx)(i.Tg,{href:"/inbox/requests",children:(0,j.jsxs)(i.kC,{children:[(0,j.jsx)(i.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:(0,L.Yc)()?"#4A4A4A":"#E9E9E9"}},display:"flex",height:48,justifyContent:"center",marginEnd:4,rounding:"circle",width:48,children:(0,j.jsx)(i.JO,{accessibilityLabel:e._('View all requests', 'inbox.InviteSubSection.BareInviteSubSection.allRequests', 'accessibility label for icon that links to see all requests for user'),color:"default",icon:"envelope",size:22})}),(0,j.jsxs)(i.kC,{direction:"column",flex:"grow",justifyContent:"center",children:[(0,j.jsx)(i.xu,{marginBottom:1,children:(0,j.jsx)(i.xv,{size:"300",children:e._('View all requests', 'inbox.InviteSubSection.BareInviteSubSection.allRequests', 'link to see all requests for user')})}),(0,j.jsx)(i.xu,{children:h})]}),(0,j.jsx)(i.xu,{alignItems:"center",display:"flex",flex:"none",height:48,justifyContent:"center",marginStart:2,children:(0,j.jsx)(i.JO,{accessibilityLabel:e._('arrow', 'mWeb.Messaging.Inbox.ArrowIcon', 'Accessiblity Label for arrow that directs user to see all of their requests.'),color:"default",icon:"arrow-forward",size:12})})]})})})]}):null}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var V=(0,r.lazy)(function(){return Promise.all([n.e(97270),n.e(58496),n.e(7981),n.e(54974),n.e(72315)]).then(n.bind(n,862970))});function K(e){var t,n=e.inviteSource,o=e.viewParameter,s=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,s,i,a=[],l=!0,c=!1;try{s=(n=n.call(e)).next,!1;for(;!(l=(r=s.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw o}}return a}}(t,2)||function(e,t){if(e){if("string"==typeof e)return Q(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=s[0],l=s[1],c=(0,f.ZP)(),u=c._('Invite your friends', 'inbox.InviteToFollowInboxEntryPoint.text', 'Title text to show users they can invite their friends to start chatting'),d=c._('Connect to start chatting', 'inbox.InviteToFollowInboxEntryPoint.subtext', 'Subtext to show users they can invite their friends to start chatting ');return(0,j.jsxs)(i.xu,{children:[a&&(0,j.jsx)(r.Suspense,{children:(0,j.jsx)(V,{inviteSource:n,onDismiss:function(){return l(!1)},viewParameter:o})}),(0,j.jsx)(i.iP,{onFocus:function(){return l(!0)},children:(0,j.jsxs)(i.xu,{direction:"row",display:"flex",paddingX:4,children:[(0,j.jsx)(i.hU,{accessibilityLabel:"person-add",bgColor:"lightGray",icon:"person-add"}),(0,j.jsxs)(i.xu,{padding:4,children:[(0,j.jsx)(i.xu,{marginBottom:1,children:(0,j.jsx)(i.xv,{weight:"bold",children:u})}),(0,j.jsx)(i.xv,{color:"subtle",children:d})]})]})})]})}var ee=n(192500),et=n(381366),en=n(333524),er=n(515207),eo=n(67495),es=n(761265),ei=n(914092),ea=n(142691),el=n(226003),ec=n(70620),eu=n(284074),ed=n(394484),eh=n(854118);function ef(){var e=(0,f.ZP)();return(0,eh.Z)()&&(0,j.jsx)(i.xu,{display:"flex",justifyContent:"center",marginTop:12,width:"100%",children:(0,j.jsx)(ed.Z,{containerSize:320,description:e._('Updates show activity on your Pins and boards and give you tips on topics to explore. They\u2019ll be here soon.', 'inbox.messages.messagebottle.illustrations.description', 'Message displayed under the illustration when there are no messages'),illustrationSize:186,name:"messagebottle"})})}function ep(e){return(ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function em(e,t,n,r,o,s,i){try{var a=e[s](i),l=a.value}catch(e){return void n(e)}a.done?t(l):Promise.resolve(l).then(r,o)}function eg(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var s=e.apply(t,n);function i(e){em(s,r,o,i,a,"next",e)}function a(e){em(s,r,o,i,a,"throw",e)}i(void 0)})}}function ev(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eb(e,t){return(eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ex(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ey(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ey=function(){return!!e})()}function ej(e){return(ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ew(e,t,n){return(t=eP(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eP(e){var t=function(e,t){if("object"!=ep(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ep(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ep(t)?t:t+""}var ek=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");s.prototype=Object.create(e&&e.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),e&&eb(s,e);var t,n,o=(t=ey(),function(){var e,n=ej(s);return e=t?Reflect.construct(n,arguments,ej(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==ep(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return ex(e)}(this,e)});function s(){var e;if(!(this instanceof s))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return ew(ex(e=o.call.apply(o,[this].concat(n))),"state",{newsBadgeCount:0,unreadMessageCount:0}),ew(ex(e),"getBadging",function(){a.Z.create("NewsHubBadgeResource",{}).callGet().then(function(t){var n=t.resource_response.data;e.setState({newsBadgeCount:n.news_hub_count,unreadMessageCount:n.conversations_unseen_count})})}),ew(ex(e),"onBlock",function(t,n){var r=e.props,o=r.showBlockUnblockModalContactRequest,s=r.updateContactRequestStatus,i=r.blockUser,a=r.blockUserWithToast,l=r.contactRequests;o&&o(null,null);var c=l[t]?l[t].sender:{};if(i&&c){var u=c.first_name||c.username?c.first_name||c.username||"":e.props.i18n._('User', 'mweb.inbox.tab.messages.block.user', 'Placeholder if there is no first name for blocking a user'),d=c.id?c.id:null;d&&(n?a({id:d,firstName:null!=u?u:"",conversationId:t}):i({id:null!=d?d:"",conversationId:t})),s(t,!0,!0)}}),ew(ex(e),"onUnblock",function(t){var n,r=e.props,o=r.showBlockUnblockModalContactRequest,s=r.updateContactRequestStatus,i=r.unblockUser,a=r.contactRequests,l=r.showToast;o&&o(null,null);var c=null==(n=a[t])?void 0:n.sender;if(i&&c){var u=c.id?c.id:null;u&&i(u),s(t,!0,!1);var f=c.first_name||c.username,_=(0,p.nk)(e.props.i18n._('You have unblocked {{ name }}', 'conversationsPage.mapDispatch.unblockUserToast', 'Toast confirming that you\'ve unblocked a user'),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ev(Object(n),!0).forEach(function(t){ew(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ev(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({name:f},h.tx)).join("");l(function(e){var t=e.hideToast;return(0,j.jsx)(d.Z,{onHide:t,text:_})})}}),ew(ex(e),"onBlockUnblockModalCancel",function(){var t=e.props.showBlockUnblockModalContactRequest;t&&t(null,null)}),ew(ex(e),"onReport",function(t){var n,r,o,s=e.props,i=s.contactRequests,l=s.inbox,c=s.showToast,u=null==(n=l.blockModalContactRequest)?void 0:n.contactRequestId,h=u&&i[u]?null==(r=i[u])||null==(o=r.conversation)?void 0:o.id:void 0;a.Z.create("ConversationReportResource",{conversation_id:h,reason:t}).callCreate().then(function(){var t=e.props.i18n._('Thanks! Your feedback helps keep Pinterest safe.', 'ContactRequest.UserReportedToast', 'Confirmation toast after user is report');c(function(e){var n=e.hideToast;return(0,j.jsx)(d.Z,{onHide:n,text:t})})},function(){});var f=e.props.i18n._('Thanks! Your feedback helps keep Pinterest safe.', 'conversationPage.UserReportedToast', 'Confirmation toast after user is report');c(function(e){var t=e.hideToast;return(0,j.jsx)(d.Z,{onHide:t,text:f})})}),e}return n=[{key:"componentDidMount",value:function(){this.props.logContextEvent({event_type:7161,view_type:42,view_parameter:203}),this.getBadging()}},{key:"renderContactSuggestions",value:function(){var e=this.props,t=e.contactSuggestions,n=e.addConversation,r=e.viewerId,o=e.i18n,s=e.history,a=o._('Say hello \uD83D\uDE00', 'ConversationsPage.ContactSuggestions.defaultCopy', 'text under contact name that sugegest user to start a conversation');return t.length>0?(0,j.jsxs)(i.xu,{marginStart:4,marginTop:8,children:[(0,j.jsx)(i.xv,{size:"300",children:o._('Contacts', 'ConversationsPage.ContactSuggestions.header', 'header for the contacts section on inbox view')}),(0,j.jsx)(i.xu,{children:t.map(function(e,t){var o,l=(o=eg(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r&&e.id)){t.next=5;break}return t.next=3,n({user_ids:[r,e.id]});case 3:t.next=8;break;case 5:if(!(r&&"email"in e&&e.email)){t.next=8;break}return t.next=8,n({user_ids:[r],emails:[e.email]});case 8:case"end":return t.stop()}},t)})),function(){return o.apply(this,arguments)}),c="email"in e&&e.email?e.email:"full_name"in e&&e.full_name||"first_name"in e&&e.first_name||"";return c?(0,j.jsxs)(i.xu,{"data-test-id":"contact-conversation",display:"flex",marginTop:4,children:[(0,j.jsx)(i.iP,{fullWidth:!1,onTap:function(){"username"in e&&e.username&&s.push("/".concat(e.username,"/"))},children:(0,j.jsx)(i.xu,{display:"flex",flex:"none",height:48,marginEnd:4,width:48,children:(0,j.jsx)(u.qE,{name:c,src:"image_large_url"in e&&e.image_large_url||""})})}),(0,j.jsx)(i.iP,{onTap:function(){l()},children:(0,j.jsxs)(i.kC,{children:[(0,j.jsxs)(i.kC,{direction:"column",flex:"grow",justifyContent:"center",children:[(0,j.jsx)(i.xu,{marginBottom:1,children:(0,j.jsx)(i.xv,{lineClamp:1,children:c})}),(0,j.jsx)(i.xu,{children:(0,j.jsx)(i.xv,{color:"subtle",lineClamp:1,children:a})})]}),(0,j.jsx)(i.kC,{alignItems:"center",flex:"none",height:48,justifyContent:"center",width:48,children:(0,j.jsx)(i.JO,{accessibilityLabel:"icon",color:"default",icon:"arrow-forward",size:12})})]})},t)]}):null})})]}):null}},{key:"renderConversationItem",value:function(e){var t,n,r,o=this.props,s=o.clearMessageBadge,a=o.locale,l=o.viewerId,c=(null==(t=e.users)?void 0:t.filter(function(e){return e.id!==l}))||[],u=e.emails||[],d=c.length+u.length,h=c.map(function(e){var t,n,r;return{defaultDisplayName:null!=(t=e.first_name)?t:"",fullName:null!=(n=e.full_name||e.first_name)?n:"",src:e.is_default_image?"":null!=(r=e.image_large_url)?r:void 0}}),f=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return e_(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e_(e,t):void 0}}(e))){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){a=!0,s=e},f:function(){try{i||null==n.return||n.return()}finally{if(a)throw s}}}}(u);try{for(f.s();!(r=f.n()).done;){var p=r.value;h.push({defaultDisplayName:p,fullName:p,src:""})}}catch(e){f.e(e)}finally{f.f()}var _=d>=2?h.map(function(e){return e.defaultDisplayName}).join(", "):h[0].fullName,m=(null==(n=e.last_message)?void 0:n.created_ms)||0,g=(0,N.Z)(new Date(m),a),v=(e.unread||0)>0;return(0,j.jsx)(i.Tg,{href:"/conversation/".concat(e.id),onTap:function(){return s(e.id)},tapStyle:"none",children:(0,j.jsxs)(i.xu,{alignItems:"center","data-test-id":"conversation-list-item",direction:"row",display:"flex",marginTop:4,children:[(0,j.jsx)(i.xu,{display:"flex",flex:"none",height:48,marginEnd:4,width:48,children:(0,j.jsx)(eu.Z,{recipients:h})}),(0,j.jsxs)(i.kC,{direction:"column",flex:"grow",children:[(0,j.jsxs)(i.xu,{display:"flex",marginBottom:1,children:[(0,j.jsx)(i.kC,{flex:"grow",children:(0,j.jsx)(i.xv,{lineClamp:1,size:"300",weight:v?"bold":"normal",children:_})}),(0,j.jsx)(i.xu,{alignItems:"center",display:"flex",flex:"none",paddingX:2,children:(0,j.jsx)(i.xv,{align:"end",color:v?"default":"subtle",size:"100",children:g})})]}),(0,j.jsxs)(i.kC,{children:[(0,j.jsx)(i.kC,{alignItems:"center",flex:"grow",children:(0,j.jsx)(es.Z,{conversation:e,viewerId:l})}),(0,j.jsx)(i.xu,{alignItems:"center",display:"flex",flex:"none",justifyContent:"end",minWidth:40,paddingX:2,children:(0,j.jsx)(i.xu,{color:v?"primary":"transparent",height:8,rounding:"circle",width:8})})]})]})]})},e.id)}},{key:"render",value:function(){var e,t,n,o,s,a=this,l=this.props,c=l.contactRequests,u=l.inbox,d=l.shouldShowContactSuggestionsSection,h=l.shouldShowPrivateInviteFlow,f=l.isUserUnder16,p=l.conversations,_=l.loadNext,m=l.isLoadingNext,g=l.hasNext,v=this.state,b=v.newsBadgeCount,x=v.unreadMessageCount,y=null==u||null==(e=u.blockModalContactRequest)?void 0:e.modalAction,w=null==u||null==(t=u.blockModalContactRequest)?void 0:t.contactRequestId,P=x>0?{href:"/inbox/",text:this.props.i18n._('Inbox', 'mweb.inbox.tab.messages.heading', 'Heading for messages tab'),indicator:"dot"}:{href:"/inbox/",text:this.props.i18n._('Inbox', 'mweb.inbox.tab.messages.heading', 'Heading for messages tab')},k=b>0?{href:"/notifications/",text:this.props.i18n._('Updates', 'mweb.inbox.tab.updates.heading', 'Heading for updates tab'),indicator:"dot"}:{href:"/notifications/",text:this.props.i18n._('Updates', 'mweb.inbox.tab.updates.heading', 'Heading for updates tab')},S=h&&f&&!d&&p&&0===p.length,A=w&&(null==(n=c[w])?void 0:n.sender);return(0,j.jsx)(i.xu,{"data-test-id":"conersation-page-container",children:(0,j.jsxs)(r.Fragment,{children:[(0,j.jsx)(er.Z,{text:this.props.i18n._('Inbox', 'inbox.messagesPage.heading', 'Accessibility hidden heading for messages inbox')}),(0,j.jsx)(i.Le,{top:0,children:(0,j.jsx)(i.xu,{color:"default","data-test-id":"inbox-tabs",display:"flex",justifyContent:"center",width:"100%",children:(0,j.jsx)(eo.Z,{activeIndex:1,tabs:[k,P]})})}),(0,j.jsxs)(r.Fragment,{children:[!S&&(0,j.jsx)(i.kC,{alignItems:"stretch",justifyContent:"center",children:(0,j.jsx)(i.xu,{maxWidth:488,paddingX:4,width:"100%",children:(0,j.jsx)(i.Tg,{href:"/inbox/compose/",tapStyle:"none",children:(0,j.jsxs)(i.kC,{alignItems:"center",direction:"row",justifyContent:"start",children:[(0,j.jsx)(i.hU,{accessibilityLabel:this.props.i18n._('Compose new message', 'inbox.messagesPage.newMessage.icon.accessibilityLabel', 'Button to compose conversation'),bgColor:"red",icon:"compose",iconColor:"white",size:"lg"}),(0,j.jsx)(i.xu,{flex:"grow",marginStart:2,children:(0,j.jsx)(i.xv,{size:"300",weight:"bold",children:this.props.i18n._('New message', 'inbox.messagesPage.newMessage.label', 'Button to compose new conversation')})})]})})})}),(0,j.jsx)(i.kC,{alignItems:"center",direction:"column",children:(0,j.jsxs)(i.xu,{maxWidth:488,width:"100%",children:[(0,j.jsx)(i.xu,{children:(0,j.jsx)(J,{})}),(0,j.jsx)(i.xu,{maxWidth:488,paddingX:2,width:"100%",children:p&&p.length>0?(0,j.jsxs)(i.xu,{marginStart:2,children:[p.length>0&&(0,j.jsx)(i.xu,{marginTop:6,children:(0,j.jsx)(i.xv,{size:"300",children:this.props.i18n._('Messages', 'ConversationsPage.messagesSubHeader', 'subheader for messages section')})}),(0,j.jsx)(i.gr,{fetchMore:_,isAtEnd:!g,isFetching:m}),p.map(function(e){return(0,j.jsx)(i.xu,{children:a.renderConversationItem(e)},e.id)})]}):(0,j.jsx)(ef,{})}),(0,j.jsx)(i.xu,{children:d&&this.renderContactSuggestions()}),h&&(0,j.jsx)(K,{inviteSource:"inbox_invite_friends",viewParameter:203})]})})]}),"block"===y&&A&&(0,j.jsx)(E,{contactRequest:{username:A.username,entityId:A.id,fullName:A.full_name},handleBlock:function(){return a.onBlock(w,!0)},handleCancel:this.onBlockUnblockModalCancel}),"unblock"===y&&A&&(0,j.jsx)(D,{contactRequest:{username:A.username,entityId:A.id,fullName:A.full_name},handleCancel:this.onBlockUnblockModalCancel,handleUnblock:function(){return a.onUnblock(w)}}),"report"===y&&A&&(0,j.jsx)(ec.Z,{conversationId:w&&(null==(o=c[w])||null==(s=o.conversation)?void 0:s.id)||"",handleBlock:function(){return a.onBlock(w)},handleCancel:this.onBlockUnblockModalCancel,handleReport:this.onReport,userToBlock:{blockedByMe:A.blocked_by_me,fullName:A.full_name,id:A.id,username:A.username}})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,eP(r.key),r)}}(s.prototype,n),Object.defineProperty(s,"prototype",{writable:!1}),s}(r.PureComponent),eS=function(){var e,t=(0,o.I0)(),n=(0,f.ZP)(),r=(0,v.F9)().showToast,i=(0,l.Z)(),a=(0,b.ZP)(),u=(0,o.v9)(function(e){return e.inbox}),h=(0,_.B)().locale,y=(0,s.k6)(),w=(0,x.Z)(),P=w.isAuth,k=w.isLimitedLogin,S=w.id,A=w.isPrivateProfile,C=w.isUnder16,z=(0,m.Z)({name:"ShareSuggestionsResource",options:{field_set_key:"default"},noCache:!0}).data,I=!!(z&&z.length>0),O=(0,et.Z)().clearMessageBadge,M=(0,ee.Z)(),R=(e=eg(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M(t);case 3:(n=e.sent)&&(o=n.id,y.push("/conversation/".concat(o))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),r(function(t){var n,r=t.hideToast;return(0,j.jsx)(d.Z,{onHide:r,text:null!=(n=(0,c.Z)(e.t0,"message"))?n:""})});case 10:case"end":return e.stop()}},e,null,[[0,7]])})),function(t){return e.apply(this,arguments)}),T=(0,o.v9)(function(e){return e.contactRequests}),Z=(0,m.Z)({name:"ConversationsResource",options:{field_set_key:"default"}}),B=Z.isFetching,q=Z.fetchMore,E=Z.isAtEnd,U=(0,en.Z)();if(!P)return(0,j.jsx)(s.l_,{to:"/"});if(k)return(0,j.jsx)(s.l_,{to:"/login"});if("desktop"===a)return(0,j.jsx)(s.l_,{to:"/"});var D=function(e){var n=e.id,r=e.conversationId;return t((0,el.Ge)({id:n,blockSource:"message_request",blockContext:r,logContextEvent:i}))};return(0,j.jsx)(g.Z,{children:(0,j.jsx)(ek,{addConversation:R,blockUser:D,blockUserWithToast:function(e){var t=e.id,o=e.firstName;return D({id:t,conversationId:e.conversationId}).then(function(){r(function(e){var t=e.hideToast;return(0,j.jsx)(d.Z,{onHide:t,text:(0,p.nk)(n._('You\'ve blocked {{ name }}', 'conversationsPage.mapDispatch.blockUserToast', 'Toast confirming that you\'ve blocked a user'),{name:o}).join(" ")})})})},clearMessageBadge:O,contactRequests:T,contactSuggestions:z||[],conversations:U,hasNext:!E,history:y,i18n:n,inbox:u,isLoadingNext:B,isUserUnder16:!!C,loadNext:q,locale:h,logContextEvent:i,shouldShowContactSuggestionsSection:I,shouldShowPrivateInviteFlow:P&&A,showBlockUnblockModalContactRequest:function(e,n){return t((0,ea.z)(e,n))},showToast:r,unblockUser:function(e){return t((0,el.h2)(e,i))},updateContactRequestStatus:function(e,n,r){return t((0,ei.O)(e,n,r))},viewerId:S||""})})}},292886:function(e,t,n){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/inbox",function(){return n(913589).Z}])},472924:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_caterpillar_spot_dark-a2684283.svg"},448528:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_caterpillar_spot_light-4351e2b0.svg"},954317:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_collage_spot_dark-801b6d1e.svg"},403065:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_collage_spot_light-172b7814.svg"},244552:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_drink_spot_dark-e13d8191.svg"},972444:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_drink_spot_light-eba7901c.svg"},756007:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_favorite_spot_dark-86e6efb1.svg"},267789:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_favorite_spot_light-c494804e.svg"},252223:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_fish_spot_dark-eabdd91c.svg"},969809:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_fish_spot_light-68e932f6.svg"},334932:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_gumball_spot_dark-fe6ad7b3.svg"},569590:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_gumball_spot_light-31a9c021.svg"},860209:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_messagebottle_spot_dark-6e62eced.svg"},36806:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_messagebottle_spot_light-6d12e6a6.svg"},955810:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_palette_spot_dark-7184dea0.svg"},167173:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_palette_spot_light-3ec2a5f3.svg"},995236:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_pinboard_spot_dark-9a1edd2c.svg"},822153:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_pinboard_spot_light-eac9767f.svg"},335457:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_pinjar_spot_dark-920f4221.svg"},442967:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_pinjar_spot_light-a4bdf6a8.svg"},255413:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_popsicle_spot_dark-9739cf41.svg"},15996:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_popsicle_spot_light-03d29257.svg"},178193:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_sunglasses_spot_dark-e0aee9e0.svg"},600740:function(e){"use strict";e.exports="https://s.pinimg.com/webapp/ill_sunglasses_spot_light-42e9d57e.svg"}},function(e){e.O(0,[97270,32227,76175,8789,75114,59514,46611,27684,56171,17816,73033],function(){return e(e.s=292886)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/inbox-08e87efd1851decd.js.map