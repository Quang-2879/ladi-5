(self.legacyJsonp=self.legacyJsonp||[]).push([[83682],{754404:function(e,t,n){"use strict";n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ConversationMessageActionSheet_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};r.hash="8a712e19c7a0c55a01d2e95ff7c2413d",t.default=r},187407:function(e,t,n){"use strict";n.r(t);var r,o={argumentDefinitions:[],kind:"Fragment",metadata:{plural:!0},name:"ConversationPageMessageList_conversationMessages",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdMs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletedBy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"messageType",storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"pin",plural:!1,selections:[r],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"ConversationPageMessage_conversationMessage"}],type:"ConversationMessage",abstractKey:null};o.hash="6ff3235714adeddcc392aed4c207aba4",t.default=o},712401:function(e,t,n){"use strict";n.r(t);var r,o,i,a,l,s,c,u,d=(o=[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],i={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"imageLargeUrl",storageKey:null},c=[{kind:"Literal",name:"spec",value:"222x"}],u=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ConversationPageMessage_conversationMessage",selections:[r,{alias:null,args:null,kind:"ScalarField",name:"createdMs",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"deletedBy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"Conversation",kind:"LinkedField",name:"conversation",plural:!1,selections:o,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"sender",plural:!1,selections:[r,i,{alias:null,args:null,kind:"ScalarField",name:"firstName",storageKey:null},a,l],storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[{alias:null,args:null,concreteType:"CoverPin",kind:"LinkedField",name:"coverPin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"imageUrl",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"sectionCount",storageKey:null},s,{alias:null,args:null,kind:"ScalarField",name:"imageCoverHdUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinThumbnailUrls",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pinCount",storageKey:null},r],storageKey:null},{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"pin",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"ConversationPinV2_pin"}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:c,concreteType:"ImageDetails",kind:"LinkedField",name:"contextualPinImageUrls",plural:!0,selections:u,storageKey:'contextualPinImageUrls(spec:"222x")'},r,l,i,a,{alias:null,args:c,concreteType:"ImageDetails",kind:"LinkedField",name:"recentPinImages",plural:!0,selections:u,storageKey:'recentPinImages(spec:"222x")'}],storageKey:null},{alias:null,args:null,concreteType:"UserDidItData",kind:"LinkedField",name:"userDidItData",plural:!1,selections:[r,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"pin",plural:!1,selections:o,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"details",storageKey:null},{alias:"images150x",args:[{kind:"Literal",name:"spec",value:"150x"}],concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!0,selections:u,storageKey:'images(spec:"150x")'}],storageKey:null},{alias:null,args:null,concreteType:"MessageReactions",kind:"LinkedField",name:"reactions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"reactionText",storageKey:null}],storageKey:null}],type:"ConversationMessage",abstractKey:null});d.hash="f86073e296fab3bc70a5f022fe871222",t.default=d},921925:function(e,t,n){"use strict";n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ConversationPageMessage_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null}],type:"Pin",abstractKey:null};r.hash="f41aaed69fbc9da7a0b0721ce09ec5a8",t.default=r},310365:function(e,t,n){"use strict";n.r(t);var r,o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"ConversationPinV2_pin",selections:[r={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"pinnedToBoard",plural:!1,selections:[r],storageKey:null},{args:null,kind:"FragmentSpread",name:"UnifiedPinRep_pin"},{args:null,kind:"FragmentSpread",name:"useClientTrackingParams_pin"}],type:"Pin",abstractKey:null};o.hash="91665fc715cec45a021a54e3aa1bb010",t.default=o},47655:function(e,t,n){"use strict";n.r(t);var r={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useClientTrackingParams_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null}],type:"Pin",abstractKey:null};r.hash="0b3399497cd8be4c18c48ac63ca8d2ba",t.default=r},970601:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}}),n(506933);var r=n(19035),o=["css","unsafeCSS"];function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){var r,o,i;r=e,o=t,i=n[t],(o=c(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function c(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}var u=function(){var e,t;function n(e){if(!(this instanceof n))throw TypeError("Cannot call a class as a function");this._private_safe_value=e.trim().replace(">",">").replace("<","<").replace("&","&").replace('"','"').replace("'","'")}return e=[{key:"toString",value:function(){return this._private_safe_value}}],t=[{key:"factory",value:function(e){return e instanceof n?e:new n(String(e))}}],e&&s(n.prototype,e),t&&s(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();function d(e){var t=e.css,n=e.unsafeCSS,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&({}).propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,o),l=String(t||"")||n||"";return l?(0,r.jsx)("style",a(a({},i),{},{dangerouslySetInnerHTML:{__html:String(u.factory(l))}})):null}},829830:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(231333),o=n(233846),i=n(339908),a=n(19035);function l(){var e=(0,o.ZP)(),t=(0,i.F9)().showToast;return{showErrorToast:function(){t(function(t){var n=t.hideToast;return(0,a.jsx)(r.Z,{onHide:n,text:e._('Something went wrong.', 'fetchReportingReasons.Toast.Unsuccessful', 'Toast after fetching reporting reasons is unsuccessful')})})},showSuccessToast:function(){t(function(t){var n=t.hideToast;return(0,a.jsx)(r.Z,{onHide:n,text:e._('Thanks. For updates, see your reports and violations center.', 'userReporting.handleSubmitReport.toast', 'This string appears on a banner that is displayed for a few seconds after the user submits a report, such as for content that violates Pinterest\u2019s policies. This banner confirms receipt and lets the user know where they can find updates. \u201Creports and violations center\u201D is the name of a feature within settings. It is a common noun. The tone of this is neutral and calm.')})})}}}},350091:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}}),n(53583);var r,o=n(284987),i=n(962119),a=void 0!==r?r:r=n(47655);function l(e){var t,n=e.pinKey,r=(0,o.TH)(),l=!!r&&/^\/pin\/[\w-]+/.test(r.pathname),s=(0,i.Z)(a,n);return l?(null==(t=r.state)?void 0:t.trackingParams)||"".concat(null==s?void 0:s.trackingParams,"~0"):null==s?void 0:s.trackingParams}},756064:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(258712),o=n(295666),i=n(992114);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(c=function(){return!!e})()}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return(t=f(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");h.prototype=Object.create(e&&e.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),e&&l(h,e);var t,n,r=(t=c(),function(){var e,n=u(h);return e=t?Reflect.construct(n,arguments,u(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return s(e)}(this,e)});function h(){var e;if(!(this instanceof h))throw TypeError("Cannot call a class as a function");for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return d(s(e=r.call.apply(r,[this].concat(n))),"state",{error:null,info:null}),d(s(e),"resetError",function(){e.setState({error:null,info:null})}),e}return n=[{key:"componentDidCatch",value:function(e,t){try{var n,r=this.props.name,a=this.props.type||"secondary";(0,o.T)({extraData:null!=(n=e.extraData)?n:{},errorBoundary:r,errorBoundaryType:a,message:e.message,name:e.name,stack:e.stack}),(0,i.nP)("react.error_boundary",{sampleRate:.1,tags:{component:void 0,name:this.props.name}})}catch(e){(0,i.nP)("react.error_boundary.error",{sampleRate:1,tags:{name:this.props.name}})}this.setState({error:e,info:t})}},{key:"render",value:function(){var e=this.props.renderErrorState,t=this.state,n=t.error,r=t.info;return n&&r?e?e({error:n,info:r,resetError:this.resetError}):null:this.props.children}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}(h.prototype,n),Object.defineProperty(h,"prototype",{writable:!1}),h}(r.Component)},95460:function(e,t,n){"use strict";t.Z=n(756064).Z},349178:function(e,t,n){"use strict";var r=n(19035);t.Z=function(e){var t=e.color;return(0,r.jsx)("svg",{fill:"none",height:"18",width:"14",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M0 2C0 .895431.895431 0 2 0h10c1.1046 0 2 .895431 2 2v13.5268c0 1.7288-2.0452 2.6433-3.3336 1.4905L7 13.7368l-3.66641 3.2805C2.04523 18.1701 0 17.2556 0 15.5268V2Z",fill:t})})}},813323:function(e,t,n){"use strict";var r=n(19035);t.Z=function(e){var t=e.color;return(0,r.jsx)("svg",{fill:"none",height:"18",width:"14",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M7.83349 12.8053 7 12.0595l-.83349.7458-3.66642 3.2805c-.48313.4322-1.25009.0893-1.25009-.559V2c0-.41421.33579-.75.75-.75h10c.4142 0 .75.33579.75.75v13.5268c0 .6483-.767.9912-1.2501.559l-3.66641-3.2805Z",stroke:t,strokeWidth:"2.5"})})}},703116:function(e,t,n){"use strict";var r=n(19035);t.Z=function(e){var t=e.color;return(0,r.jsx)("svg",{"data-test-id":"conversation-reply",display:"block",fill:"none",height:"12",viewBox:"0 0 12 12",width:"12",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"m0 9.99945c0 .55505.45 1.00005 1.005 1.00005s1.005-.45 1.005-1.00005c0-2.07 1.69-3.755 3.765-3.755h2.4l-1.57 1.565c-.39.39-.39 1.025 0 1.415s1.025.39 1.42 0l3.975-3.965-3.97-3.965c-.39-.389997-1.025-.389997-1.42 0-.39.39-.39 1.025 0 1.415l1.53 1.525h-2.365c-3.185 0-5.775 2.585-5.775 5.765z",fill:void 0===t?"#111":t})})}},660691:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(1794),o=n(233846),i=n(51340);function a(){var e=(0,o.ZP)();return function(t,n){var o=new Date(t).getTime(),a=Date.now()-o,l=Math.floor(a/r.FS),s=Math.floor(a/r.UK),c=Math.floor(a/r.F4),u=Math.floor(a/r.VL),d=Math.floor(a/r.N9),f=Math.floor(a/r.N1),h=e.ngettext('{{ minutes }} minute ago', '{{ minutes }} minutes ago', l, ' - ', ' -- '),p=e.ngettext('{{ hours }} hour ago', '{{ hours }} hours ago', s, ' - ', ' -- '),m=e.ngettext('{{ days }} day ago', '{{ days }} days ago', c, ' - ', ' -- '),g=e.ngettext('{{ weeks }} week ago', '{{ weeks }} weeks ago', u, ' - ', ' -- '),_=e.ngettext('{{ months }} month ago', '{{ months }} months ago', d, 'useGetHumanizedTimeSince.monthsString', 'months since last update'),y=e.ngettext('{{ years }} year ago', '{{ years }} years ago', f, ' - ', ' -- '),v=e.ngettext('{{ minutes }}m', '{{ minutes }}m', l, 'minutes ago abbreviated', 'minutes ago abbreviated'),b=e.ngettext('{{ hours }}h', '{{ hours }}h', s, 'hours ago abbreviated', 'hours ago abbreviated'),x=e.ngettext('{{ days }}d', '{{ days }}d', c, 'days ago abbreviated', 'days ago abbreviated'),P=e.ngettext('{{ weeks }}w', '{{ weeks }}w', u, 'weeks ago abbreviated', 'weeks ago abbreviated'),w=e.ngettext('{{ months }}mo', '{{ months }}mo', d, 'months ago abbreviated', 'months ago abbreviated'),j=e.ngettext('{{ years }}y', '{{ years }}y', f, 'years ago abbreviated', 'years ago abbreviated');return f>0?(0,i.nk)(n?j:y,{years:f}).join(""):d>0?(0,i.nk)(n?w:_,{months:d}).join(""):u>0?(0,i.nk)(n?P:g,{weeks:u}).join(""):c>0?(0,i.nk)(n?x:m,{days:c}).join(""):s>0?(0,i.nk)(n?b:p,{hours:s}).join(""):l>0?(0,i.nk)(n?v:h,{minutes:l}).join(""):e._('Just now', ' - ', ' -- ')}}},653810:function(e,t){"use strict";t.Z={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},158759:function(e,t,n){"use strict";n.d(t,{NK:function(){return y},P6:function(){return l},ZE:function(){return g},Zt:function(){return _},_J:function(){return d},_S:function(){return v},cL:function(){return p},iR:function(){return b},jL:function(){return u},oN:function(){return a},rM:function(){return m},sV:function(){return f},sY:function(){return h},yp:function(){return s}});var r=n(606688);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a=5e3,l=5e3/r.gJ,s="Pin page",c=["Uploaded by user"],u=function(e,t){return!!t&&!e},d=function(e){return!!e&&5!==e},f=function(e){return["email","messages","deep_linking"].includes(e)},h=function(e){return!!e&&"gif"===e},p=function(e){var t=e.embedSrc,n=e.embedSubtype,r=e.embedType;return!!t&&!h(r)&&"pinstory"!==n},m=function(e){var t=e.link,n=e.mobileLink,r=e.trackedLink,o=e.utmLink;return!n&&!o&&!r&&!t},g=function(e){return/pin.it/gim.test(e||"")},_=function(e){var t=e.link,n=e.mobileLink,r=e.origImageUrl,o=e.trackedLink,i=e.utmLink;return n||i||o||t||r||""},y=function(e,t){return{deeplinkUri:{android:"pin/".concat(e,"/repin"),iOS:"repin/".concat(e)},mwebUri:{pathname:"/pin/".concat(e,"/repin/"),state:{trackingParams:t.state?t.state.trackingParams:""}}}};function v(e){var t,n=o(c);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e===r)return!1}}catch(e){n.e(e)}finally{n.f()}return!0}function b(e){if(!e)return!1;var t=e.id,n=e.videos;if(t&&null!=n&&n.id&&n.video_list){var r=n.video_list,i=r.V_720P,a=r.V_HLSV4,l=r.V_HLSV3_MOBILE;if(i&&x(i)||a&&x(a)||l&&x(l))return!0}var s=null==(c=e.story_pin_data)||null==(u=c.pages)||null==(d=u[0])?void 0:d.blocks;if(s){var c,u,d,f,h=o(s);try{for(h.s();!(f=h.n()).done;){var p=f.value;if("story_pin_video_block"===p.type&&null!=p&&p.video)return!0}}catch(e){h.e(e)}finally{h.f()}}return!1}function x(e){return!!(e.thumbnail&&e.url&&e.width&&e.height)}},967312:function(e,t,n){"use strict";n.d(t,{F:function(){return i},a:function(){return o}});var r=(0,n(218291).Z)("ExperimentContext"),o=r.Provider,i=r.useHook},181710:function(e,t,n){"use strict";t.Z=n(774609).Z},166543:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});var r={AC:"ac",AUTOCOMPLETE:"autocomplete",BOARD:"blp",CONTENT_TYPE_FILTER:"content_type_filter",DIRECT_NAVIGATION:"direct_navigation",FILTER:"filter",GUIDED_SEARCH_ENTRY:"guided_search_entry",GUIDED_SEARCH_LANDING:"guided_search_landing",HASHTAG_CLOSEUP:"hashtag_closeup",HASHTAG_PINREP:"hashtag_pinrep",HOMEFEED_BUBBLE:"homefeed_bubble",HUB_PAGE:"hub_page",IDEAS_ROOT:"ideas_root",IMAGE_ONLY_ATTRIBUTION:"image_only_attribution",LANDING_PAGE_STORY:"landing_page_story",NO_RESULTS_SEARCH_STORY:"no_results_search_story",PRODUCT:"product",REMOVE:"remove",RS:"rs",SHOPPING_FILTER:"shopping_filter",SITELINKS_SEARCHBOX:"sitelinks_searchbox",SLP_REC_CURATED:"slp_rec_curated",SLP_REC_TRENDING:"slp_rec_trending",SRS:"srs",STRUCTURED_GUIDE:"structured_guide",TRENDING:"trending",TYPED:"typed",TYPO_AUTO_ORIGINAL:"typo_auto_original",TYPO_SUGGESTION:"typo_suggestion",UNKNOWN:"Unknown",URECS:"urecs",VANILLA_GUIDE:"guide",VIDEO:"video",VOICE_SEARCH:"voice_search"}},257159:function(e,t,n){"use strict";var r=n(491013),o=/\{\{\s*(\w+)\s*\}\}/g;t.Z=function(e,t){return(0,r.Z)(o,e,t)}},957899:function(e,t){"use strict";t.Z=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}},491013:function(e,t){"use strict";t.Z=function(e,t,n){return t?t.replace(e,function(e,t){return n&&Object.prototype.hasOwnProperty.call(n,t)?n[t]:""}):""}},121006:function(e,t,n){"use strict";var r=n(257159),o=n(957899);t.Z=function(e,t){var n={};return Object.keys(t).forEach(function(e){n[e]=t[e]?(0,o.Z)(t[e].toString()):""}),(0,r.Z)(e,n)}},606688:function(e,t,n){"use strict";n.d(t,{$f:function(){return o},Cy:function(){return s},DR:function(){return r},Fm:function(){return l},bR:function(){return a},gJ:function(){return i},lG:function(){return c}});var r=1,o=2,i=1e3,a=1e3,l=1e3,s=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),c=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4})},621609:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(381366);function o(e){return(0,r.Z)().conversations.data[e]}},812857:function(e,t,n){"use strict";n.d(t,{Z:function(){return d}});var r,o=n(578373),i=n(18644),a=n(381366),l=n(903683);function s(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,l,"next",e)}function l(e){s(i,r,o,a,l,"throw",e)}a(void 0)})}}var u=(r=0,function(){return r++});function d(){var e,t=(0,a.Z)(),n=t.conversations,r=t.conversationCreate,s=t.pendingMessageSend,d=t.pendingMessageSuccess,f=t.pendingMessageFailure,h=(0,l.S6)();return e=c(regeneratorRuntime.mark(function e(t,a,l,p,m,g){var _,y,v,b,x,P,w,j,S,A;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w=function(){return(w=c(regeneratorRuntime.mark(function e(){var n,r,a,c,P;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.Z.create("ConversationMessagesResource",{conversation_id:t,text:_,pin:y,board:v,user:b,user_did_it_data:x,source:l,client_tracking_params:null==(n=h(y||""))?void 0:n.tracking_params,thread_id:m,anchor_message:g,field_set_key:m||g?["default_with_reactions_and_threads"]:["default_with_reactions"]}),a="".concat(u()),s(t,c={text:_,sender:p,created_at:new Date().toString(),created_ms:Date.now(),id:a,thread:{id:m||"",anchor_message:{id:g||""}},type:"tempMessage"}),e.prev=4,e.next=7,r.callCreate();case 7:if(!(P=e.sent.resource_response.data)){e.next=12;break}return d(t,c,P),e.abrupt("return",P);case 12:e.next=18;break;case 14:throw e.prev=14,e.t0=e.catch(4),f(t,a),Error((0,i.Z)(e.t0,"message"));case 18:return e.abrupt("return",void 0);case 19:case"end":return e.stop()}},e,null,[[4,14]])}))).apply(this,arguments)},P=function(){return w.apply(this,arguments)},_=a.text,y=a.pinId,v=a.boardId,b=a.userId,x=a.didItId,n.data[t]){e.next=21;break}return j=o.Z.create("ConversationResource",{conversation_id:t}),e.prev=5,e.next=8,j.callGet();case 8:if(!(S=e.sent.resource_response.data)){e.next=14;break}return r(S),e.next=14,P();case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(5),Error((0,i.Z)(e.t0,"message"));case 19:e.next=25;break;case 21:return e.next=23,P();case 23:return A=e.sent,e.abrupt("return",A);case 25:return e.abrupt("return",void 0);case 26:case"end":return e.stop()}},e,null,[[5,16]])})),function(t,n,r,o,i,a){return e.apply(this,arguments)}}},515207:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(132227),o=n(19035);function i(e){var t=e.text;return(0,o.jsx)(r.xu,{display:"visuallyHidden",children:(0,o.jsx)(r.X6,{accessibilityLevel:1,children:t})})}},12624:function(e,t,n){"use strict";n.d(t,{c:function(){return o},t:function(){return i}});var r=n(901948);function o(e){return(0,e.children)((0,r.Z)().height)}function i(){return(0,r.Z)().height}},901948:function(e,t,n){"use strict";n.d(t,{C:function(){return o}});var r=(0,n(218291).Z)("Header"),o=r.Provider;t.Z=r.useHook},344500:function(e,t,n){"use strict";n.d(t,{hu:function(){return o},NW:function(){return c},L1:function(){return a},WZ:function(){return l},Rz:function(){return d},fe:function(){return s},cI:function(){return i},OZ:function(){return u}});var r=n(132227),o=64,i=80,a=22,l="HeaderContent",s=671,c=new r.Ry(s),u="NagHeaderContent",d={boxShadow:"0px 8px 8px -8px rgba(0, 0, 0, 0.1)",transition:"box-shadow 300ms ease-in-out"}},20561:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(132227),o=n(19035);function i(e){var t=e.children,n=e.onMouseEnter,i=e.onMouseLeave,a=e.onTouch,l=e.rounding,s=e.fullWidth,c=e.pressState,u=void 0===c?"none":c,d=e.accessibilityLabel,f=e.role,h=e.dataTestId,p=(Array.isArray(u)?u:[u]).includes("compress");return(0,o.jsx)(r.iP,{accessibilityLabel:d,dataTestId:h,fullWidth:void 0!==s&&s,onMouseEnter:n&&function(e){return n(e.event)},onMouseLeave:i&&function(e){return i(e.event)},onTap:a&&function(e){return a(e.event)},role:f,rounding:l,tapStyle:p?"compress":"none",children:t})}},482994:function(e,t,n){"use strict";n.d(t,{Z:function(){return l},b:function(){return a}});var r=n(890360),o=[r.Gl,r.PY,r.jC,r.Xn,r.b_,r.oF,r.dt,r.x7,r.cY,r.bb],i=[].concat(o,[r.Ig]);function a(e){return i.every(function(t){return!t(e)})}function l(e){return o.every(function(t){return!t(e)})}},63500:function(e,t,n){"use strict";n.d(t,{bn:function(){return s},fJ:function(){return u},gC:function(){return c}});var r=n(545007),o=n(218291),i=n(19035),a=(0,o.Z)("Boards"),l=a.Provider,s=a.useHook;function c(){var e=s();return function(t){return e[t]}}function u(e){var t=e.children,n=(0,r.v9)(function(e){return e.boards},r.wU);return(0,i.jsx)(l,{value:n,children:t})}},903683:function(e,t,n){"use strict";n.d(t,{AF:function(){return s},H0:function(){return c},S6:function(){return u},_S:function(){return d}});var r=n(545007),o=n(218291),i=n(19035),a=(0,o.Z)("Pins"),l=a.Provider,s=a.useHook,c=a.useMaybeHook;function u(){var e=s();return function(t){return e[t]}}function d(e){var t=e.children,n=(0,r.v9)(function(e){return e.pins},r.wU);return(0,i.jsx)(l,{value:n,children:t})}},70620:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(132227),o=n(19963),i=n(852015),a=n(233846),l=n(829830),s=n(113474),c=n(297340),u=n(19035);function d(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function f(e){var t,n,f=e.conversationId,h=e.handleBlock,p=e.handleCancel,m=e.handleReport,g=e.handleSubmit,_=e.userToBlock,y=(0,o.v)().logContextEvent,v=(0,l.Z)().showErrorToast,b=(0,a.ZP)(),x=(0,s.Z)({name:"ConversationReportResource",options:{conversation_id:f}}),P=(t=regeneratorRuntime.mark(function e(t){var n,r,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.reasonKey,r=t.selectedReason,o=t.shouldBlockUser,y({event_type:183,view_type:42,view_parameter:202,object_id_str:f,element:null==r?void 0:r.element_type});try{o&&h(),r&&m(n),null==g||g()}catch(e){v()}case 3:case"end":return e.stop()}},e)}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){d(i,r,o,a,l,"next",e)}function l(e){d(i,r,o,a,l,"throw",e)}a(void 0)})},function(e){return n.apply(this,arguments)});return(0,u.jsx)(i.ZP,{accessibilityModalLabel:b._('Report message modal', 'ConversationPage.ReportConversationModal', 'Modal for users to report a conversation and block user'),mobileAllowScroll:!0,mobileHideCloseIcon:!0,onDismiss:p,children:(0,u.jsx)(r.xu,{marginBottom:5,marginTop:2,maxHeight:"70vh",children:(0,u.jsx)(c.Z,{dismissConversationReportModal:p,handleSubmitReport:P,objectToReport:{type:"conversation",id:f,userToBlock:_,viewType:42,viewParameter:202},reportingReasons:x.data})})})}},815143:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(258712),o=n(132227),i=n(19035);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");d.prototype=Object.create(e&&e.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),Object.defineProperty(d,"prototype",{writable:!1}),e&&l(d,e);var t,n,u=(t=s(),function(){var e,n=c(d);return e=t?Reflect.construct(n,arguments,c(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==a(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");var n=e;if(void 0===n)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(this,e)});function d(){if(!(this instanceof d))throw TypeError("Cannot call a class as a function");return u.apply(this,arguments)}return n=[{key:"componentDidMount",value:function(){this.anchor&&(!this.props.hash||this.props.hash&&"#".concat(this.props.hash)===window.location.hash)&&(this.anchor.scrollIntoView(),this.props.offset&&window.scrollBy(0,this.props.offset))}},{key:"render",value:function(){var e=this,t=this.props.children?r.Children.only(this.props.children):null;return(0,i.jsx)(o.xu,{ref:function(t){e.anchor=t},children:t})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(r.key),r)}}(d.prototype,n),Object.defineProperty(d,"prototype",{writable:!1}),d}(r.Component)},420925:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(284987),o=n(890360),i=n(967312),a=n(174646),l=n(882368),s=n(482994);function c(){var e=(0,l.Z)(),t=(0,a.B)().isRTL,n=(0,r.TH)(),c=(0,i.F)().checkExperiment,u=t&&c("web_vertical_nav_rtl").anyEnabled;return{enabled:(0,s.Z)(n)&&(!t||u)&&e.isAuth&&!e.isPartner&&!(0,o.OK)(n)}}},630929:function(e,t,n){"use strict";n.d(t,{BO:function(){return P},D5:function(){return C},Dk:function(){return A},GC:function(){return O},GJ:function(){return g},L7:function(){return p},Lc:function(){return u},Mf:function(){return j},Mh:function(){return l},Qf:function(){return c},Qq:function(){return I},Xd:function(){return k},bT:function(){return v},bd:function(){return y},df:function(){return d},dg:function(){return s},dv:function(){return S},kl:function(){return _},m6:function(){return w},mT:function(){return x},nQ:function(){return T},pS:function(){return b},qM:function(){return z},rB:function(){return E},vg:function(){return R},xp:function(){return h},yg:function(){return f},zz:function(){return m}});var r=n(132227),o=n(346611),i=n(119330),a=n(344500),l="right",s=l,c=72,u="VerticalNavContent",d=24,f="lg",h="compress",p=16,m=16,g=392,_=12,y=o.mJW,v=o.Kuk,b=new r.H3([a.NW]),x=new r.Ry(a.fe-3),P=new r.H3([b,i.kl]),w=new r.H3([b]),j=w,S=2,A=8,C=4,I=3,O=12,k=20,T=24,E="200ms left",z={menuItemPadding:"12px",anchorOffset:"16px"},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"long",n={label:e._('Art', 'dweb.sidenav.ideas.art', 'Text for Flyout showing link to /ideas/art/ Page'),value:"961238559656",slug:"art"},r={label:e._('Beauty', 'dweb.sidenav.ideas.beauty', 'Text for Flyout showing link to /ideas/beauty/ Page'),value:"935541271955",slug:"beauty"},o={label:e._('Food & Drink', 'dweb.sidenav.ideas.food', 'Text for Flyout showing link to /ideas/food-and-drink/ Page'),value:"918530398158",slug:"food-and-drink"},i={label:e._('Design', 'dweb.sidenav.ideas.design', 'Text for Flyout showing link to /ideas/design/ Page'),value:"902065567321",slug:"design"},a={label:e._('Women\'s Fashion', 'dweb.sidenav.ideas.womensFashion', 'Text for Flyout showing link to /ideas/womens-fashion/ Page'),value:"948967005229",slug:"womens-fashion"},l={label:e._('Men\'s Fashion', 'dweb.sidenav.ideas.mensFashion', 'Text for Flyout showing link to /ideas/mens-fashion/ Page'),value:"924581335376",slug:"mens-fashion"},s={label:e._('Home Decor', 'dweb.sidenav.ideas.homeDecor', 'Text for Flyout showing link to /ideas/home-decor/ Page'),value:"935249274030",slug:"home-decor"},c={label:e._('DIY', 'dweb.sidenav.ideas.diy', 'Text for Flyout showing link to /ideas/diy-and-crafts/ Page'),value:"934876475639",slug:"diy-and-crafts"},u={label:e._('Fitness', 'dweb.sidenav.ideas.fitness', 'Text for Flyout showing link to /ideas/fitness-and-exercise/ Page'),value:"912503731943",slug:"fitness-and-exercise"},d={label:e._('Pets', 'dweb.sidenav.ideas.pets', 'Text for Flyout showing link to /ideas/animals-and-pets/ Page'),value:"941660492982",slug:"animals-and-pets"},f={label:e._('Quotes', 'dweb.sidenav.ideas.quotes', 'Text for Flyout showing link to /ideas/quotes/ Page'),value:"948192800438",slug:"quotes"},h={label:e._('Travel', 'dweb.sidenav.ideas.travel', 'Text for Flyout showing link to /ideas/travel/ Page'),value:"908182459161",slug:"travel"},p={label:e._('Weddings', 'dweb.sidenav.ideas.wedding', 'Text for Flyout showing link to /ideas/weddings/ Page'),value:"903260720461",slug:"weddings"};return"long"===t?[n,d,r,i,o,a,l,s,c,f,h,u,p]:[n,r,o,s,a,l]}},119330:function(e,t,n){"use strict";n.d(t,{Bq:function(){return f},CZ:function(){return s},Db:function(){return u},Lu:function(){return l},kl:function(){return i},rC:function(){return o},sb:function(){return c},t3:function(){return a},to:function(){return d}});var r=n(132227),o="full-height-inbox-panel",i=new r.Ry(700),a="defaultInboxView",l="newMessageView",s="newMessageSelectRecipientsView",c="invitesRequestsView",u="followInviteEducationView",d=64,f="conversationView"},670380:function(e,t,n){"use strict";function r(e,t){e&&e.includes("~0")&&(e=e.replace("~0",""));var n=null!=t&&t.includes("~0")?t:"".concat(t||"","~0");return e||n}n.d(t,{Z:function(){return r}})},526675:function(e,t,n){"use strict";n.d(t,{M:function(){return h},Q:function(){return p}});var r=n(258712),o=n(218291),i=n(19035);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){c(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function c(e,t,n){var r;return(r=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==a(r)?r:r+"")in e)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var d=(0,o.Z)("RepinContext"),f=d.Provider,h=d.useMaybeHook;function p(e){var t,n=e.children,o=function(e){if(Array.isArray(e))return e}(t=(0,r.useState)(Object.freeze({})))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{i=(n=n.call(e)).next,!1;for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return u(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=o[0],l=o[1],d=(0,r.useMemo)(function(){return{getSavedPinId:function(e){return a[e]},isSaved:function(e){return!!a[e]},save:function(e,t){return l(function(n){return s(s({},n),{},c({},e,t))})},unsave:function(e){return l(function(t){return s(s({},t),{},c({},e,null))})}}},[a]);return(0,i.jsx)(f,{value:d,children:n})}},284074:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(971518),o=n(417946),i=n(932645),a=n(19035);function l(e){var t=e.recipients,n=void 0===t?[]:t;switch(n.length){case 0:return null;case 1:return(0,a.jsx)(r.qE,{name:n[0].defaultDisplayName,size:"fit",src:n[0].src});case 2:return(0,a.jsx)(o.Z,{collaborators:n,isMobileConversationAvatar:!0});default:return(0,a.jsx)(i.Z,{collaborators:n})}}},562728:function(e,t,n){"use strict";var r=n(1794),o=n(612131),i=n(627973);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){var r,o,i;r=e,o=t,i=n[t],(o=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}t.Z=function(e,t){var n=parseInt(e,10),a=Date.now()-n,l=new Date(n),c={hour:"numeric",minute:"numeric"};return a>r.F4&&a<r.VL?c=s(s({},c),{},{weekday:"long"}):a>r.VL&&a<r.N1&&(c=s(s({},c),{},{month:"long",day:"numeric"})),a>r.F4?(0,o.Z)(l,t,c):(0,i.Z)(l,t,c)}},706688:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(1794),o=n(882368);function i(e){var t=e.messages,n=e.isDesktop,i=(0,o.Z)().id,a=function(e){var o=t[e].createdMs;if(!n&&e>=t.length-1||n&&0===e)return!0;var i=n?t[e-1]:t[e+1],a=i&&i.createdMs;return(parseInt(o||"0",10)||0)-parseInt(a||"0",10)>r.UK},l=function(e){if(n){var r=t[e];if(r.threadId&&r.anchorMessageId&&r.entityId){if(r.entityId===r.anchorMessageId)return!1;var o,a,l,s,c=e>0&&t[e-1],u=c&&(null==(o=r.sender)?void 0:o.entityId)===i&&(null==(a=c.sender)?void 0:a.entityId)===i,d=c&&(null==(l=r.sender)?void 0:l.entityId)!==i&&(null==(s=c.sender)?void 0:s.entityId)!==i;return!c||c.threadId!==r.threadId||!u&&!d}}return!1};return{shouldRenderUserAvatarForIndex:function(e){var r,o,s=null==(r=t[e].sender)?void 0:r.entityId;if(s===i)return!1;if(!n&&0===e||n&&e===t.length-1)return!0;var c=n?t[e+1]:t[e-1],u=s!==(c&&(null==(o=c.sender)?void 0:o.entityId)),d=n?a(e+1):a(e-1);if(n){var f=t[e],h=f.anchorMessageId&&f.entityId===f.anchorMessageId,p=l(e)||h,m=f.threadId&&(null==c?void 0:c.threadId)!==f.threadId;return!!(d||u||p||m)}return!!(d||u)},shouldRenderUserFullNameForIndex:function(e,r,o){if(9===t[e].messageType&&t[e].hasPin&&r(o?"sg_mweb_pin_share_land_system_message":"sg_dweb_pin_share_land_system_message").anyEnabled)return!1;var l,s,c=null==(l=t[e].sender)?void 0:l.entityId,u=a(e);if((c===i||e>=t.length-1)&&!n)return!1;var d=n?t[e-1]:t[e+1];return c!==(null==d||null==(s=d.sender)?void 0:s.entityId)||u},shouldRenderTimestampForIndex:a,messageContentMarginBottom:function(e){var n,r,o=e>0&&a(e-1),i=e>0&&(null==(n=t[e].sender)?void 0:n.entityId)!==(null==(r=t[e-1].sender)?void 0:r.entityId);return o?0:i?6:1},shouldRenderAnchorMessageForIndex:l,shouldRenderThreadsLineForIndex:function(e){if(n){var r,o=t[e];if(!o.threadId)return!1;var a=e>0&&t[e-1],s=t[e+1],c=o.entityId===o.anchorMessageId&&(null==(r=o.sender)?void 0:r.entityId)===i&&s&&s.anchorMessageId===o.entityId;return!!(a&&o.threadId===a.threadId||l(e)||c)}return!1},shouldRenderPinLandSystemMessageForIndex:function(e,n,r){return!!(9===t[e].messageType&&t[e].hasPin&&n(r?"sg_mweb_pin_share_land_system_message":"sg_dweb_pin_share_land_system_message").anyEnabled)}}}},906417:function(e,t,n){"use strict";n.d(t,{X:function(){return f},f:function(){return d}});var r=n(258712),o=n(218291),i=n(158759);function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REPORT_CONTENT_SHOW":return{id:t.payload.id,auxData:t.payload.auxData,isProduct:t.payload.isProduct,isPromoted:t.payload.isPromoted,parentId:t.payload.parentId,videoDuration:t.payload.videoDuration,viewParameter:t.payload.viewParameter,viewType:t.payload.viewType,type:t.payload.type,isThirdPartyAd:t.payload.isThirdPartyAd,nodeId:t.payload.nodeId};case"REPORT_CONTENT_DISMISS":return null;default:return e}}var l=n(19035);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var c=(0,o.Z)("ReportData"),u=c.Provider,d=c.useHook;function f(e){var t,n=e.children,o=function(e){if(Array.isArray(e))return e}(t=(0,r.useReducer)(a,null))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{i=(n=n.call(e)).next,!1;for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return s(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),c=o[0],d=o[1],f=(0,r.useCallback)(function(){return d({type:"REPORT_CONTENT_DISMISS"})},[]),h=(0,r.useCallback)(function(e,t,n){return d({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,parentId:t,videoDuration:null,viewParameter:null,viewType:null,type:n,nodeId:null}})},[]),p=(0,r.useCallback)(function(e,t,n){return d({type:"REPORT_CONTENT_SHOW",payload:{id:e,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:t,viewType:n,type:"conversation",nodeId:null}})},[]),m=(0,r.useCallback)(function(e){return d({type:"REPORT_CONTENT_SHOW",payload:{id:e.id,isProduct:!1,isPromoted:!1,videoDuration:null,viewParameter:e.viewParameter,viewType:e.viewType,type:"pin",nodeId:e.nodeId}})},[]),g=(0,r.useCallback)(function(e){var t=e.pinId,n=e.isDownstreamPromotion,r=e.hasPromoter,o=e.firstVideoDuration,a=e.isProduct,l=e.viewParameter,s=e.viewType,c=e.isThirdPartyAd,u=e.nodeId;d({type:"REPORT_CONTENT_SHOW",payload:{id:t,auxData:e.auxData,isProduct:a,isPromoted:(0,i.jL)(n,r),videoDuration:o,viewParameter:l,viewType:s,type:"pin",isThirdPartyAd:c,nodeId:u}})},[]),_=(0,r.useMemo)(function(){return{reportData:c,dismiss:f,reportComment:h,reportConversation:p,reportImage:m,reportPin:g}},[c,f,h,p,m,g]);return(0,l.jsx)(u,{value:_,children:n})}},764652:function(e,t,n){"use strict";n.d(t,{Z:function(){return tb}});var r,o,i,a,l,s=n(258712),c=n(545007),u=n(284987),d=n(132227),f=n(578373),h=n(219308),p=n(18644),m=n(397657),g=n(231333),_=n(233846),y=n(51340),v=n(864339),b=n(967312),x=n(113474),P=n(774609),w=n(169650),j=n(339908),S=n(538645),A=n(882368),C=n(621609),I=n(381366),O=n(914092),k=n(142691),T=n(226003),E=n(70620),z=n(412769),R=n(640935),M=n(703116),D=n(438711),F=n(755090),Z=n(706426),L=n(812857),N=n(167185),U=n(977610),B=n(903683),H=n(238872),K=n(53583),W=n(350091),Y=n(509936),G=n(962119),V=n(181710),X=n(670380),q=n(140042),J=n(526675),$=n(349178),Q=n(813323),ee=n(19035);function et(e){var t=e.color,n=void 0===t?"#111":t,r=e.shouldShowSolidIcon;return void 0===r||r?(0,ee.jsx)($.Z,{color:n}):(0,ee.jsx)(Q.Z,{color:n})}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var er=(0,s.lazy)(function(){return Promise.all([n.e(97270),n.e(58496),n.e(7981),n.e(39165),n.e(18596)]).then(n.bind(n,239165))}),eo=void 0!==r?r:r=n(310365);function ei(e){var t,n,r=e.inMwebThreadsExp,o=e.isOwnMessage,i=e.pinHasText,a=e.pinKey,l=e.slotIndex,c=e.trackingParams,f=a&&"GraphQL"===(0,Y.o)(a),p=(0,G.Z)(eo,a),m=function(e){if(Array.isArray(e))return e}(t=(0,s.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{i=(n=n.call(e)).next,!1;for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return en(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?en(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),g=m[0],y=m[1],v=(0,J.M)(),x=(0,R.Yc)(),P=(0,u.TH)(),w=(0,h.Z)(),j=(0,u.k6)(),S=(0,_.ZP)(),A=(0,X.Z)((P&&P.state||{}).trackingParams||c,p.trackingParams),C=(0,W.Z)({pinKey:p}),I=(0,b.F)().checkExperiment("web_refactor_consume_ctp").anyEnabled?C:A,O=function(){w({view_type:42,element:0,event_type:102}),j.push("/pin/".concat(p.entityId,"/repin"))},k=!!(null!=v&&v.isSaved(p.entityId)&&(null==(n=p.pinnedToBoard)?void 0:n.entityId));function T(){return(0,ee.jsxs)(d.xu,{alignItems:"center",direction:"column",display:"flex",justifyContent:"center",marginEnd:4*!!o,marginStart:4*!o,children:[r&&(0,ee.jsx)(d.iP,{accessibilityLabel:S._('Reply to Pin', 'ConversationPage.ConversationPinV2.Pin.ReplyButton', 'Button that allows user to reply to a pin'),children:(0,ee.jsx)(d.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{border:x?"1px solid #FFFFFF":"1px solid #E9E9E9"}},display:"flex",height:40,justifyContent:"center",marginBottom:2,rounding:"circle",width:40,children:(0,ee.jsx)(d.JO,{accessibilityLabel:"",color:"default",icon:"arrow-left-curved",size:16})})}),(0,ee.jsx)(d.iP,{accessibilityLabel:S._('Share Pin', 'ConversationPage.ConversationPinV2.Pin.SendButton', 'Button that allows user to share a pin'),onTap:function(){return y(!g)},children:(0,ee.jsx)(d.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{border:x?"1px solid #FFFFFF":"1px solid #E9E9E9"}},display:"flex",height:40,justifyContent:"center",marginBottom:2,rounding:"circle",width:40,children:(0,ee.jsx)(d.JO,{accessibilityLabel:"",color:"default",icon:"share",size:16})})}),(0,ee.jsx)(d.iP,{accessibilityLabel:S._('Save Pin', 'ConversationPage.ConversationPinV2.Pin.SaveButton', 'Button that allows user to save a pin to their own board'),onTap:O,children:(0,ee.jsx)(d.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{border:x?"1px solid #FFFFFF":"1px solid #E9E9E9"}},display:"flex",height:40,justifyContent:"center",rounding:"circle",width:40,children:r?(0,ee.jsx)(d.JO,{accessibilityLabel:"",color:"default",icon:"angled-pin",size:16}):(0,ee.jsx)(d.xu,{marginTop:1,children:(0,ee.jsx)(et,{color:x?"white":void 0,shouldShowSolidIcon:k})})})})]})}return(0,ee.jsxs)(d.kC,{children:[o&&T(),(0,ee.jsx)(d.xu,{borderStyle:"sm",display:"inlineBlock",marginTop:2*!!i,overflow:"hidden",position:"relative",rounding:4,width:220,zIndex:new d.Ry(1),children:(0,ee.jsx)(q.ZP,{componentType:0,disableReaction:!0,duploConversationPin:!0,duploDisablePinCardPadding:!0,duploPinCardDetailsMargin:2,duploQueryRef:f?p:null,objectIdStr:p.entityId,pinId:p.entityId,slotIndex:l,trafficSource:"messages",viewParameter:203,viewType:42})}),!o&&T(),g&&(0,ee.jsx)(V.Z,{children:(0,ee.jsx)(er,{clientTrackingParams:I,component:55,element:98,isOpen:!0,objectId:p.entityId,objectType:1,onDismiss:function(){y(!1)},viewParameter:203,viewType:42})})]})}function ea(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function el(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return es(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?es(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ec=new d.H3([new d.Ry(1)]);function eu(e){var t,n,r,o,i,a,l,c,u,f=e.conversationId,h=e.scrollToBottom,m=e.pauseMessagePolling,y=e.resumeMessagePolling,v=el((0,s.useState)(null),2),b=v[0],x=v[1],P=(0,L.Z)(),w=(0,_.ZP)(),S=(0,j.F9)().showToast,C=(0,A.Z)(),O=(0,I.Z)(),k=O.conversations.objectAttachment,T=O.removeObjectAttachment;(null==k?void 0:k.type)===H.d.PIN&&(null==k?void 0:k.source)===Z.A&&(u=k);var E=(0,B.S6)()((null==(o=u)?void 0:o.id)||""),K=u?w._('Replying to this Pin \uD83D\uDCCC', 'ConversationPage.ConversationComposerBar.PrefilledCopyIfPinDraft', 'prefilled copy in composer if this is a response to a shared pin'):"",W=el((0,s.useState)(K),2),Y=W[0],G=W[1];(0,F.Z)(function(){return b&&b.focus(),function(){T()}});var V=(0,R.Yc)(),X=Y.length>0,q=function(){S(function(e){var t=e.hideToast;return(0,ee.jsx)(g.Z,{onHide:t,text:w._('Messages cannot exceed 1000 characters', 'ConversationPage.ConversationComposerBar.Toast.ExeedLimit.ErrorMessage', 'Notify the user that they exceeded the max character limit for a message')})})},J=function(){S(function(e){var t=e.hideToast;return(0,ee.jsx)(g.Z,{onHide:t,text:w._('Please enter a message', 'ConversationPage.ConversationComposerBar.Toast.EmptyText.ErrorMessage', 'Notify the user that they should not send an empty text for a message')})}),G("")},$=(t=regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:var o;if(!((o=n=t.trim()).length>U.J?(q(),!1):0!==o.length||(J(),!1))){e.next=25;break}if(m(),G(""),b&&b.focus(),h(),e.prev=7,!u){e.next=13;break}return e.next=11,P(f,{text:n,pinId:u.id},void 0,C);case 11:e.next=15;break;case 13:return e.next=15,P(f,{text:n},void 0,C);case 15:T(),y(),e.next=25;break;case 19:e.prev=19,e.t0=e.catch(7),b&&b.blur(),(r=(0,p.Z)(e.t0,"message_detail")||(0,p.Z)(e.t0,"message"))&&S(function(e){var t=e.hideToast;return(0,ee.jsx)(g.Z,{onHide:t,text:r})}),y();case 25:case"end":return e.stop()}},e,null,[[7,19]])}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){ea(i,r,o,a,l,"next",e)}function l(e){ea(i,r,o,a,l,"throw",e)}a(void 0)})},function(e){return n.apply(this,arguments)}),Q=(null==(i=u)||null==(a=i.data)?void 0:a.title)||(null==E?void 0:E.grid_title)||(null==E?void 0:E.description)||"",et=(null==(l=u)||null==(c=l.data)?void 0:c.imgUrl)||(null==E?void 0:E.image_medium_url);return(0,ee.jsxs)(d.xu,{alignItems:"center",bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:V?"rgba(17,17,17,0.9)":"rgba(255,255,255,0.9)",webkitBackdropFilter:"blur(10px)",backdropFilter:"blur(10px)"}},direction:"column",display:"flex",left:!0,position:"absolute",right:!0,zIndex:ec,children:[u?(0,ee.jsxs)(d.xu,{alignItems:"center",color:"secondary",display:"flex",paddingX:4,paddingY:2,width:"100%",children:[(0,ee.jsx)(d.xu,{marginEnd:4,children:(0,ee.jsx)(d.zd,{height:48,rounding:2,wash:!0,width:36,children:et&&(0,ee.jsx)(d.Ee,{alt:Q,color:(null==(r=u.data)?void 0:r.dominantColor)||(null==E?void 0:E.dominant_color)||"",fit:"cover",naturalHeight:48,naturalWidth:36,src:et})})}),(0,ee.jsxs)(d.kC,{direction:"column",flex:"grow",justifyContent:"center",children:[(0,ee.jsxs)(d.kC,{alignItems:"center",justifyContent:"start",children:[(0,ee.jsx)(d.xu,{marginEnd:2,children:(0,ee.jsx)(M.Z,{color:V?"white":void 0})}),(0,ee.jsx)(d.xv,{size:"100",weight:"bold",children:w._('Replying to:', 'mWeb.ConversationPage.ConversationComposerBar.pinAttachmentDraft', 'text that suggests this is a response to a shared pin')})]}),(0,ee.jsx)(d.xu,{children:(0,ee.jsx)(d.xv,{color:"subtle",lineClamp:1,size:"100",children:(0,D.ZP)(Q)})})]}),(0,ee.jsx)(d.xu,{children:(0,ee.jsx)(d.hU,{accessibilityLabel:w._('Remove Pin attachment', 'mWeb.ConversationPage.ConversationComposerBar.removePinAttachmentIcon', 'icon that allows user to remove the pin attachment to the message'),icon:"cancel",iconColor:"darkGray",onClick:T,size:"xs"})})]}):null,(0,ee.jsxs)("form",{action:"",autoComplete:"off",onSubmit:function(e){return e.preventDefault(),$(Y),!1},style:z.Z$,children:[(0,ee.jsx)(d.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{border:function(){if(X)return V?"1px solid #FFFFFF":"1px solid #E9E9E9"}(),backgroundColor:V?X?"#111111":"#4A4A4A":X?"#FFFFFF":"#E9E9E9"}},display:"flex",marginBottom:2,marginStart:4,marginTop:2,minHeight:44,rounding:6,width:"100%",children:(0,ee.jsx)(N.Z,{ref:function(e){x(e)},grow:!0,id:"messageDraft",inDarkMode:V,maxHeight:z.wT,onChange:function(e){G(e.value)},placeholder:w._('Type a message...', 'mWeb.ConversationPage.ConversationComposerBar.Placeholder', 'Placeholder for message text input field'),size:"lg",style:{padding:"0px 16px",fontSize:16,caretColor:V?"white":"black",color:V?"white":"black",backgroundColor:"transparent"},value:Y})}),0===Y.length?(0,ee.jsx)(d.xu,{color:V?"dark":"light",dangerouslySetInlineStyle:{__style:{border:V?"1px solid #FFFFFF":"1px solid #E9E9E9"}},display:"flex",flex:"none",marginBottom:2,marginEnd:4,marginStart:2,marginTop:2,padding:3,rounding:"circle",children:(0,ee.jsx)(d.iP,{accessibilityLabel:w._('Send a heart emoji', 'ConversationPage.ConversationComposerBar.SendHeartTapArea', 'Tap area that sends a heart emoji to the recipient(s)'),onTap:function(){$("❤️")},children:(0,ee.jsx)(d.JO,{accessibilityLabel:w._('Heart', 'ConversationPage.ConversationComposerBar.HeartIcon', 'Accessiblity Label for heart icon'),color:"default",icon:"heart",size:16})})}):(0,ee.jsx)(d.xu,{marginBottom:2,marginEnd:4,marginStart:2,marginTop:2,children:(0,ee.jsx)(d.hU,{accessibilityLabel:w._('Send', 'ConversationPage.ConversationComposerBar.SendIcon', 'Accessiblity Label for Send Icon'),icon:"send",onClick:function(){$(Y)},selected:!0,size:"md"})})]})]})}var ed=n(342583),ef=n(852015),eh=n(515207),ep=n(344500),em=n(824879),eg=n(284074);function e_(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ey(e){var t=e.fullName,n=e.username,r=(0,u.k6)(),o=(0,ee.jsx)(d.xv,{inline:!0,lineClamp:1,weight:"bold",children:t});return n?(0,ee.jsx)(d.iP,{fullWidth:!1,onTap:function(){return r.push("/".concat(n,"/"))},children:o}):o}function ev(e){var t,n=e.recipients,r=e.onReport,o=(0,_.ZP)(),i=(0,A.Z)().fullName,a=function(e){if(Array.isArray(e))return e}(t=(0,s.useState)(!1))||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{i=(n=n.call(e)).next,!1;for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return e_(e,2);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e_(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),l=a[0],c=a[1],u=n.length>0&&(n.length>=2?(0,ee.jsx)(d.xv,{lineClamp:1,weight:"bold",children:n.map(function(e){return e.defaultDisplayName}).join(", ")}):(0,ee.jsx)(ey,{fullName:n[0].fullName,username:n[0].username})),f=n.length>1,h=f?40:32;return(0,ee.jsxs)(d.xu,{alignItems:"center",color:(0,R.Yc)()?"dark":"light",dangerouslySetInlineStyle:{__style:{backgroundColor:(0,R.Yc)()?"rgba(17,17,17,0.9)":"rgba(255,255,255,0.9)",WebkitBackdropFilter:"blur(10px)",backdropFilter:"blur(10px)"}},"data-test-id":"conversation-page-header",display:"flex",left:!0,paddingX:2,paddingY:1,position:"fixed",right:!0,top:!0,zIndex:new d.Ry(ep.fe),children:[(0,ee.jsx)(d.kC,{flex:"none",children:(0,ee.jsx)(em.Z,{color:"darkGray",icon:"arrow-back",padding:2,size:"lg",viewParameter:202,viewType:42})}),(0,ee.jsx)(d.kC,{alignItems:"center",flex:"none",height:40,justifyContent:"end",width:40,children:(0,ee.jsxs)(d.xu,{height:h,width:h,children:[(0,ee.jsx)(eg.Z,{recipients:n}),(0,ee.jsx)(eh.Z,{text:"Conversation"})]})}),(0,ee.jsx)(d.xu,{direction:"column",display:"flex",flex:"grow",paddingX:2,children:f?(0,ee.jsxs)(d.iP,{accessibilityLabel:o._('see all members in group conversation', 'mWeb.ConversationPage.ConversationHeader.accessibility.groupAllMembers', 'tap to see all members in the group conversation'),onTap:function(){c(!l)},children:[(0,ee.jsx)(d.xu,{width:"100%",children:u}),(0,ee.jsx)(d.xv,{color:"subtle",size:"200",children:(0,y.nk)(o._('{{ allParticipantsCount }} members', 'mWeb.ConversationPage.ConversationHeader.ParticipantsCounter', 'counter to show how many recipients are in this conversation, allParticipantsCount: the number of all users in this conversation '),{allParticipantsCount:n.length+1})})]}):(0,ee.jsx)(d.xu,{width:"100%",children:u})}),r&&(0,ee.jsx)(d.kC,{dataTestId:"conversation-flag-button",flex:"none",width:48,children:(0,ee.jsx)(d.hU,{accessibilityLabel:o._('flag', 'conversationPage.reportflag.accessibility', 'Accessiblity Label for flag icon'),bgColor:"transparent",icon:"flag",iconColor:"darkGray",onClick:function(){return r()},size:"lg"})}),l&&(0,ee.jsx)(ef.ZP,{accessibilityModalLabel:o._('list of all members', 'mWeb.ConversationPage.allMembersModal', 'modal that shows the list of all members in a conversation'),heading:(0,ee.jsx)(d.xv,{align:"center",weight:"bold",children:(0,y.nk)(o._('{{ totalMembersCount }} members', 'mWeb.ConversationPage.allMembersModal.header', 'text that show the total member count in the conversation, totalMembersCount: the number of participants in the chat '),{totalMembersCount:n.length+1})}),isOpen:!0,mobileAccessibilityCloseIconLabel:o._('close members list modal', 'mWeb.ConversationPage.allMembersModal.close', 'close icon to close the all members modal'),mobileAllowScroll:!0,mobileIsSlideUp:!0,onDismiss:function(){return c(!1)},children:(0,ee.jsxs)(d.xu,{maxHeight:"65vh",paddingX:3,paddingY:1,children:[(0,ee.jsx)(d.xu,{marginBottom:4,marginEnd:2,marginStart:2,children:(0,ee.jsx)(d.xv,{inline:!0,lineClamp:1,weight:"bold",children:(0,y.nk)(o._('{{ viewingUserFullName }} (you)', 'mWeb.ConversationPage.allMembersModal.viewingUserFullName', 'text that shows the viewing user in the all members modal,  viewingUserFullName: the full name of viewing user'),{viewingUserFullName:i})})}),n.map(function(e){var t=e.username,n=e.fullName;return(0,ee.jsx)(d.xu,{marginBottom:4,marginEnd:2,marginStart:2,children:(0,ee.jsx)(ey,{fullName:n,username:t})},t)})]})})]})}var eb=n(378626),ex=n(971518),eP=n(174646),ew=n(20561),ej=n(815143);function eS(e){var t=e.handleConfirm,n=e.handleCancel,r=(0,_.ZP)(),o=(0,h.Z)();return(0,ee.jsx)(ef.ZP,{accessibilityModalLabel:r._('Confirm Delete Message', 'ConfirmDeleteMessageModal.accessibilityModalLabel', 'Accessibility label for the confirm delete message modal'),heading:(0,ee.jsx)(d.xu,{marginBottom:4,marginTop:8,paddingX:4,children:(0,ee.jsx)(d.X6,{align:"center",size:"600",children:r._('Delete this message?', 'ConfirmDeleteMessageModal.heading', 'Heading for the confirm delete message modal')})}),onDismiss:n,children:(0,ee.jsxs)(d.xu,{marginBottom:10,paddingX:6,children:[(0,ee.jsx)(d.xu,{marginBottom:6,children:(0,ee.jsx)(d.xv,{align:"center",children:r._('Your message will be deleted from this conversation. If the conversation is reported, deleted messages will be included', 'ConfirmDeleteMessageModal.confirmationText', 'Confirmation text for deleting a message')})}),(0,ee.jsxs)(d.kC,{gap:2,justifyContent:"center",children:[(0,ee.jsx)(d.zx,{onClick:function(){o({view_type:42,element:16214,event_type:102}),n()},text:r._('Cancel', 'ConfirmDeleteMessageModal.cancelButton', 'Cancel button')}),(0,ee.jsx)(d.zx,{color:"red",onClick:function(){o({view_type:42,element:16213,event_type:102}),t()},text:r._('Delete', 'ConfirmDeleteMessageModal.deleteButton', 'Delete button')})]})]})})}function eA(e){return(eA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eI(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(n),!0).forEach(function(t){var r,o,i;r=e,o=t,i=n[t],(o=function(e){var t=function(e,t){if("object"!=eA(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eA(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eA(t)?t:t+""}(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function eO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ek(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ek(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ek(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eT(e){var t=e.handleReactionTrayClick,n=e.isActionSheet,r=(0,s.useRef)(null),o=eO((0,s.useState)("loading"),2),i=o[0],a=o[1],l=eO((0,s.useState)(""),2),c=l[0],u=l[1],f=eO((0,s.useState)(),2),h=f[0],p=f[1],m=eO((0,s.useState)(!1),2),g=m[0],_=m[1],y=eO((0,s.useState)({}),2),v=y[0],b=y[1],x=(0,s.useRef)(void 0),P=(0,s.useRef)({}),w=function(){_(!0);var e=eI({},v);z.MN.forEach(function(t){P.current[t]&&(e[t]=P.current[t].getBoundingClientRect())}),Object.keys(e).length===z.MN.length&&b(e)},j=function(){var e=eI({},h);z.MN.forEach(function(t){var n=v[t],r=n.left,o=n.top;e[t]={translateX:r,translateY:o}}),p(e)};(0,s.useEffect)(function(){"loading"===i&&(x.current=requestAnimationFrame(function(){return a("loaded")})),g||w(),!h&&g&&j()});var S=function(e){var t;return g&&z.MN.forEach(function(n){var r=v[n];if(r&&r.left&&r.right){var o=r.left,i=r.right;e>=o&&e<=i&&(t=n)}}),t||null},A=function(){document.body&&document.body.style&&(document.body.style.overflow="hidden")},C=function(){document.body&&document.body.style&&(document.body.style.overflow="unset")},I=function(e){if(e.nativeEvent instanceof MouseEvent){w();var r=S(e.clientX);n&&r?t(r):(A(),r!==c&&r&&(u(r),a("clicked"),setTimeout(function(){a("flying"),setTimeout(function(){t(r)},50),C()},0)))}},O=z.MN.map(function(e,t){var r=z.nk[e];return(0,ee.jsx)(ew.Z,{onTouch:I,pressState:"none",children:(0,ee.jsx)(d.xu,{ref:function(t){P.current[e]=t},color:n?"lightWash":"transparent",display:"inlineBlock",height:46,paddingX:n?3:2,paddingY:n?3:2,rounding:"circle",width:n?46:40,children:(0,ee.jsx)(d.Ee,{alt:r.alt,fit:"contain",naturalHeight:r.height,naturalWidth:r.width,src:r.asset})})},e)});return(0,ee.jsx)(d.xu,{ref:r,alignItems:"center",display:"flex",justifyContent:"center",children:(0,ee.jsx)(d.xu,{alignItems:"center",color:"flying"===i?"transparent":"default",display:"flex",flex:n?"grow":"shrink",justifyContent:n?"around":"center",marginBottom:2*!!n,onTouchEnd:function(){n||(c&&(a("flying"),setTimeout(function(){t(c)},325)),C())},onTouchMove:function(e){if(!n){A();var t=S(e.touches[0].clientX);t!==c&&u(t),a("clicked")}},onTouchStart:function(){n||w()},paddingX:2,rounding:"pill",children:O})})}var eE=void 0!==o?o:o=n(754404);function ez(e){var t=e.handleDeleteClick,n=e.handleReactionClick,r=e.handleShareClick,o=e.message,i=e.onDismiss,a=e.pinKey,l=(0,b.F)().checkExperiment,s=l("sg_mweb_threads").anyEnabled,c=l("sg_mweb_message_deletion").anyEnabled,f=(0,G.Z)(eE,a),p=(0,u.k6)(),m=(0,_.ZP)(),g=(0,h.Z)(),y=o.board,v=o.user,x=o.userDidItData,P=o.text,w=!1,j=!1,S=!1;if(y||f||v||x)S=!0,f&&(j=!0);else{if(!P)return null;w=!0}return(0,ee.jsx)(ef.ZP,{accessibilityModalLabel:m._('Message Actions', 'ConversationPage.ConversationMessageActionSheet.accessibilityModalLabel', 'Accessibility label for the message actions modal'),onDismiss:i,children:(0,ee.jsxs)(d.xu,{paddingX:4,paddingY:4,children:[(0,ee.jsx)(eT,{handleReactionTrayClick:n,isActionSheet:!0}),(0,ee.jsx)(d.iz,{}),(0,ee.jsxs)(d.xu,{paddingY:2,children:[w&&(0,ee.jsx)(d.iP,{accessibilityLabel:m._('Copy Text', 'ConversationPage.ConversationMessageActionSheet.CopyButton', 'Button that allows user to copy text'),onTap:function(){P&&(navigator.clipboard.writeText(P),i())},children:(0,ee.jsxs)(d.xu,{alignItems:"center",display:"flex",flex:"grow",paddingY:3,children:[(0,ee.jsx)(d.xu,{paddingX:2,children:(0,ee.jsx)(d.JO,{accessibilityLabel:"",color:"default",icon:"copy-to-clipboard",size:16})}),(0,ee.jsx)(d.xv,{weight:"bold",children:m._('Copy', 'ConversationPage.ConversationMessageActionSheet.Copy', 'Copy this message')})]})}),j&&(0,ee.jsx)(d.iP,{accessibilityLabel:m._('Save Pin', 'ConversationPage.ConversationMessageActionSheet.Pin.SaveButton', 'Button that allows user to save a pin to their own board'),onTap:function(){f&&(g({view_type:42,element:0,event_type:102}),p.push("/pin/".concat(f.entityId,"/repin")))},children:(0,ee.jsxs)(d.xu,{alignItems:"center",display:"flex",flex:"grow",paddingY:3,children:[(0,ee.jsx)(d.xu,{paddingX:2,children:(0,ee.jsx)(d.JO,{accessibilityLabel:"",color:"default",icon:"angled-pin",size:16})}),(0,ee.jsx)(d.xv,{weight:"bold",children:m._('Save', 'ConversationPage.ConversationMessageActionSheet.Save', 'Save this Pin to a board')})]})}),S&&(0,ee.jsx)(d.iP,{accessibilityLabel:m._('Share Message Content', 'ConversationPage.ConversationMessageActionSheet.Content.SendButton', 'Button that allows user to share the object that the message is about'),onTap:function(){r(),i()},children:(0,ee.jsxs)(d.xu,{alignItems:"center",display:"flex",flex:"grow",paddingY:3,children:[(0,ee.jsx)(d.xu,{paddingX:2,children:(0,ee.jsx)(d.JO,{accessibilityLabel:"",color:"default",icon:"share",size:16})}),(0,ee.jsx)(d.xv,{weight:"bold",children:m._('Share', 'ConversationPage.ConversationMessageActionSheet.Share', 'Share this Pin/board/user profile')})]})}),s&&(0,ee.jsx)(d.iP,{accessibilityLabel:m._('Reply to message', 'ConversationPage.ConversationMessageActionSheet.ReplyButton', 'Button that allows user to reply to a message'),children:(0,ee.jsxs)(d.xu,{alignItems:"center",display:"flex",flex:"grow",paddingY:3,children:[(0,ee.jsx)(d.xu,{paddingX:2,children:(0,ee.jsx)(d.JO,{accessibilityLabel:"",color:"default",icon:"arrow-left-curved",size:16})}),(0,ee.jsx)(d.xv,{weight:"bold",children:m._('Reply', 'ConversationPage.ConversationMessageActionSheet.Reply', 'Reply to this message')})]})}),c&&(0,ee.jsx)(d.iP,{accessibilityLabel:m._('Delete Message', 'ConversationPage.ConversationMessageActionSheet.DeleteButton', 'Button that allows user to delete a message'),onTap:function(){g({view_type:42,element:16212,event_type:102}),t(),i()},children:(0,ee.jsxs)(d.xu,{alignItems:"center",display:"flex",flex:"grow",paddingY:3,children:[(0,ee.jsx)(d.xu,{paddingX:2,children:(0,ee.jsx)(d.JO,{accessibilityLabel:"",color:"error",icon:"trash-can",size:16})}),(0,ee.jsx)(d.xv,{color:"error",weight:"bold",children:m._('Delete', 'ConversationPage.ConversationMessageActionSheet.Delete', 'Delete this message')})]})})]})]})})}function eR(e){var t=e.user,n=(0,u.k6)(),r=(0,_.ZP)(),o=t.imageLargeUrl,i=t.fullName,a=t.username||"",l=(0,A.Z)(),s=l.isAuth?null==l?void 0:l.avatar_color_index:void 0;return(0,ee.jsx)(ew.Z,{onTouch:function(){return n.push("/".concat(a,"/"))},pressState:"none",rounding:4,children:(0,ee.jsxs)(d.kC,{alignItems:"center",direction:"column",height:224,justifyContent:"start",width:236,children:[(0,ee.jsx)(d.xu,{color:"default",height:157,rounding:4,width:236,children:(0,ee.jsx)(d.zd,{rounding:4,children:(0,ee.jsx)(d.gM,{columns:2,gutter:1,height:157,renderImage:function(e){var n=e.index,o=(t.thumbnails||[])[n];return n<2&&(0,ee.jsx)(d.zd,{height:157,width:118,children:o&&o.url?(0,ee.jsx)(d.Ee,{alt:r._('Cover image', 'mweb.converstaion.profileRep.coverImage', 'Cover image in Profile rep\'s collage'),color:"lightGray",fit:"cover",naturalHeight:o.height||0,naturalWidth:o.width||0,src:o.url}):(0,ee.jsx)(d.xu,{color:"secondary",height:"100%",width:"100%"})})},width:236})})}),(0,ee.jsxs)(d.xu,{alignItems:"center",direction:"column",display:"flex",marginTop:-8,position:"relative",children:[(0,ee.jsx)(d.xu,{color:"default",dangerouslySetInlineStyle:{__style:{padding:1}},height:64,rounding:"circle",width:64,children:(0,ee.jsx)(d.zd,{rounding:"circle",children:(0,ee.jsx)(ex.qE,{accessibilityLabel:"",color:s,name:i||a,outline:!0,size:"fit",src:o||""})})}),(0,ee.jsx)(d.xu,{maxWidth:236,paddingX:1,paddingY:2,children:(0,ee.jsx)(d.xv,{align:"center",lineClamp:1,weight:"bold",children:i||a})})]})]})})}var eM=n(657075);function eD(e){var t=e.text,n=e.isDeleted,r=e.isOwnMessage,o=e.senderName,i=(0,_.ZP)(),a=(0,b.F)().checkExperiment,l=n&&a("sg_mweb_message_deletion").anyEnabled,s=t;return l&&(s=r?i._('You deleted a message', 'ConversationPageMessage.ConversationText.DeletedMessageText.OwnMessage', 'Replaces the text of a deleted message with a message indicating that the message was deleted by the current user'):(0,y.nk)(i._('{{senderName}} deleted a message', 'ConversationPageMessage.ConversationText.DeletedMessageText.OtherUsersMessage', 'Replaces the text of a deleted message with a message indicating that the message was deleted by another user; senderName: the name of the user who sent the message'),{senderName:o})),"❤️"===t?(0,ee.jsx)(d.xu,{paddingY:2,children:(0,ee.jsx)(d.JO,{accessibilityLabel:"",color:"error",icon:"heart",size:48})}):(0,ee.jsx)(d.xu,{maxWidth:264,children:(0,ee.jsx)(d.xu,{borderStyle:!r||l?"sm":"none",color:!r||l?"default":"secondary",dangerouslySetInlineStyle:{__style:{borderStyle:n?"dashed":void 0,padding:"12px 16px",marginStart:40*!!r}},maxWidth:"100%",rounding:6,children:n?(0,ee.jsx)(d.xv,{color:"disabled",children:s}):(0,ee.jsx)(eM.Z,{linkifyTextEnabled:!0,children:(0,ee.jsx)(d.xv,{children:s})})})})}function eF(e){var t,n,r=e.userDidIt,o=(0,u.k6)(),i=(0,_.ZP)(),a=r.entityId,l=r.images150x,s=r.pin,c=r.details;if(!l||0===l.length||!s)return null;var f=l[0];return(0,ee.jsx)(ew.Z,{onTouch:function(){return o.push("/pin/".concat(s.entityId,"/activity/tried/?featured_did_it_ids=").concat(a))},pressState:"none",rounding:2,children:(0,ee.jsxs)(d.xu,{marginBottom:2,rounding:2,width:160,children:[(0,ee.jsx)(d.zd,{height:f.height||0,rounding:2,width:200,children:f.url&&(0,ee.jsx)(d.Ee,{alt:i._('User did it image', 'Image for a tried it within a conversation', 'Image for a tried it within a conversation'),fit:"cover",naturalHeight:null!=(t=f.height)?t:1,naturalWidth:null!=(n=f.width)?n:1,src:f.url})}),(0,ee.jsx)(d.xu,{paddingX:1,paddingY:2,children:(0,ee.jsx)(d.xv,{lineClamp:1,size:"100",weight:"bold",children:c||i._('People tried this Pin', 'Description for tried it message', 'Description for tried it message')})})]})})}var eZ=n(650376),eL={shortform:!0,shortform_maximum_fraction_digits:1},eN=function(e){var t=e.locale,n=e.pinCount,r=e.sectionCount,o=(0,_.ZP)(),i=(0,eZ.Z)(),a=n>0;return(0,ee.jsx)(d.xu,{paddingX:2,children:(0,ee.jsxs)(d.xv,{inline:!0,lineClamp:1,size:"100",children:[(0,y.nk)(o.ngettext('{{ count }} Pin', '{{ count }} Pins', n, 'label for n amount of pins', 'label for n amount of pins'),{count:i(t,n,eL)}),a&&!!r&&" \xb7 ",r?(0,y.nk)(o.ngettext('{{ count }} section ', '{{ count }} sections', r, 'label for n amount of sections', 'label for n amount of sections'),{count:i(t,r,eL)}):null]})})};function eU(e){return function(e){if(Array.isArray(e))return eB(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return eB(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?eB(e,t):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eB(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function eH(e){var t=e.board,n=e.locale,r=(0,u.k6)(),o=t.coverPin,i=t.name,a=t.sectionCount,l=t.url,s=t.imageCoverHdUrl,c=t.pinThumbnailUrls,f=t.pinCount,h=o&&o.imageUrl,p=[].concat(eU(s?[s]:[]),eU((c||[]).slice(+!h,h?2:3)));return(0,ee.jsxs)(ew.Z,{onTouch:function(){return r.push(null!=l?l:"")},pressState:"none",children:[(0,ee.jsx)(d.zd,{rounding:4,children:(0,ee.jsx)(d.xu,{color:"default",children:(0,ee.jsx)(d.gM,{columns:3,cover:!0,gutter:1,height:157,renderImage:function(e){var t=e.index,n=e.width,r=e.height,o=0===t?157:78;return(0,ee.jsx)(d.zd,{height:r,width:n,children:p[t]&&(0,ee.jsx)(d.Ee,{alt:"cover image",color:"#efefef",fit:"cover",naturalHeight:o,naturalWidth:o,src:p[t]})})},width:236})})}),(0,ee.jsx)(d.xu,{marginTop:1,paddingX:2,paddingY:1,children:(0,ee.jsx)(d.xv,{size:"300",weight:"bold",children:i})}),(0,ee.jsx)(eN,{locale:n,pinCount:f||0,sectionCount:a||0})]})}var eK=n(562728);function eW(e){return(eW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eY(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function eG(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var i=e.apply(t,n);function a(e){eY(i,r,o,a,l,"next",e)}function l(e){eY(i,r,o,a,l,"throw",e)}a(void 0)})}}function eV(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,l=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||eJ(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eX(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eq(e){return function(e){if(Array.isArray(e))return e$(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||eJ(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eJ(e,t){if(e){if("string"==typeof e)return e$(e,t);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e$(e,t):void 0}}function e$(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var eQ=(0,s.lazy)(function(){return Promise.all([n.e(97270),n.e(58496),n.e(7981),n.e(39165),n.e(18596)]).then(n.bind(n,239165))}),e0=void 0!==i?i:i=n(712401),e1=void 0!==a?a:a=n(921925),e2=function(e){var t=e.onTap,n=e.endPositionPx,r=e.i18n,o=e.zIndex,i=e.ref,a=(0,eP.B)().isRTL,l=(0,R.Yc)()?"https://s.pinimg.com/webapp/reaction_entrypoint_dark-662f277a.png":"https://s.pinimg.com/webapp/reaction_entry_point_light-10829fa9.png";return(0,ee.jsx)(d.iP,{accessibilityLabel:r._('Open the reaction tray', 'ConversationPage.ConversationPageMessage.OpenReactionTrayTapArea', 'Tap area to open the reaction tray to react to the message'),onTap:t,children:(0,ee.jsx)(d.xu,{ref:i,dangerouslySetInlineStyle:{__style:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eX(Object(n),!0).forEach(function(t){var r,o,i;r=e,o=t,i=n[t],(o=function(e){var t=function(e,t){if("object"!=eW(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=eW(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==eW(t)?t:t+""}(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eX(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({backgroundImage:"url(".concat(l,")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",bottom:"-24px"},a?{left:"".concat(n,"px")}:{right:"".concat(n,"px")})},height:32,position:"absolute",width:48,zIndex:o})})};function e3(e){var t,n,r,o,i,a,l=e.index,c=e.messageKey,f=e.messageContentMarginBottom,h=e.shouldRenderTimestamp,g=e.shouldRenderUserAvatar,y=e.shouldRenderUserFullName,v=e.shouldRenderPermanentEntryPointForReaction,x=e.shouldRenderPinLandSystemMessage,P=(0,G.Z)(e0,c),w=(0,A.Z)(),C=w.username,O=w.avatar_color_index,k=(0,u.k6)(),T=(0,u.TH)(),E=(0,I.Z)().deleteMessage,R=(0,eP.B)(),M=R.locale,D=R.isRTL,F=(0,j.F9)().showToast,Z=P.text,L=P.board,N=P.user,U=P.userDidItData,B=P.createdMs,H=P.sender,K=P.pin,W=(0,G.Z)(e1,K),Y=H||{},q=Y.firstName,J=Y.fullName,$=Y.imageLargeUrl,Q=Y.username,et=Q===C,en=(0,b.F)().checkExperiment,er=en("sg_mweb_threads").anyEnabled,eo=eV((0,s.useState)(2===P.deletedBy),2),ea=eo[0],el=eo[1],es=eV((0,s.useState)(!1),2),ec=es[0],eu=es[1],ed=eV((0,s.useState)(!1),2),ef=ed[0],eh=ed[1],ep=eV((0,s.useState)(!1),2),em=ep[0],eg=ep[1],e_=eV((0,s.useState)(!1),2),ey=e_[0],ev=e_[1],eb=P.reactions&&P.reactions.length>0&&P.reactions[0].reactionText,eA=eV((0,s.useState)(ea?null:eb),2),eC=eA[0],eI=eA[1];(0,s.useEffect)(function(){ea||eI(null!=eb?eb:null)},[eb,ea]);var eO=eV((0,s.useState)(!0),2),ek=eO[0],eE=eO[1],eM=(0,s.useRef)(null),eZ=(0,S.ZP)(),eL=(0,s.useRef)(Date.now()),eN=(0,_.ZP)(),eU=new d.Ry(1),eB=new d.H3([eU]),eW=new d.H3([eU]),eY=new d.H3([eU,eB,eW]),eX=(0,X.Z)(((null==T?void 0:T.state)||{}).trackingParams),eJ=function(){eg(!em)},e$=eC&&(0,ee.jsx)(d.iP,{accessibilityLabel:eN._('Open the reaction tray from the selected reaction', 'ConversationPage.ConversationPageMessage.OpenReactionTrayFromSelectedReactionTapArea', 'Tap area to open the reaction tray to react to the message when a reaction is already selected'),onTap:eJ,children:(0,ee.jsx)(d.xu,{borderStyle:"sm",color:"lightWash",dangerouslySetInlineStyle:{__style:(t="-24px",n=W?"66px":"8px",D?et?{right:n,bottom:t}:{left:n,bottom:t}:et?{left:n,bottom:t}:{right:n,bottom:t})},height:32,padding:1,position:"absolute",rounding:6,width:48,zIndex:eW,children:(r=eC&&z.nk[eC])?(0,ee.jsx)(d.Ee,{alt:r.alt,fit:"contain",naturalHeight:r.height,naturalWidth:r.width,src:r.asset}):null})}),e3="desktop"!==eZ&&!ea,e5=function(e){e3&&(er||et&&en("sg_mweb_message_deletion").anyEnabled?ec?eE(!1):(eE(!0),e.preventDefault(),e.stopPropagation(),eu(!0)):em?eE(!1):(eE(!0),e.preventDefault(),e.stopPropagation(),eJ()))},e6=function(e){var t;e3&&(t=eL.current,Date.now()-t>500)&&e5(e)},e9=[].concat(eq((null==N?void 0:N.recentPinImages)||[]),eq((null==N?void 0:N.contextualPinImageUrls)||[])).slice(0,2),e4=(0,ee.jsx)(d.xu,{alignItems:et?"end":"start",dangerouslySetInlineStyle:g||et?void 0:{__style:{left:40*!D,right:40*!!D,maxWidth:"calc(100% - 40px)"}},direction:"column",display:"flex",marginBottom:v||eC?6:0,maxWidth:"100%",onContextMenu:e5,onTouchEnd:e6,onTouchMove:e6,onTouchStart:function(e){e3&&(eL.current=Date.now(),e.preventDefault(),e.stopPropagation())},overflow:v||eC?"visible":"hidden",position:"relative",children:(0,ee.jsxs)(d.xu,{ref:eM,children:[Z&&!x&&(0,ee.jsx)(eD,{isDeleted:ea,isOwnMessage:et,senderName:q||Q||"",text:Z}),x&&(0,ee.jsx)(d.xu,{marginBottom:-2,marginEnd:D&&et?2:0,marginStart:D||et?0:2,children:(0,ee.jsx)(d.xv,{align:et?"end":"start",color:"subtle",size:"100",children:eN._('Shared off Pinterest', 'ConversationPage.ConversationPageMessage.pinLandSystemMessageText', 'Eyebrow text for Pin land system messages')})}),K&&(0,ee.jsx)(ei,{inMwebThreadsExp:er,isOwnMessage:et,pinHasText:!!Z,pinKey:K,slotIndex:l}),L&&(0,ee.jsx)(eH,{board:{coverPin:L.coverPin&&{imageUrl:L.coverPin.imageUrl},entityId:L.entityId,imageCoverHdUrl:L.imageCoverHdUrl,name:L.name,pinCount:L.pinCount,pinThumbnailUrls:L.pinThumbnailUrls,sectionCount:L.sectionCount,url:L.url},locale:M}),N&&(0,ee.jsx)(eR,{user:{entityId:N.entityId,imageLargeUrl:N.imageLargeUrl,username:N.username,fullName:N.fullName,thumbnails:e9}}),U&&(0,ee.jsx)(eF,{userDidIt:{details:U.details,entityId:U.entityId,pin:U.pin,images150x:null==(a=U.images150x)?void 0:a.map(function(e){return{height:e.height,width:e.width,url:e.url}})}}),v&&(0,ee.jsx)(e2,{endPositionPx:W?66:8,i18n:eN,onTap:eJ,zIndex:eB}),eC&&(0,ee.jsx)(s.Fragment,{children:e$})]})}),e8=g?(0,ee.jsxs)(d.kC,{alignItems:"end",direction:"row",justifyContent:"start",children:[(0,ee.jsx)(d.xu,{marginEnd:2,children:(0,ee.jsx)(ew.Z,{accessibilityLabel:eN._('View user profile', 'ConversationPage.ConversationPageMessage.ViewUserProfileTapArea', 'Tap area to redirect to the user profile of the message author'),onTouch:function(){Q&&k.push("/".concat(Q,"/"))},pressState:"none",rounding:2,children:(0,ee.jsx)(d.xu,{marginBottom:2,children:(0,ee.jsx)(ex.qE,{color:O,name:null!=J?J:"",size:"sm",src:null!=$?$:void 0})})})}),e4]}):e4,e7=(o=eG(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return eg(!1),eu(!1),n=P.entityId,r=eC,eI(t),e.prev=5,e.next=8,(0,m.Z)({url:"/v3/conversations/messages/".concat(n,"/"),method:"POST",data:{reaction_text:t}});case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),eI(r);case 13:case"end":return e.stop()}},e,null,[[5,10]])})),function(e){return o.apply(this,arguments)}),te=(i=eG(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return eh(!1),t=P.entityId,e.prev=2,e.next=5,(0,m.Z)({url:"/v3/conversations/messages/".concat(t,"/"),method:"DELETE"});case 5:E((null==(n=P.conversation)?void 0:n.entityId)||"",t),el(!0),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),F(function(t){var n=t.hideToast;return(0,ee.jsx)(ex.FN,{onHide:n,text:(0,p.Z)(e.t0,"message_detail")||(0,p.Z)(e.t0,"message")||eN._('Failed to delete message.', 'ConversationPageMessage.ConfirmDeleteMessage.errorToast.text', 'Error during message deletion'),type:"error"})});case 12:case"end":return e.stop()}},e,null,[[2,9]])})),function(){return i.apply(this,arguments)});return(0,ee.jsxs)(s.Fragment,{children:[0===l&&(0,ee.jsx)(d.xu,{minHeight:z.fc}),em&&(em?(0,ee.jsx)(d.mh,{zIndex:eY,children:(0,ee.jsx)(d.J2,{anchor:eM.current,idealDirection:"up",onDismiss:function(){return eg(!1)},size:"flexible",children:(0,ee.jsx)(eT,{handleReactionTrayClick:e7})})}):null),ec&&(0,ee.jsx)(ez,{handleDeleteClick:function(){eh(!0)},handleReactionClick:e7,handleShareClick:function(){return ev(!0)},message:P,onDismiss:function(){return eu(!1)},pinKey:K}),ef&&(0,ee.jsx)(eS,{handleCancel:function(){eh(!1)},handleConfirm:te}),(0,ee.jsxs)(d.xu,{dangerouslySetInlineStyle:{__style:ek?{WebkitTouchCallout:"none",WebkitUserSelect:"none",MozUserSelect:"none",MsUserSelect:"none",KhtmlUserSelect:"none",UserSelect:"none"}:{}},"data-test-id":"message-item-container",direction:"row",display:"flex",marginBottom:f,children:[et&&(0,ee.jsx)(d.xu,{flex:"grow"}),0===l&&et?(0,ee.jsx)(d.xu,{direction:"column",display:"flex",maxWidth:"100%",overflow:"hidden",position:"relative",children:(0,ee.jsx)(ej.Z,{children:e8})}):e8]}),y&&(0,ee.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{left:40,maxWidth:"calc(100% - 40px)"}},marginBottom:1,maxWidth:"100%",children:(0,ee.jsx)(d.xv,{color:"default",lineClamp:1,size:"100",children:J})}),h&&(0,ee.jsx)(d.xu,{display:"flex",justifyContent:"center",paddingY:8,width:"100%",children:(0,ee.jsx)(d.xv,{color:"subtle",size:"100",children:B&&(0,eK.Z)(B,M)})}),!!W&&ey&&(0,ee.jsx)(V.Z,{children:(0,ee.jsx)(eQ,{clientTrackingParams:eX,component:55,element:98,isOpen:!0,objectId:W.entityId,objectType:1,onDismiss:function(){ev(!1)},viewParameter:203,viewType:42})})]})}var e5=n(706688);function e6(e){return(e6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e9(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e4(e){var t=e.messages,n=e.viewerId;if(!n)return null;for(var r=0;r<t.length;r+=1){var o=t[r];if(o){var i,a=null==(i=o.sender)?void 0:i.entityId;if(2!==o.deletedBy&&a!==n)return t[r].entityId.toString()}}return null}var e8=void 0!==l?l:l=n(187407);function e7(e){var t=e.graphqlRef,n=(0,K.useFragment)(e8,t),r=(0,e5.Z)({messages:n.map(function(e){return{createdMs:e.createdMs,sender:e.sender,messageType:e.messageType,hasPin:!!e.pin}})}),o=r.shouldRenderUserAvatarForIndex,i=r.shouldRenderUserFullNameForIndex,a=r.shouldRenderTimestampForIndex,l=r.messageContentMarginBottom,c=r.shouldRenderPinLandSystemMessageForIndex,u=(0,b.F)().checkExperiment,d=e4({messages:n,viewerId:(0,A.Z)().id});return(0,ee.jsx)(s.Fragment,{children:n.map(function(e,t){return(0,ee.jsx)(e3,{index:t,messageContentMarginBottom:l(t),messageKey:{type:"graphqlRef",data:e},shouldRenderPermanentEntryPointForReaction:e.entityId===d,shouldRenderPinLandSystemMessage:c(t,u,!0),shouldRenderTimestamp:a(t),shouldRenderUserAvatar:o(t),shouldRenderUserFullName:i(t,u,!0)},e.entityId)})})}function te(e){var t,n=e.conversationId,r="222x",o=((null==(t=(0,C.Z)(n))?void 0:t.messages)||[]).slice().reverse().map(function(e){var t,n,o,i,a,l,s,c,u,d,f,h,p,m,g,_,y,v,b,x,P,w,j,S,A,C,I,O,k,T;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e9(Object(n),!0).forEach(function(t){var r,o,i;r=e,o=t,i=n[t],(o=function(e){var t=function(e,t){if("object"!=e6(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=e6(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==e6(t)?t:t+""}(o))in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e9(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({legacyData:e,board:e.board?{coverPin:{imageUrl:null==(t=e.board.cover_pin)?void 0:t.image_url},entityId:null!=(n=e.board.id)?n:"",imageCoverHdUrl:null!=(o=e.board.image_cover_hd_url)?o:null,name:null!=(i=e.board.name)?i:null,pinCount:null!=(a=e.board.pin_count)?a:null,pinThumbnailUrls:null!=(l=e.board.pin_thumbnail_urls)?l:null,sectionCount:null!=(s=e.board.section_count)?s:null,url:null!=(c=e.board.url)?c:null}:null,createdMs:null!=(u=e.created_ms.toString())?u:null,deletedBy:null!=(d=e.deleted_by)?d:null,entityId:null!=(f=e.id)?f:"",pin:null!=(h=null==(p=e.pin)?void 0:p.id)?h:"",hasPin:(m=!!e.pin,m),messageType:e.message_type,sender:e.sender?{entityId:null!=(g=e.sender.id)?g:"",firstName:null!=(_=e.sender.first_name)?_:null,fullName:null!=(y=e.sender.full_name)?y:null,imageLargeUrl:null!=(v=e.sender.image_large_url)?v:null,username:null!=(b=e.sender.username)?b:null}:null,text:null!=(x=e.text)?x:null,user:e.user?{entityId:null!=(P=e.user.id)?P:"",username:null!=(w=e.user.username)?w:null,fullName:null!=(j=e.user.full_name)?j:null,imageLargeUrl:null!=(S=e.user.image_large_url)?S:null,recentPinImages:null!=(A=e.user.recent_pin_images)&&A[r]?e.user.recent_pin_images[r].map(function(e){var t,n,r;return{height:null!=(t=e.height)?t:null,url:null!=(n=e.url)?n:null,width:null!=(r=e.width)?r:null}}):null,contextualPinImageUrls:null!=(C=e.user)&&null!=(I=C.contextual_pin_image_urls)&&I[r]?e.user.contextual_pin_image_urls[r].map(function(e){var t,n,r;return{height:null!=(t=e.height)?t:null,url:null!=(n=e.url)?n:null,width:null!=(r=e.width)?r:null}}):null}:null,userDidItData:e.user_did_it_data?{details:null!=(O=e.user_did_it_data.details)?O:null,entityId:null!=(k=e.user_did_it_data.id)?k:"",pin:e.user_did_it_data.pin?{entityId:e.user_did_it_data.pin.id}:null,images150x:e.user_did_it_data.images?e.user_did_it_data.images.map(function(e){var t,n,r;return{height:null!=(t=e["150x150"].height)?t:null,width:null!=(n=e["150x150"].width)?n:null,url:null!=(r=e["150x150"].url)?r:null}}):null}:null,reactions:null!=(T=e.reactions)?T:null},eb.tx)}),i=(0,e5.Z)({messages:o.map(function(e){var t,n=e.createdMs,r=e.sender,o=e.messageType,i=e.hasPin;return{createdMs:n,sender:{entityId:null!=(t=null==r?void 0:r.entityId)?t:""},messageType:o,hasPin:i}})}),a=i.shouldRenderUserAvatarForIndex,l=i.shouldRenderUserFullNameForIndex,c=i.shouldRenderTimestampForIndex,u=i.messageContentMarginBottom,d=i.shouldRenderPinLandSystemMessageForIndex,f=(0,b.F)().checkExperiment,h=e4({messages:o,viewerId:(0,A.Z)().id});return(0,ee.jsx)(s.Fragment,{children:o.map(function(e,t){return(0,ee.jsx)(e3,{index:t,messageContentMarginBottom:u(t),messageKey:{type:"deprecated",data:e.legacyData},shouldRenderPermanentEntryPointForReaction:e.entityId===h,shouldRenderPinLandSystemMessage:d(t,f,!0),shouldRenderTimestamp:c(t),shouldRenderUserAvatar:a(t),shouldRenderUserFullName:l(t,f,!0)},e.entityId)})})}function tt(e){var t=e.dataKey;return"graphqlRef"===t.type?(0,ee.jsx)(e7,{graphqlRef:t.data}):(0,ee.jsx)(te,{conversationId:t.data})}var tn=n(396232);function tr(e){return(tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function to(e){return function(e){if(Array.isArray(e))return ti(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ti(e,void 0);var n=({}).toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ti(e,t):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ta(e,t){return(ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function tl(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ts(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ts=function(){return!!e})()}function tc(e){return(tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tu(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function tf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?td(Object(n),!0).forEach(function(t){th(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function th(e,t,n){return(t=tp(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tp(e){var t=function(e,t){if("object"!=tr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tr(r))return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tr(t)?t:t+""}var tm=new d.H3([new d.Ry(1)]);function tg(e){var t=e.conversationId,n=e.user,r=e.isPreview,o=e.handleCancel,i=(0,_.ZP)(),a=(0,c.I0)(),l=(0,j.F9)().showToast,s=(0,I.Z)().conversationDelete,d=(0,u.k6)(),p=(0,h.Z)();return(0,ee.jsx)(E.Z,tf(tf({},{handleBlock:function(){a((0,T.Ge)({id:n.id,blockSource:"message_report",blockContext:t,logContextEvent:p})),r||s(null!=t?t:"")},handleCancel:o,handleReport:function(e){f.Z.create("ConversationReportResource",{conversation_id:t,reason:e}).callCreate().then(function(){var e=i._('Thanks! Your feedback helps keep Pinterest safe.', 'conversationPage.UserReportedToast', 'Confirmation toast after user is report');l(function(t){var n=t.hideToast;return(0,ee.jsx)(g.Z,{onHide:n,text:e})})},function(){})},handleSubmit:function(){d.push("/inbox/")}}),{},{conversationId:t,userToBlock:{blockedByMe:n.blocked_by_me,fullName:n.full_name,id:n.id,username:n.username||""}}))}function t_(e){var t,n,r=e.inviteItem,o=e.firstUsername,i=e.countOfOtherUsers,a=(0,_.ZP)(),l=(0,j.F9)().showToast,s=(0,u.k6)(),f=r.id||"",h=(0,c.I0)(),v=(t=regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.Z)({url:"/v3/contact_requests/".concat(f,"/accept/"),method:"POST"});case 3:h((0,O.A)([f])),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),l(function(t){var n,r=t.hideToast;return(0,ee.jsx)(g.Z,{onHide:r,text:null!=(n=(0,p.Z)(e.t0,"message"))?n:""})});case 9:case"end":return e.stop()}},e,null,[[0,6]])}),n=function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function a(e){tu(i,r,o,a,l,"next",e)}function l(e){tu(i,r,o,a,l,"throw",e)}a(void 0)})},function(){return n.apply(this,arguments)});return(0,ee.jsx)(d.xu,{bottom:!0,position:"absolute",width:"100%",zIndex:tm,children:(0,ee.jsxs)(d.xu,{borderStyle:"shadow",color:"default",direction:"column",display:"flex",marginBottom:4,marginEnd:4,marginStart:4,paddingX:6,rounding:4,children:[(0,ee.jsx)(d.xu,{paddingY:4,children:(0,ee.jsx)(d.xv,{align:"center",size:"300",children:(0,y.nk)(a._('It looks like this is the first time you\u2019ve heard from {{firstName}}{{otherUsersString}} \u2013 be careful if they ask for confidential information.', 'mobile_contact_request_modal_header', 'Mobile modal header text in conversation page warning users before accepting or declining a contact request from {{firstName}}'),{firstName:o,otherUsersString:i>0?" + ".concat(i):null})})}),(0,ee.jsx)(d.xu,{marginBottom:6,children:(0,ee.jsx)(d.xu,{marginEnd:2,children:(0,ee.jsxs)(d.kC,{alignItems:"center",gap:{row:2,column:0},justifyContent:"center",children:[(0,ee.jsx)(d.zx,{accessibilityLabel:a._('Decline', 'InviteSubSection.InviteSubSectionItem.declineButton', 'Button when pressed declines request'),onClick:function(){f&&(h((0,O.O)(f,!0,!1)),h((0,k.C)(f)),s.push("/inbox/"))},size:"lg",text:a._('Decline', 'InviteSubSection.InviteSubSectionItem.declineButton', 'Button when pressed declines request')}),(0,ee.jsx)(d.zx,{accessibilityLabel:a._('Accept', 'InviteSubSection.InviteSubSectionItem.acceptButton', 'Button when pressed accepts request'),color:"red",onClick:function(){v()},size:"lg",text:a._('Accept', 'InviteSubSection.InviteSubSectionItem.acceptButton', 'Button when pressed accepts request')})]})})})]})})}var ty=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&ta(o,e);var t,n,r=(t=ts(),function(){var e,n=tc(o);return e=t?Reflect.construct(n,arguments,tc(this).constructor):n.apply(this,arguments),function(e,t){if(t&&("object"==tr(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return tl(e)}(this,e)});function o(e){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return th(tl(t=r.call(this,e)),"state",{displayReportModal:!1,shouldPollNewMessages:!0}),t.scrollerRef=(0,s.createRef)(),t}return n=[{key:"componentDidUpdate",value:function(){var e=this.props,t=e.isResourceLoaded,n=e.conversation,r=e.resetConversationPosition,o=e.conversationId,i=e.checkExperiment,a=e.history;if(t&&!n?a.push("/inbox/"):t&&(i("social_experience_holdout_2025_h1"),i("ce_project_habit_holdout_2025_h1"),i("inclusive_holdout_2025")),n){var l=n.position,s=this.scrollerRef.current;s&&"number"==typeof l&&(s.scrollTop=l,r(o))}}},{key:"componentWillUnmount",value:function(){var e,t=this.props,n=t.conversationId,r=t.saveConversationPosition,o=null==(e=this.scrollerRef.current)?void 0:e.scrollTop;"number"==typeof o&&r(n,o)}},{key:"render",value:function(){var e=this,t=this.props,n=t.checkExperiment,r=t.conversation,o=t.conversationId,i=t.emails,a=t.inviteItem,l=t.users,s=t.hasNext,c=t.loadMore,u=t.isLoadingNext,f=this.state,h=f.displayReportModal,p=f.shouldPollNewMessages,m=n("sg_mweb_message_deletion",{dangerouslySkipActivation:!0}).anyEnabled,g=[].concat(to(l.map(function(e){var t=e.first_name,n=e.full_name,r=e.image_large_url,o=e.is_default_image,i=e.username;return{defaultDisplayName:null!=t?t:"",fullName:null!=n?n:"",username:null!=i?i:"",src:o?"":null!=r?r:void 0}})),to(i.map(function(e){return{defaultDisplayName:e,fullName:e,username:"",src:void 0}})));return(0,ee.jsx)(v.default,{hasFixedHeader:!0,children:(0,ee.jsxs)(d.xu,{bottom:!0,left:!0,maxHeight:"100vh",position:"fixed",right:!0,top:!0,children:[r&&(0,ee.jsx)(ev,{onReport:l.length>0?function(){return e.setState({displayReportModal:!h})}:null,recipients:g}),p&&(0,ee.jsx)(tn.Z,{delay:z.yc,name:"ConversationMessagesResource",options:{conversation_id:o,page_size:25,refresh:!1,hide_sys_msg:!0,field_set_key:[m?"default_with_reactions_and_deleted_by":"default_with_reactions"]}}),(0,ee.jsx)(d.xu,{dangerouslySetInlineStyle:{__style:{flexDirection:"column-reverse"}},display:"flex",flex:"grow",maxHeight:"100%",paddingX:2,children:(0,ee.jsxs)(d.xu,{ref:this.scrollerRef,dangerouslySetInlineStyle:{__style:{flexDirection:"column-reverse",border:"1px solid transparent"}},"data-test-id":"messages-container",display:"flex",maxHeight:"100%",onScroll:(0,w.Z)(function(){var t=e.scrollerRef.current;if(t){var n=t.scrollHeight,r=t.scrollTop,o=t.clientHeight;!u&&s&&r+n<=o+z.gq&&c()}},z.DE),overflow:"scrollY",paddingX:2,width:"100%",children:[(0,ee.jsx)(tt,{dataKey:{type:"deprecated",data:o}}),(0,ee.jsxs)(d.xu,{direction:"column",display:"flex",justifyContent:"center",padding:2,children:[u&&s&&(0,ee.jsx)(d.xu,{height:z.br}),(0,ee.jsx)(d.xH,{accessibilityLabel:this.props.i18n._('Loading More Conversation Messages', 'ConversationPage.ConversationMessages.Spinner', 'Spinner that shows when users scroll up to fetch more messages'),show:u&&s})]}),!u&&!s&&(0,ee.jsx)(ed.Z,{recipients:g})]})}),r&&a?(0,ee.jsx)(t_,{countOfOtherUsers:l.length-1,firstUsername:l[0]&&l[0].username||"",inviteItem:a}):(0,ee.jsx)(eu,{conversationId:o,pauseMessagePolling:function(){return e.setState({shouldPollNewMessages:!1})},resumeMessagePolling:function(){return e.setState({shouldPollNewMessages:!0})},scrollToBottom:function(){var t;return null==(t=e.scrollerRef.current)?void 0:t.scrollIntoView({behavior:"smooth"})}}),h&&!!l[0]&&(0,ee.jsx)(tg,{conversationId:o,handleCancel:function(){return e.setState({displayReportModal:!1})},isPreview:!!(r&&a),user:l[0]})]})})}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,tp(r.key),r)}}(o.prototype,n),Object.defineProperty(o,"prototype",{writable:!1}),o}(s.PureComponent);function tv(){var e=(0,_.ZP)(),t=(0,u.k6)(),n=(0,A.Z)().id,r=(0,b.F)().checkExperiment,o=r("sg_mweb_message_deletion",{dangerouslySkipActivation:!0}).anyEnabled,i=(0,u.$B)().params.conversation_id||"",a=(0,x.Z)({name:"ContactRequestsResource",options:{current_user:!0}}).isFetching,l=(0,x.Z)({name:"ConversationResource",options:{conversation_id:i}}).isFetching,s=(0,x.Z)({name:"ConversationMessagesResource",options:{conversation_id:i,page_size:25,hide_sys_msg:!0,field_set_key:[o?"default_with_reactions_and_deleted_by":"default_with_reactions"]}}).isFetching,d=(0,c.v9)(function(e){return Object.values(e.contactRequests||{}).find(function(e){return e.conversation&&e.conversation.id===i})}),f=(0,C.Z)(i),h=(0,I.Z)(),p=h.saveConversationPosition,m=h.resetConversationPosition,g=(null==f?void 0:f.emails)||[],y=((null==f?void 0:f.users)||[]).filter(Boolean).filter(function(e){return e.id!==n}),v=(0,x.Z)({name:"ConversationMessagesResource",options:{conversation_id:i,page_size:25,hide_sys_msg:!0,field_set_key:[o?"default_with_reactions_and_deleted_by":"default_with_reactions"]}}),w=v.isFetching,j=v.fetchMore,S=v.isAtEnd;return(0,ee.jsx)(P.Z,{children:(0,ee.jsx)(ty,{checkExperiment:r,conversation:f,conversationId:i,emails:g,hasNext:!S,history:t,i18n:e,inviteItem:d,isLoadingNext:w,isResourceLoaded:!l&&!a&&!s,loadMore:j,resetConversationPosition:m,saveConversationPosition:p,users:y})})}var tb=function(){var e=(0,S.HG)();return!(0,A.Z)().isAuth||e?(0,ee.jsx)(u.l_,{to:"/"}):(0,ee.jsx)(tv,{})}},790858:function(e,t,n){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/conversation/[conversation_id]",function(){return n(764652).Z}])},517907:function(e){e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},261363:function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},788795:function(e,t,n){var r=n(15403);e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},15403:function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}},function(e){e.O(0,[97270,32227,76175,8789,75114,59514,46611,62119,56171,17816,88248,17639,45602,33443],function(){return e(e.s=790858)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/conversation/[conversation_id]-88c58e9e8d4aefc2.js.map