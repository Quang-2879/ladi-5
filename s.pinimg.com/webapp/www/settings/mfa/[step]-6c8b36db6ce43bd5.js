(self.legacyJsonp=self.legacyJsonp||[]).push([[34419],{892671:function(e,t,r){"use strict";r.d(t,{Q:function(){return d},Z:function(){return f}});var n=r(258712),o=r(219308),i=r(718369),a=r(23084),l=r(174646);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var n,o,i;n=e,o=t,i=r[t],(o=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=s(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e,t){var r=(0,i.sV)().setViewContextData,s=(0,l.B)().requestIdentifier,c=(0,o.Z)(),d=(0,i.SU)().viewData;(0,n.useEffect)(function(){if(e){var t;r({viewType:null!=(t=e.view_type)?t:1,viewParameter:e.view_parameter,viewData:e.view_data?(0,a.Z)(d,e.view_data):d,component:e.component,element:e.element,objectIdStr:e.object_id_str,auxData:e.aux_data,clientTrackingParams:e.clientTrackingParams}),c(u(u({},e),{},{event_type:13,request_identifier:s}))}},[t])}function f(e){var t=e.children;return d(e.log),t||null}},487876:function(e,t){"use strict";t.Z=function(e){return"confirmed"===e}},23084:function(e,t,r){"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,{Z:function(){return function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},l=a(t,r);return void 0!==l?l:void 0===r?t:Array.isArray(t)&&Array.isArray(r)?r.reduce(function(t,n,o){return t[o]=e(t[o],r[o],a),t},function(e){if(Array.isArray(e))return i(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return i(e,void 0);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):t&&"object"===o(t)&&r&&"object"===o(r)?Object.keys(r).reduce(function(t,n){return t[n]=e(t[n],r[n],a),t},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t)):r}}})},160764:function(e,t,r){"use strict";r.d(t,{i:function(){return a},x:function(){return l}});var n=r(693806);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r){var n;return(n=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"),(t="symbol"==o(n)?n:n+"")in e)?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=["shopping_rec_disabled","featureMap","comments_disabled","allow_mentions","messaging_permissions","opt_in_private_account","ads_customize_from_conversion","personalize_from_offsite_browsing","third_party_marketing_tracking_enabled","ccpa_opted_out","third_party_ads_personalization","video_rec_enabled"];function l(e){var t,r=e.apiErrorCode,o=e.onShowMessage,a=e.onPassCodeRequired,l=e.onPassCodeSkipConfirmation;r&&((i(t={},n.RR,o),i(t,n.mX,a),i(t,n.q6,l),t)[r]||o)()}},732070:function(e,t,r){"use strict";r.d(t,{aU:function(){return l},hq:function(){return a},o_:function(){return o}});var n=(0,r(218291).Z)("AuthenticationContext"),o=n.Provider,i=n.useHook;function a(){return i().loginContext}function l(){return i().logout}},645222:function(e,t,r){"use strict";r.d(t,{i:function(){return n}});var n={REGISTRATION:"registration",SETTINGS:"settings",GOOGLE_PEOPLE_API:"google_people_api",HOLISTIC_PROFILE_PROMPT:"holistic_profile_prompt",IN_APP_BIRTHDAY_PROMPT:"in_app_birthday_prompt",FIX_EMAIL_PROMPT:"fix_email_prompt",NUX:"nux",BUSINESS_HUB:"business_hub",UNKNOWN:"unknown"}},268952:function(e,t,r){"use strict";r.d(t,{Z:function(){return q}});var n=r(258712),o=r(284987),i=r(487876),a=r(231333),l=r(233846),s=r(864339),c=r(113474),u=r(339908),d=r(538645),f=r(132227),_=r(219308),m=r(892671),h=r(51340),p=r(540547),y=r(572478),g=r(866523),b=r(19035);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=e.userEmail,r=e.afterEmailValidated,o=e.viewParameter,i=e.viewType,a=(0,l.ZP)(),s=(0,_.Z)(),c=v((0,n.useState)(""),2),u=c[0],d=c[1],x=v((0,n.useState)(""),2),A=x[0],j=x[1],C=v((0,n.useState)(!1),2),P=C[0],w=C[1];return(0,m.Q)({view_type:i,view_parameter:o}),(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)(p.default,{zIndexForGestaltBug:2,children:(0,b.jsx)(g.default,{heading:a._('Two-factor authentication', 'settings.MFA.Enable.ConfirmEmail.header', 'Header for the disable 2fa flow page'),legoSettingsEnabled:!0})}),(0,b.jsxs)(f.kC,{direction:"column",flex:"grow",justifyContent:"between",children:[(0,b.jsxs)(f.xu,{marginBottom:10,children:[(0,b.jsxs)(f.xu,{"data-test-id":"confirm-email-2fa",marginBottom:11,paddingX:4,children:[(0,b.jsx)(f.xu,{marginBottom:2,children:(0,b.jsx)(f.__,{htmlFor:"confirmEmail",children:(0,b.jsx)(f.X6,{accessibilityLevel:2,align:"center",size:"600",children:A.length?a._('Hmm...another try?', 'settings.MFA.ConfirmEmail.Title.error', 'Title for the enable 2fa flow page - Confirm your email step'):a._('Confirm your email', 'settings.MFA.ConfirmEmail.Title', 'Title for the enable 2fa flow page - Confirm your email step')})})}),(0,b.jsx)(f.xu,{marginBottom:10,children:(0,b.jsx)(f.xv,{align:"center",size:"200",children:A.length?a._('To set up 2FA, enter the email connected to your Pinterest account', 'settings.MFA.Enable.ConfirmEmail.Description.error', 'Description of the enable 2fa flow page - Confirm your email step'):a._('In order to maintain access to your account please confirm your email', 'settings.MFA.Enable.ConfirmEmail.Description', 'Description of the enable 2fa flow page - Confirm your email step')})})]}),(0,b.jsx)(f.xu,{paddingX:2,children:(0,b.jsx)(f.xu,{marginBottom:2,position:"relative",children:(0,b.jsx)(f.nv,{errorMessage:A,id:"confirmEmail",label:a._('Email', 'settings.MFA.Enable.ConfirmEmail.input.label', 'Input label for the Email field on confirm email page at 2fa enable flow'),onChange:function(e){return d(e.value)},placeholder:a._('Enter your email', 'settings.MFA.Enable.ConfirmEmail.input.placeholder', 'Input placeholder for the Email field on confirm email page at 2fa enable flow'),size:"lg",type:"text",value:u})})})]}),(0,b.jsx)(f.xu,{paddingX:2,paddingY:4,children:(0,b.jsx)(f.zx,{color:"red",disabled:!u||!u.length||P,fullWidth:!0,onClick:function(){if(s({view_type:i,view_parameter:o,element:96,event_type:102}),w(!0),!u.match(y.C)){j(a._('Not a valid email.', 'profile.Settings.Edit.Email.Error.Shouldnt.Match.Username', 'Error message while changing email, when email matches username')),w(!1);return}u.toLowerCase()===t.toLowerCase()?(s({view_type:i,view_parameter:o,event_type:10247}),r()):(s({view_type:i,view_parameter:o,element:13332,event_type:13}),j((0,h.nk)(a._('{{ UpdateEmailLink }} in account settings.', 'settings.MFA.Enable.ConfirmEmail.errorMessage', 'Error message to be displayed if the user email wont match against the one typed. UpdateEmailLink: link to the Pinterest account management page'),{UpdateEmailLink:(0,b.jsx)(f.rU,{display:"inlineBlock",href:"/settings/account-settings/",onClick:function(){s({view_type:i,view_parameter:o,element:13333,event_type:102})},target:"self",underline:"none",children:(0,b.jsx)("strong",{children:a._('Update your email address', 'settings.MFA.Enable.ConfirmEmail.errorMessage.link', 'Text for link to account management page')})},"updateEmailLink")})),w(!1))},text:a._('Next', 'settings.MFA.Enable.ConfirmEmail.SendButton', 'CTA to submit password on confirm email page at 2fa flow')})})]})]})},j=r(397657),C=r(174646);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var S=(0,n.createContext)(),E=(0,n.createContext)();function O(e){var t=e.children,r=P((0,n.useState)("confirm-password"),2),o=r[0],i=r[1],a=P((0,n.useState)(!1),2),l=a[0],s=a[1],c=P((0,n.useState)(""),2),u=c[0],d=c[1],f=P((0,n.useState)(""),2),_=f[0],m=f[1],h=(0,n.useMemo)(function(){return{currentStep:o,isEmailValid:l,countryCode:_,countryPhoneCode:u}},[o,l,_,u]),p=(0,n.useMemo)(function(){return{setCurrentStep:i,setIsEmailValid:s,setCountryCode:m,setCountryPhoneCode:d}},[]);return(0,b.jsx)(S,{value:h,children:(0,b.jsx)(E,{value:p,children:t})})}function z(){var e=(0,n.useContext)(S);if(void 0===e)throw Error("useMfaState must be used within a MfaStateContext");return e}function I(){var e=(0,n.useContext)(E);if(void 0===e)throw Error("useMfaUpdater must be used within a MfaStateContext");return e}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?F(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){var t=e.afterPhoneNumberSubmit,r=e.onCountryCodeTouch,o=e.password,i=e.userEmail,a=(0,l.ZP)(),s=(0,_.Z)(),c=(0,C.B)().isRTL,u=z().countryPhoneCode,d=M((0,n.useState)(""),2),m=d[0],h=d[1],y=M((0,n.useState)([]),2),v=y[0],x=y[1],A=M((0,n.useState)(!1),2),P=A[0],w=A[1];return(0,n.useEffect)(function(){s({event_type:13,view_type:562,view_parameter:3730})},[s]),(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)(p.default,{zIndexForGestaltBug:2,children:(0,b.jsx)(g.default,{heading:a._('Step 2 of 3', 'settings.MFA.Enable.AddPhoneNumber.header', 'Step counter for the enable 2fa flow page'),legoSettingsEnabled:!0})}),(0,b.jsxs)(f.kC,{direction:"column",flex:"grow",justifyContent:"between",children:[(0,b.jsxs)(f.xu,{marginBottom:10,children:[(0,b.jsxs)(f.xu,{"data-test-id":"add-phone-number-2fa",marginBottom:11,paddingX:10,children:[(0,b.jsx)(f.xu,{marginBottom:2,children:(0,b.jsx)(f.X6,{accessibilityLevel:2,align:"center",size:"600",children:a._('Add phone number', 'settings.MFA.AddPhoneNumber.Title', 'Title of the Add phone number step on 2fa flow')})}),(0,b.jsx)(f.xu,{children:(0,b.jsx)(f.xv,{align:"center",size:"200",children:a._('This is where we\u2019ll text your login security codes', 'settings.MFA.AddPhoneNumber.Description', 'Description of the  Add phone number step on 2fa flow')})})]}),(0,b.jsxs)(f.xu,{paddingX:2,children:[(0,b.jsxs)(f.xu,{marginBottom:4,children:[(0,b.jsx)(f.xu,{marginBottom:2,children:(0,b.jsx)(f.xv,{align:"center",size:"200",children:a._('Country code', 'settings.MFA.AddPhoneNumber.countryCodeField', 'Country code for the add phone number step on 2fa flow')})}),(0,b.jsx)(f.iP,{onTap:function(e){var t=e.event;t.preventDefault(),t.stopPropagation(),s({view_type:562,view_parameter:3730,element:12921,event_type:102}),r()},children:(0,b.jsxs)(f.kC,{alignItems:"center",justifyContent:"center",children:[(0,b.jsx)(f.xu,{marginEnd:2,children:u?(0,b.jsx)(f.xv,{size:"400",children:u}):(0,b.jsx)(f.xv,{color:"subtle",size:"400",children:a._('Choose', 'settings.MFA.AddPhoneNumber.countryCode.Placeholder', 'Placeholder for the countryCode field')})}),(0,b.jsx)(f.xu,{left:c,right:!c,children:(0,b.jsx)(f.JO,{accessibilityLabel:a._('Go to Country code selection Page to select the country code for your phone number', 'settings.MFA.AddPhoneNumber.goToCountryCodeSelection', 'Accessibility label for the icon that redirect the user to the country code selection page'),color:"default",icon:"arrow-forward"})})]})})]}),(0,b.jsxs)(f.xu,{children:[(0,b.jsx)(f.xu,{marginBottom:2,children:(0,b.jsx)(f.__,{htmlFor:"phoneNumber",children:(0,b.jsx)(f.xv,{align:"center",size:"200",children:a._('Phone', 'settings.MFA.AddPhoneNumber.phoneField', 'Phone Field for the add phone number step on 2fa flow')})})}),(0,b.jsx)(f.nv,{errorMessage:v[0],id:"phoneNumer",onChange:function(e){return h(e.value)},placeholder:a._('Phone number', 'AddPhoneNumberStep.TextField.PhoneNumber', 'placeholder text for phone number'),size:"lg",type:"tel",value:m})]})]})]}),(0,b.jsx)(f.xu,{paddingX:2,paddingY:4,children:(0,b.jsx)(f.zx,{color:"red",disabled:!m||!m.length||!u||P,fullWidth:!0,onClick:function(){s({view_type:562,view_parameter:3730,element:96,event_type:102}),w(!0),x([]),(0,j.Z)({url:"/v3/users/settings/mfa/",method:"POST",data:{password:o,number:m,country:u,email_input:i}}).then(function(){return t("".concat(u).concat(m))},function(e){w(!1),x([e.message])})},text:a._('Next', 'settings.MFA.Enable.ConfirmPassword.SendButton', 'CTA to submit password on confirm password page at 2fa flow')})})]})]})},N=r(887224),D=r(547504),R=r(18644),k=r(943369);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var U=function(e){var t,r=e.password,o=e.phoneNumber,i=e.userEmail,s=e.afterVerificationCodeSubmit,c=(0,l.ZP)(),d=(0,u.F9)().showOneToast,m=(0,_.Z)(),y=c._('Sorry, something went wrong', 'settings.MFA.ConfirmVerificationCode.toast.error', 'Default toast message for error when trying to resend the verification code'),v=c._('Code resent!', 'settings.MFA.ConfirmVerificationCode.toast.codeResent', 'Default toast message for code resend'),x=B((0,n.useState)(""),2),A=x[0],C=x[1],P=B((0,n.useState)([]),2),w=P[0],S=P[1],E=B((0,n.useState)(!1),2),O=E[0],z=E[1],I=B((0,n.useState)(!1),2),M=I[0],F=I[1];return((0,n.useEffect)(function(){m({event_type:13,view_type:562,view_parameter:3731})},[m]),O)?(0,b.jsx)(f.kC,{alignContent:"center",alignItems:"stretch",direction:"column",height:"100vh",justifyContent:"center",width:"100vw",children:(0,b.jsxs)(f.xu,{children:[(0,b.jsx)(f.xu,{marginBottom:10,children:(0,b.jsx)(f.xH,{accessibilityLabel:c._('Verifying if code is valid', 'settings.MFA.ConfirmVerificationCode.verifyingCode.loading', 'Loading state for when the verification code is sent and is being validated'),show:!0})}),(0,b.jsx)(f.xv,{align:"center",size:"400",weight:"bold",children:c._('Verifying...', 'settings.MFA.ConfirmVerificationCode.verifyingCode.text', 'Loading state Title for when the verification code is sent and is being validated')})]})}):(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)(p.default,{zIndexForGestaltBug:2,children:(0,b.jsx)(g.default,{heading:c._('Step 3 of 3', 'settings.MFA.Enable.ConfirmVerificationCode.header', 'Step counter for the enable 2fa flow page'),legoSettingsEnabled:!0})}),(0,b.jsx)(f.kC,{direction:"column",flex:"grow",justifyContent:"between",children:(0,b.jsxs)(f.xu,{marginBottom:10,children:[(0,b.jsxs)(f.xu,{"data-test-id":"confirm-verification-code-2fa",marginBottom:11,paddingX:5,children:[(0,b.jsx)(f.xu,{marginBottom:2,children:(0,b.jsx)(f.__,{htmlFor:"verificationCode",children:(0,b.jsx)(f.X6,{accessibilityLevel:2,align:"center",size:"600",children:c._('Enter verification code', 'settings.MFA.ConfirmVerificationCode.Title', 'Title of the Enter verification code step on 2fa flow')})})}),(0,b.jsx)(f.xu,{marginBottom:10,paddingX:8,children:(0,b.jsx)(f.xv,{align:"center",size:"200",children:(0,h.nk)(c._('Now enter the code we just texted to {{ phoneNumber }}.', 'settings.MFA.ConfirmVerificationCode.Description', 'Description of the Enter verification code step on 2fa flow phoneNumber:User masked phone number from previous step'),{phoneNumber:(t=o.substr(o.length-3),"XXXX".concat(t))})})})]}),(0,b.jsxs)(f.xu,{paddingX:2,children:[(0,b.jsx)(f.xu,{marginBottom:2,position:"relative",children:(0,b.jsx)(f.nv,{errorMessage:w[0],id:"verificationCode",onChange:function(e){return C(e.value)},size:"lg",type:"text",value:A})}),(0,b.jsx)(f.xu,{children:(0,b.jsx)(f.xu,{children:(0,b.jsx)(f.kC,{alignContent:"center",direction:"column",children:(0,b.jsx)(f.xu,{alignSelf:"center",width:150,children:(0,b.jsx)(f.iP,{disabled:M||O,onTap:function(){M||(C(""),F(!0),m({view_type:562,view_parameter:3731,element:12920,event_type:102}),(0,j.Z)({url:"/v3/users/settings/mfa/resend/",method:"POST"}).then(function(e){F(!1);var t=(e.resource_response.data||{}).message||v;d(function(e){var r=e.hideToast;return(0,b.jsx)(a.Z,{onHide:r,text:t})})},function(e){F(!1),d(function(t){var r=t.hideToast;return(0,b.jsx)(a.Z,{onHide:r,text:(0,R.Z)(e,"message")||y,type:"error"})})}))},tapStyle:"compress",children:(0,b.jsx)(f.xu,{paddingY:2,children:(0,b.jsx)(f.xv,{align:"center",size:"200",underline:!0,weight:"bold",children:c._('Resend code?', 'settings.MFA.ConfirmVerificationCode.ResendCode', 'Button to resend the code')})})})})})})})]})]})}),(0,b.jsx)(f.xu,{marginBottom:4,paddingX:2,children:(0,b.jsx)(f.zx,{color:"red",disabled:!A||!A.length||O||M,fullWidth:!0,onClick:function(){m({view_type:562,view_parameter:3731,element:96,event_type:102}),z(!0),S([]),(0,j.Z)({url:"/v3/users/settings/mfa/verify/",method:"POST",data:{password:r,token:A,email_input:i}}).then(function(){m({event_type:9990,view_type:562,view_parameter:3731}),(0,k.M0)().removeItem(D.ou),s()}).catch(function(e){S([e.message]),z(!1)})},text:c._('Verify', 'settings.MFA.Enable.ConfirmVerificationCode.SendButton', 'CTA to submit verification code on the Enter verification code at 2fa flow')})})]})};function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function V(e){var t=e.isFirstItem,r=e.checked,n=e.heading,o=e.id,i=e.name,a=e.onChange;return(0,b.jsxs)(f.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginTop:6*!t,paddingY:1,role:"listitem",children:[(0,b.jsx)(f.__,{htmlFor:o,children:(0,b.jsx)(f.X6,{accessibilityLevel:2,size:"400",children:n})}),(0,b.jsx)(f.FX.RadioButton,{checked:r,id:o,name:i,onChange:a,value:o})]})}var X=function(e){var t,r=e.afterCountryCodeSubmit,o=(0,l.ZP)(),i=z().countryCode,a=I(),s=a.setCountryCode,u=a.setCountryPhoneCode,d=(0,c.Z)({name:"ApiResource",options:{url:"/v3/countries/phone_codes/"}}),_=d.data,m=d.isLoaded,h=function(e){if(Array.isArray(e))return e}(t=(0,n.useState)(i))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{i=(r=r.call(e)).next,!1;for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,2)||function(e,t){if(e){if("string"==typeof e)return Z(e,2);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),y=h[0],v=h[1],x=function(e,t){v(e),s(e),u(t),r()};return m?(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)(p.default,{zIndexForGestaltBug:2,children:(0,b.jsx)(g.default,{heading:o._('Country Code', 'settings.MFA.Enable.CountryCode.header', 'Step counter for the enable 2fa flow page'),legoSettingsEnabled:!0})}),(0,b.jsx)(f.xu,{"data-test-id":"2fa-phone-number-country-code",marginTop:2,paddingX:2,role:"list",children:(0,b.jsx)(f.FX,{id:"2fa-phone-number-country-code-radio-options",legend:o._('Country Code', 'settings.MFA.Enable.CountryCode.header', 'Step counter for the enable 2fa flow page'),legendDisplay:"hidden",children:(_||[]).map(function(e,t){return(0,b.jsx)(V,{checked:e.code===y,heading:e.phone_code_label,id:"countryCode-".concat(e.phone_code_label),isFirstItem:0===t,name:"country_code",onChange:function(){return x(e.code,e.phone_code)}},"countryCode-option-".concat(e.phone_code_label))})})})]}):(0,b.jsx)(f.kC,{alignContent:"center",alignItems:"stretch",direction:"column",height:"100vh",justifyContent:"center",width:"100vw",children:(0,b.jsx)(f.xH,{accessibilityLabel:o._('Loading Country Code list', 'settings.MFA.Enable.CountryCode.loading', 'Loading state for the Country Code selection lsit'),show:!0})})};function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var G={CONFIRM_EMAIL:"confirm-email",CONFIRM_PASSWORD:"confirm-password",ADD_PHONE_NUMBER:"add-phone-number",ADD_PHONE_COUNTRY_CODE:"add-phone-country-code",VERIFICATION_CODE:"verification-code"},Y=Object.values(G);function $(){var e=(0,l.ZP)(),t=(0,u.F9)().showToast,r=(0,o.$B)(),f=(0,o.k6)(),_=z(),m=_.currentStep,h=_.isEmailValid,p=I(),y=p.setCurrentStep,g=p.setIsEmailValid,v=H((0,n.useState)(""),2),x=v[0],j=v[1],C=H((0,n.useState)(""),2),P=C[0],w=C[1],S=(0,d.HG)(),E=(0,c.Z)({name:"UserSettingsResource"}).data,O=(0,c.Z)({name:"ApiResource",options:{url:"/v3/users/settings/mfa/backup/"}}).data,M=null==E?void 0:E.email,F=null==O?void 0:O.email_status,D=function(e){f.push("/settings/mfa/".concat(e))},R=function(){var e=r.params.step;if(!Y.includes(e))return void f.push("/settings/security");var t=(0,i.Z)(F||"")?G.CONFIRM_PASSWORD:G.CONFIRM_EMAIL;h||e===G.CONFIRM_EMAIL||e===G.CONFIRM_PASSWORD?e!==m&&y(e||t):(y(t),D(t))};return((0,n.useEffect)(function(){R()},[r]),S)?(0,b.jsx)(o.l_,{to:"/settings/security"}):(0,b.jsxs)(s.default,{hasFixedHeader:!0,children:[m===G.CONFIRM_EMAIL?(0,b.jsx)(A,{afterEmailValidated:function(){return D(G.CONFIRM_PASSWORD)},userEmail:M||"",viewParameter:3806,viewType:562}):null,m===G.CONFIRM_PASSWORD?(0,b.jsx)(N.Z,{afterPasswordSubmit:function(e){j(e),g(!0),D(G.ADD_PHONE_NUMBER)},viewParameter:3729,viewType:562}):null,m===G.ADD_PHONE_NUMBER?(0,b.jsx)(T,{afterPhoneNumberSubmit:function(e){w(e),D(G.VERIFICATION_CODE)},onCountryCodeTouch:function(){return D(G.ADD_PHONE_COUNTRY_CODE)},password:x,userEmail:M||""}):null,m===G.ADD_PHONE_COUNTRY_CODE?(0,b.jsx)(X,{afterCountryCodeSubmit:function(){return D(G.ADD_PHONE_NUMBER)}}):null,m===G.VERIFICATION_CODE?(0,b.jsx)(U,{afterVerificationCodeSubmit:function(){t(function(t){var r=t.hideToast;return(0,b.jsx)(a.Z,{duration:4e3,onHide:r,text:e._('Two-factor authentication has been turned on', 'mfa.turnedOn.success', 'Toast message for successfully enabling 2fa')})}),f.push("/settings/security")},password:x,phoneNumber:P,userEmail:M||""}):null]})}var q=function(){return(0,b.jsx)(O,{children:(0,b.jsx)($,{})})}},391596:function(e,t,r){(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||[]).push(["www/settings/mfa/[step]",function(){return r(268952).Z}])}},function(e){e.O(0,[97270,32227,76175,8789,75114,59514,46611,55965,5966,70453,82595,86211,75242,87601],function(){return e(e.s=391596)}),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/settings/mfa/[step]-6c8b36db6ce43bd5.js.map