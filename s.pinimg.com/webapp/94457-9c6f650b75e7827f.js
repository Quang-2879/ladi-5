"use strict";(self.legacyJsonp=self.legacyJsonp||[]).push([[94457],{117588:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(132227),o=r(19035),i={__style:{margin:"0 10px",borderRight:"3px solid transparent",borderTop:"3px solid #fff",animation:"spin .8s linear infinite"}};function c(){return(0,o.jsx)(n.xu,{alignItems:"center",color:"primary",display:"flex",height:"100%",justifyContent:"center",position:"absolute",rounding:8,width:"100%",children:(0,o.jsx)(n.xu,{dangerouslySetInlineStyle:i,"data-test-id":"submit-button-spinner",display:"inlineBlock",height:18,position:"relative",rounding:"circle",width:18})})}function a(e){var t=e.disabled,r=e.name,i=e.onClick,a=e.size,s=e.submitting,u=e.text;return(0,o.jsxs)(n.xu,{"data-test-id":"submit-button",display:"flex",position:"relative",children:[s&&(0,o.jsx)(c,{}),(0,o.jsx)(n.zx,{color:"red",disabled:t||s,name:r,onClick:i,size:a,text:u,type:"submit"})]})}},385750:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(578373),o=r(801393),i=r(829131),c=r(492424),a=r(312702),s=r(273381),u=r(875202);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e,t,r,f){var p=e.boardId,b=e.sourceBoardId,y=void 0===b?"":b,m=e.sourceSectionId,h=void 0===m?"":m,_=e.name,v=e.nameSource,I=e.pinImport,O=e.initialPinIds,g=0;"RECOMMENDATION"===v?g=1:"EDITED_RECOMMENDATION"===v&&(g=2);var j=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){var n,o,i;n=e,o=t,i=r[t],(o=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=d(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({board_id:p,initial_pins:I&&!I.all?I.pinIds:void 0===O?[]:O,name:_,name_source:g},r?{orbac_subject_id:r}:Object.freeze({}));return function(e){return n.Z.create("BoardSectionResource",j).callCreate({showError:!1}).then(function(n){var d=n.resource_response.data;f({event_type:7100,object_id_str:d.id}),e((0,c.hd)(p,d)),e((0,a.vX)({feedId:p,feedType:u.Z.BOARD_SECTIONS,itemIds:[d.id],itemType:"boardsection"})),e((0,i.Z)(p,"pin_count")),e((0,o.jB)("BoardSectionsRepinResource",{board_id:p,orbac_subject_id:r}));var l=I||{all:!1,pinIds:[]},b=l.all,m=l.pinIds;return b?new Promise(function(r,n){return e((0,s.Z)({inverseSelection:!0,selectedPinIds:m,source:{boardId:y||p,sectionId:h||null},target:{boardId:p,sectionId:d.id}},t)).then(function(){return r(d)}).catch(n)}):(m.length>0&&e((0,a.EX)({feedId:p,feedType:u.Z.BOARDFEED,itemIds:m,itemType:"pin"})),d)})}}},829131:function(e,t,r){r.d(t,{Z:function(){return c}});var n=r(987775);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e,t,r){return(0,n.U)("BoardResource",{options:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,i,c;n=e,i=t,c=r[t],(i=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(i))in n?Object.defineProperty(n,i,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[i]=c}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({board_id:e,field_set_key:t},r?{orbac_subject_id:r}:{})})}},273381:function(e,t,r){r.d(t,{Z:function(){return b},S:function(){return p}});var n=r(578373),o=r(829131),i=r(808030),c=r(312702),a=r(28755),s=r(875202),u=r(795209),d=function(e){return function(t){u.Z.showError(function(e,t){switch(e.api_error_code){case 2171:case 2172:case 2173:return t._('Please wait until the previous board action finishes.', ' - ', ' -- ');default:return e.message}}(t,e))}},l=function(e){return(0,c.N8)(e.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,e.sectionId||e.boardId)};function f(e,t){var r=e.source,n=e.target;n.boardId!==r.boardId?(t((0,o.Z)(r.boardId,"pin_count")),t((0,o.Z)(n.boardId,"pin_count"))):r.sectionId&&n.sectionId||t((0,o.Z)(n.boardId,"pin_count")),r.sectionId&&t((0,i.Z)(r.sectionId)),n.sectionId&&t((0,i.Z)(n.sectionId))}function p(e){return function(t){var r=e.selectedPinIds,n=e.source,o=e.target;t((0,c.EX)({feedId:n.sectionId||n.boardId,feedType:n.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:r,itemType:"pin"})),t((0,c.vX)({feedId:o.sectionId||o.boardId,feedType:o.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:r,itemType:"pin"})),r.forEach(function(e){t((0,a.Vp)({pinId:e,boardId:o.boardId,sectionId:o.sectionId||void 0,title:o.name||""}))}),f(e,t)}}function b(e,t){return function(r){var o=e.selectedPinIds,i=e.target;return o.forEach(function(e){r((0,a.Vp)({pinId:e,boardId:i.boardId,sectionId:i.sectionId||void 0,title:i.name||""}))}),(function(e,t,r){var o=e.inverseSelection,i=e.selectedPinIds,a=e.source,u=e.target,f=e.orbacSubjectId;if(a.boardId===u.boardId&&(a.sectionId||null)===(u.sectionId||null))return Promise.reject();if(o){var p={board_id:a.boardId,new_board_id:u.boardId,old_section_id:a.sectionId||void 0,new_section_id:u.sectionId||void 0,pin_ids:i,orbac_subject_id:f};return n.Z.create("BulkEditSelectAllResource",p).callUpdate({showError:!1}).then(function(){return Promise.all([t(l(a)),t(l(u))])}).catch(d(r))}var b=function(e,r){t((0,c.EX)({feedId:e.sectionId||e.boardId,feedType:e.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:i,itemType:"pin"})),t((0,c.vX)({feedId:r.sectionId||r.boardId,feedType:r.sectionId?s.Z.BOARD_SECTION_PINS:s.Z.BOARDFEED,itemIds:i,itemType:"pin"}))};b(a,u);var y=function(){return b(u,a)};if(u.boardId===a.boardId)if(u.sectionId){var m={section_id:u.sectionId,pins:i,orbac_subject_id:f};return n.Z.create("BoardSectionEditResource",m).callUpdate({showError:!1}).catch(function(e){y(),d(r)(e)})}else{var h={section_id:a.sectionId,pins:i,orbac_subject_id:f};return n.Z.create("BoardSectionPinsResource",h).callDelete({showError:!1}).catch(function(e){y(),d(r)(e)})}var _={board_id:u.boardId,section_id:u.sectionId||void 0,pin_ids:i,orbac_subject_id:f};return n.Z.create("BulkEditResource",_).callUpdate({showError:!1}).catch(function(e){y(),d(r)(e)})})(e,r,t).then(function(){return f(e,r)})}}},594457:function(e,t,r){var n=r(258712),o=r(545007),i=r(132227),c=r(219308),a=r(233846),s=r(653810),u=r(882368),d=r(827491),l=r(488879),f=r(117588),p=r(385750),b=r(19035);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){g(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function v(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(I=function(){return!!e})()}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=y(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}var S=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");o.prototype=Object.create(e&&e.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),e&&_(o,e);var t,r,n=(t=I(),function(){var e,r=O(o);return e=t?Reflect.construct(r,arguments,O(this).constructor):r.apply(this,arguments),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return v(e)}(this,e)});function o(e){var t;if(!(this instanceof o))throw TypeError("Cannot call a class as a function");return g(v(t=n.call(this,e)),"onCreateSection",function(){var e=t.props,r=e.board,n=e.sourceBoard,o=e.sourceSection,i=e.dispatch,c=e.completeCreateSectionAction,a=e.pinImport,s=e.viewer,u=e.orbacActingAs,d=e.logContextEvent,f=(0,l.lJ)(s,u);return t.setState({isSaving:!0}),i((0,p.Z)({boardId:r.id,sourceBoardId:n&&n.id,sourceSectionId:o&&o.id,name:t.state.inputName.trim(),pinImport:a},t.props.i18n,f,d)).then(function(e){t.setState({isSaving:!1}),c(e)}).catch(function(e){t.setState({createError:e.message_detail||e.message,isSaving:!1})})}),g(v(t),"handleKeyDown",function(e){var r=e.event,n=t.state,o=n.createError,i=n.inputName;[s.Z.ENTER,s.Z.NUMPAD_ENTER].includes(r.which)&&!o&&i.trim()&&t.onCreateSection()}),g(v(t),"handleChangeName",function(e){var r=e.value;t.setState({createError:null,inputName:r})}),g(v(t),"handleInputRef",function(e){t.setState({inputRef:e})}),t.state={createError:null,inputName:e.initialName||"",inputRef:null,isSaving:!1},t}return r=[{key:"componentDidUpdate",value:function(e,t){var r=this.state,n=r.createError,o=r.inputRef;o&&(!t.inputRef||n)&&o.focus()}},{key:"render",value:function(){var e=this.props,t=e.showTitle,r=e.positionRelative,n=this.state,o=n.createError,c=n.inputName,a=n.isSaving,s=!!c.trim()&&!o;return(0,b.jsxs)(i.xu,{bottom:!0,color:"default",dangerouslySetInlineStyle:{__style:{borderLeft:"1px solid #f5f5f5"}},direction:"column",display:"flex",flex:"grow",position:r?"relative":"absolute",right:!0,rounding:2,top:!0,width:"100%",children:[t&&(0,b.jsx)(i.xu,{marginTop:3,paddingX:6,paddingY:3,children:(0,b.jsx)(i.X6,{size:"400",children:this.props.i18n._('Add section', 'Title in the add section modal', 'Title in the add section modal')})}),(0,b.jsxs)(i.xu,{padding:4,children:[(0,b.jsx)(i.xu,{marginBottom:2,children:(0,b.jsx)(i.__,{htmlFor:"sectionEditName",children:(0,b.jsx)(i.xv,{color:o?"error":"subtle",size:"200",children:this.props.i18n._('Name', 'Board section name', 'Board section name')})})}),(0,b.jsx)(i.xu,{children:(0,b.jsx)(i.xu,{ref:this.handleInputRef,children:(0,b.jsx)(i.nv,{errorMessage:o||"",id:"sectionEditName",name:"sectionName",onChange:this.handleChangeName,onKeyDown:this.handleKeyDown,placeholder:this.props.i18n._('Like "Lighting"', 'Placeholder for board section name', 'Placeholder for board section name'),size:"lg",type:"text",value:c})})})]}),(0,b.jsx)(i.kC,{alignItems:"stretch",flex:"grow",justifyContent:"start"}),(0,b.jsx)(i.xu,{padding:4,children:(0,b.jsx)(i.kC,{alignItems:"stretch",justifyContent:"end",children:(0,b.jsx)(f.Z,{disabled:!s||a,onClick:this.onCreateSection,submitting:a,text:this.props.i18n._('Add', 'add a new section', 'add a new section')})})})]})}}],function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}(o.prototype,r),Object.defineProperty(o,"prototype",{writable:!1}),o}(n.Component);t.Z=function(e){var t=(0,o.I0)(),r=(0,a.ZP)(),n=(0,u.Z)(),i=(0,d.Z)();return(0,b.jsx)(S,h(h({},e),{},{dispatch:t,i18n:r,logContextEvent:(0,c.Z)(),orbacActingAs:i,viewer:n}))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/94457-9c6f650b75e7827f.js.map